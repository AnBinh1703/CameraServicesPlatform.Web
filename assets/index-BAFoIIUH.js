import{c as ws,a as gr,b as xr,p as fr,d as yr,e as jr,r,j as e,u as X,f as ft,g as Re,N as de,L as qe,B as ve,O as Ds,h as yt,M as br,i as Nr,F as wt,k as Sr,l as Dt,m as Zt,n as Ct,o as Ir,q as Cs,s as C,S as Z,I as Y,D as we,t as H,v as h,w as Ps,x as se,y as re,z as je,C as Je,U as We,R as ct,A as vr,E as Ht,G as tt,H as $e,J as te,K as J,P as U,Q as ke,T as ut,V as wr,W as Me,X as ie,Y as He,Z as es,_ as Dr,$ as Cr,a0 as Pr,a1 as kr,a2 as Tr,a3 as Mr,a4 as Vr,a5 as Ar,a6 as Ze,a7 as Q,a8 as Fr,a9 as me,aa as Ot,ab as ks,ac as De,ad as Lr,ae as Ft,af as Lt,ag as $,ah as Ye,ai as Er,aj as ts,ak as $r,al as Rr,am as Hr,an as Or,ao as Br,ap as Yr,aq as Gr,ar as it,as as ne,at as Ts,au as at,av as qr,aw as pt,ax as mt,ay as he,az as zr,aA as Kr,aB as Wr,aC as Ge,aD as Ue,aE as ae,aF as fe,aG as Bt,aH as st,aI as ss,aJ as Ie,aK as Pt,aL as Ur,aM as Qr,aN as Xr,aO as Le,aP as _r,aQ as Jr,aR as Yt,aS as Ms,aT as Vs,aU as Gt,aV as Qe,aW as Zr,aX as en,aY as As,aZ as Fs,a_ as Ls,a$ as Es,b0 as Et,b1 as tn,b2 as qt,b3 as $s,b4 as zt,b5 as rs,b6 as Be,b7 as ns,b8 as as,b9 as cs,ba as sn,bb as rn,bc as ee,bd as nn,be as an,bf as et,bg as cn,bh as ln,bi as on,bj as dn,bk as hn,bl as un,bm as pn,bn as ls,bo as mn}from"./vendor-OXUwhjSv.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const u of f.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=n(c);fetch(c.href,f)}})();const gn={user:null,role:null},Rs=ws({name:"user",initialState:gn,reducers:{login:(s,t)=>{s.user=t.payload},logout:s=>{s.user=null,s.role=null},author:(s,t)=>{s.role=t.payload}}}),{login:$t,logout:xn,author:is}=Rs.actions,fn=Rs.reducer,yn=gr({user:fn}),jn={key:"root",storage:jr},bn=yr(jn,yn),Hs=xr({reducer:bn,middleware:s=>s({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"],ignoredPaths:["_persist"]}})}),Nn=fr(Hs),Sn=r.createContext(),In=({children:s})=>{const[t,n]=r.useState(!1),[a,c]=r.useState(null),[f,u]=r.useState(!1),[d,o]=r.useState(!0),[S,P]=r.useState(0),[I,T]=r.useState({}),[N,D]=r.useState(""),[g,w]=r.useState(""),[A,F]=r.useState([]),p={theme:t,setTheme:n,idRoomChat:a,setIdRoomChat:c,showSearchFriends:f,setShowSearchFriends:u,showChatList:d,setShowChatList:o,active:S,setActive:P,creatorDetail:I,setCreatorDetail:T,changeSection:N,setChangeSection:D,realtime:g,setRealtime:w,demo:A,setDemo:F};return e.jsx(Sn.Provider,{value:p,children:s})},vn=()=>e.jsx("div",{className:"mt-4 p-4 bg-black text-white rounded-md border-t-2 border-red-600 container mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"px-5",children:[e.jsx("div",{className:"flex items-center gap-2 mb-5",children:e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"CameraServicePlatform"})}),e.jsxs("p",{className:"opacity-75 mb-5",children:['"Đặt lịch cùng chúng tôi để có những trải nghiệm tuyệt vời nhất!"',e.jsx("br",{})]})]}),e.jsxs("div",{className:"px-5",children:[e.jsx("h2",{className:"text-xl mb-5 text-red-600",children:"Về chúng tôi"}),e.jsxs("ul",{className:"opacity-75",children:[e.jsx("li",{className:"mb-2",children:e.jsx("a",{href:"https://www.facebook.com/modareinvented",className:"hover:text-red-300",children:"Facebook"})}),e.jsx("li",{className:"mb-2",children:e.jsx("a",{href:"https://www.facebook.com/modareinvented",className:"hover:text-red-300",children:"Tiktok"})})]})]}),e.jsxs("div",{className:"px-5",children:[e.jsx("h2",{className:"text-xl mb-5 text-red-600",children:"Dịch vụ chăm sóc khách hàng"}),e.jsx("ul",{className:"opacity-75",children:e.jsx("li",{className:"mb-2 hover:text-red-300",children:"Chính sách"})})]}),e.jsxs("div",{className:"px-5",children:[e.jsx("h2",{className:"text-xl mb-5 text-red-600",children:"Liên hệ"}),e.jsxs("ul",{className:"opacity-75",children:[e.jsx("li",{className:"mb-2",children:"Đại Học FPT Hồ Chí Minh, Quận 9, Thành Phố Hồ Chí Minh"}),e.jsx("li",{className:"mb-2",children:"Email: example@gmail.com"}),e.jsx("li",{className:"mb-2",children:"Phone: +84 366 967 957"})]})]})]})}),wn="/assets/image-CbilysrA.png";function ze(s){return s!=null?s.toLocaleString("vi-VN",{style:"currency",currency:"VND"}):"0"}function Ke(s){var t=new Date(s),n=t.getDate(),a=t.getMonth()+1,c=t.getFullYear(),f=t.getHours(),u=t.getMinutes(),d=t.getSeconds();return n<10&&(n="0"+n),a<10&&(a="0"+a),f<10&&(f="0"+f),u<10&&(u="0"+u),d<10&&(d="0"+d),n+"/"+a+"/"+c+" "+f+":"+u+":"+d}function Os(s){return!!s&&s.constructor===Object&&Object.keys(s).length===0}const Dn=()=>{const{user:s}=X(P=>P.user||{}),t=ft(),[n,a]=r.useState(!1),[c,f]=r.useState(!1),u=X(P=>{var I;return((I=P.user)==null?void 0:I.role)||""}),d=Re();r.useEffect(()=>{const P=()=>{f(window.scrollY>=100)};return window.addEventListener("scroll",P),()=>window.removeEventListener("scroll",P)},[]);const o=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t(xn()),d("/"),ve.success("Đăng xuất thành công")},S=()=>e.jsxs("div",{className:"dropdown dropdown-end",children:[e.jsx("div",{tabIndex:0,role:"button",className:"cursor-pointer m-1 text-black",children:e.jsx("i",{className:"fa-solid fa-user"})}),e.jsxs("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-white rounded-box w-52",children:[e.jsxs("li",{children:[e.jsx(de,{to:"/personal-information",children:"Tài khoản"}),e.jsx(de,{to:"/personal-review",children:"Đánh giá"}),e.jsx(de,{to:"/personal-order-history",children:"Lịch sử đơn hàng"}),e.jsx(de,{to:"/create-report-form",children:"Báo cáo "})]}),u==="ADMIN"&&e.jsx(de,{to:"/admin",children:e.jsx("li",{children:e.jsx("span",{children:"Trang quản trị"})})}),u==="STAFF"&&e.jsx(de,{to:"/staff",children:e.jsx("li",{children:e.jsx("span",{children:"Trang quản trị"})})}),u==="SUPPLIER"&&e.jsx(de,{to:"/supllier",children:e.jsx("li",{children:e.jsx("span",{children:"Trang quản trị"})})}),e.jsx("li",{onClick:o,children:e.jsx("a",{children:"Đăng xuất"})})]})]});return e.jsxs("div",{className:`w-full transition-all duration-300 z-10 ${c?"bg-white shadow-xl py-2":"bg-white shadow-md py-4"}`,children:[e.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[e.jsx(de,{to:"/",className:"flex items-center gap-2 no-underline text-black",children:e.jsx("img",{src:wn,alt:"Logo",className:"h-12"})}),e.jsxs("div",{className:"relative hidden md:flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Nhập sản phẩm bạn đang tìm kiếm",className:"border border-gray-300 rounded-l-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 w-80"}),e.jsx("button",{className:"bg-red-500 text-white rounded-r-md px-6 py-2",children:e.jsx("i",{className:"fa-solid fa-magnifying-glass"})})]}),e.jsx(qe,{to:"/wishlist",className:"hidden md:block  font-semibold no-underline text-primary  hover:text-gray-500",children:"Wishlist"}),e.jsx("div",{className:"flex items-center gap-4",children:s?S():e.jsx(e.Fragment,{children:e.jsx(qe,{to:"/login",className:"no-underline font-semibold text-black hover:text-gray-500",children:"Đăng nhập"})})})]}),e.jsxs("div",{className:"hidden md:flex items-center flex-grow justify-center space-x-6",children:[e.jsx(de,{to:"/",className:"text-black hover:text-gray-500 no-underline",children:"Trang chủ"}),e.jsx(de,{to:"/information-supplier",className:"text-black hover:text-gray-500 no-underline",children:"Nhà cung cấp"}),e.jsx(de,{to:"/category",className:"text-black hover:text-gray-500 no-underline",children:"Danh mục"}),e.jsx(de,{to:"/product-for-rent",className:"text-black hover:text-gray-500 no-underline",children:"Sản phẩm cho thuê"}),e.jsx(de,{to:"/product-for-buy",className:"text-black hover:text-gray-500 no-underline",children:"Sản phẩm mua"}),e.jsx(de,{to:"/policy",className:"text-black hover:text-gray-500 no-underline",children:"Chính sách"}),e.jsx(de,{to:"/about",className:"text-black hover:text-gray-500 no-underline",children:"Về chúng tôi"}),e.jsx(de,{to:"/contact",className:"text-black hover:text-gray-500 no-underline",children:"Liên hệ"})]}),n&&e.jsx("div",{className:"md:hidden",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[e.jsx(qe,{to:"/",className:"block px-3 py-2 rounded-md text-base font-medium text-black hover:bg-red-100",children:"Trang chủ"}),e.jsx(qe,{to:"/wishlist",className:"hidden md:block  font-semibold no-underline text-primary  hover:text-gray-500",children:"Wishlist"}),Os(s)||s==null&&e.jsx(qe,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium text-black hover:bg-red-100",children:"Đăng nhập"})]})})]})},Cn=()=>e.jsxs(e.Fragment,{children:[e.jsx(Dn,{}),e.jsx("div",{className:"container my-10",children:e.jsx(Ds,{})}),e.jsx(vn,{})]}),Pn=()=>e.jsxs("header",{className:"navbar bg-black text-white py-4",children:[e.jsxs("div",{className:"navbar-start",children:[e.jsx("label",{htmlFor:"my-drawer-2",className:"mx-10 bg-white text-primary drawer-button lg:hidden cursor-pointer",children:e.jsx("i",{className:"fa-solid fa-bars text-black"})}),e.jsx(de,{to:"/",children:e.jsx("span",{className:"mx-10 normal-case text-xl font-bold text-red-600",children:"CameraServicePlatform"})})]}),e.jsxs("div",{className:"navbar-end",children:[e.jsx("button",{className:"btn btn-ghost btn-circle text-white hover:bg-red-600",children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("button",{className:"btn btn-ghost btn-circle text-white hover:bg-red-600",children:e.jsxs("div",{className:"indicator",children:[e.jsx("i",{className:"fas fa-bell"}),e.jsx("span",{className:"badge badge-xs badge-red-600 indicator-item"})]})})]})]}),kn=()=>{const s=X(d=>{var o;return((o=d.user)==null?void 0:o.role)||""}),[t,n]=r.useState(!0),a=()=>n(!t),c=yt(),f={STAFF:[{name:"THỐNG KÊ",link:"dashboard",icon:e.jsx(wt,{})},{name:"DANH MỤC",link:"manage-category",icon:e.jsx(Sr,{})},{name:"SẢN PHẨM",link:"manage-product",icon:e.jsx(Dt,{})},{name:"VOUCHER",link:"manage-voucher",icon:e.jsx(Zt,{})},{name:"GIAO DỊCH",link:"manage-transaction-system"}],SUPPLIER:[{name:"THỐNG KÊ",link:"dashboard",icon:e.jsx(wt,{})},{name:"VOUCHER",link:"manage-voucher-of-supplier",icon:e.jsx(Zt,{})},{name:"QUẢN LÍ SẢN PHẨM",link:"manage-product-of-supplier",icon:e.jsx(Dt,{})},{name:"QUẢN LÍ ĐƠN HÀNG",link:"manage-order",icon:e.jsx(Ct,{})},{name:"QUẢN LÍ ĐIỂU KHOẢN HỢP ĐÔNG",link:"manage-contract-template",icon:e.jsx(Ct,{})}],ADMIN:[{name:"THỐNG KÊ",link:"dashboard",icon:e.jsx(wt,{})},{name:"Người dùng",link:"manage-user",icon:e.jsx(Ir,{})},{name:"Tổng quản lí sản phẩm hệ thống",link:"manage-product",icon:e.jsx(Dt,{})},{name:"Quản lí chính sách",link:"manage-policy",icon:e.jsx(Ct,{})}]},u=d=>d?d.map(o=>e.jsx("li",{className:"my-2",children:e.jsxs(de,{to:`${o.link}`,className:`flex items-center p-2 rounded-lg transition-colors duration-200 ${c.pathname.includes(o.link)?"bg-teal-600 text-white":"text-gray-800 hover:bg-teal-100 hover:text-teal-600"}`,children:[o.icon&&e.jsx("span",{className:"w-6 h-6",children:o.icon}),e.jsx("span",{className:`ml-3 ${!t&&"hidden"}`,children:o.name})]})},o.link)):null;return e.jsx("div",{className:"flex",children:e.jsxs("div",{className:`h-screen bg-white transition-all duration-300 ${t?"w-64":"w-16"} border-r border-gray-200`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[t&&e.jsx("h1",{className:"text-2xl font-bold text-teal-600",children:"Logo"}),e.jsx("button",{onClick:a,className:"focus:outline-none",children:t?e.jsx(br,{size:24}):e.jsx(Nr,{size:24})})]}),e.jsx("nav",{className:"px-2",children:e.jsx("ul",{children:s&&u(f[s])})})]})})},kt=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col h-screen",children:[e.jsx(Pn,{}),e.jsxs("div",{className:"flex flex-row flex-1",children:[e.jsx(kn,{}),e.jsx("div",{className:"mx-4 p-4 w-full my-10 rounded-4xl",children:e.jsx(Ds,{})})]})]})}),Bs="http://14.225.220.108:2602",Tn={baseUrl:Bs,timeout:3e5},G=Cs.create(Tn);G.defaults.baseURL=Bs;const Mn=s=>{var n;const t=(n=localStorage.getItem("accessToken"))==null?void 0:n.replaceAll('"',"");return s.headers.Authorization=`Bearer ${t}`,s},Vn=s=>{console.log(s)};G.interceptors.request.use(Mn,Vn);const An=async s=>{try{return(await G.post("/policy/create-policy",s,{headers:{"Content-Type":"application/json"}})).data}catch(t){return console.error("Error creating policy:",t),null}},Fn=async(s,t)=>{try{return(await G.put(`/policy/update-policy-by-id?PolicyID=${s}`,t)).data}catch(n){return console.error("Error updating policy:",n),null}},Ln=async s=>{try{return(await G.delete(`/policy/delete-policy-by-id?PolicyID=${s}`,{headers:{accept:"*/*"}})).data}catch(t){return console.error("Error deleting policy:",t),null}},En=async s=>{try{return(await G.get(`/policy/get-policy-by-id?PolicyID=${s}`,{headers:{accept:"*/*"}})).data}catch(t){return console.error("Error retrieving policy:",t),null}},Ys=async(s,t)=>{try{return(await G.get(`/policy/get-all-policy?pageIndex=${s}&pageSize=${t}`)).data}catch(n){return console.error("Error retrieving policies:",n),null}},$n=async(s,t,n)=>{try{return(await G.get(`/policy/get-policy-by-applicable-object?type=${s}&pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error retrieving policies by applicable object:",a),null}},{Option:nt}=Z,Rn=({onClose:s,fetchPolicies:t})=>{const[n]=C.useForm(),a=async c=>{await An(c)?(h.success("Policy created successfully!"),n.resetFields(),t(),s()):h.error("Error creating policy.")};return e.jsxs(C,{form:n,onFinish:a,layout:"vertical",children:[e.jsx(C.Item,{name:"policyType",label:"Policy Type",rules:[{required:!0,message:"Please select a policy type!"}],children:e.jsxs(Z,{placeholder:"Select a policy type",children:[e.jsx(nt,{value:1,children:"System"}),e.jsx(nt,{value:2,children:"Supplier"})]})}),e.jsx(C.Item,{name:"policyContent",label:"Policy Content",rules:[{required:!0,message:"Please input policy content!"}],children:e.jsx(Y.TextArea,{})}),e.jsx(C.Item,{name:"applicableObject",label:"Applicable Object",rules:[{required:!0,message:"Please input applicable object!"}],children:e.jsxs(Z,{placeholder:"Select a Applicable Object",children:[e.jsx(nt,{value:0,children:"System"}),e.jsx(nt,{value:1,children:"Member"}),e.jsx(nt,{value:2,children:"Supplier"})]})}),e.jsx(C.Item,{name:"effectiveDate",label:"Effective Date",rules:[{required:!0,message:"Please select effective date!"}],children:e.jsx(we,{showTime:!0})}),e.jsx(C.Item,{name:"value",label:"Value",rules:[{required:!0,message:"Please input value!"}],children:e.jsx(we,{showTime:!0})}),e.jsxs(C.Item,{children:[e.jsx(H,{type:"primary",htmlType:"submit",children:"Create Policy"}),e.jsx(H,{style:{marginLeft:"10px"},onClick:s,children:"Cancel"})]})]})},Hn=()=>{const[s,t]=r.useState([]),[n,a]=r.useState([]),[c,f]=r.useState(""),[u,d]=r.useState(1),[o]=r.useState(10),[S,P]=r.useState(!1),[I,T]=r.useState(!1),[N,D]=r.useState(!1),[g,w]=r.useState(null),A=async()=>{try{const i=await Ys(u,o);i&&i.isSuccess?(t(i.result||[]),a(i.result||[])):h.error("Error fetching policies.")}catch(i){h.error("Error fetching policies."),console.error(i)}},F=async i=>{try{await Ln(i),h.success("Policy deleted successfully!"),A()}catch(L){h.error("Error deleting policy."),console.error(L)}},p=async(i,L)=>{try{const k=await Fn(i,L);k&&k.isSuccess?(h.success("Policy updated successfully!"),A(),T(!1)):h.error("Error updating policy.")}catch(k){h.error("Error updating policy."),console.error(k)}},l=async i=>{if(!i){h.error("Invalid policy ID.");return}try{const L=await En(i);L&&L.isSuccess?(w(L.result),D(!0)):h.error("Error fetching policy details.")}catch(L){h.error("Error fetching policy details."),console.error(L)}},v=i=>{f(i);const L=s.filter(k=>(k.policyType||"").toString().toLowerCase().includes(i.toLowerCase())||(k.policyContent||"").toString().toLowerCase().includes(i.toLowerCase())||(k.applicableObject||"").toString().toLowerCase().includes(i.toLowerCase()));a(L)};r.useEffect(()=>{A()},[u]);const m=()=>{P(!0)},j=()=>{P(!1),T(!1),D(!1),w(null)},b=[{title:"Policy ID",dataIndex:"policyID",key:"policyID"},{title:"Policy Type",dataIndex:"policyType",key:"policyType"},{title:"Policy Content",dataIndex:"policyContent",key:"policyContent",render:i=>e.jsx("div",{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i})},{title:"Applicable Object",dataIndex:"applicableObject",key:"applicableObject"},{title:"Effective Date",dataIndex:"effectiveDate",key:"effectiveDate",render:i=>new Date(i).toLocaleDateString()},{title:"Value",dataIndex:"value",key:"value",render:i=>new Date(i).toLocaleDateString()},{title:"Actions",key:"actions",render:(i,L)=>e.jsxs("div",{children:[e.jsx(H,{type:"link",onClick:()=>l(L.policyID),children:"View"}),e.jsx(H,{type:"link",onClick:()=>{T(!0),w(L)},children:"Edit"}),e.jsx(H,{type:"link",onClick:()=>F(L.policyID),children:"Delete"})]})}];return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h2",{children:"Manage Policies"}),e.jsx(Y,{placeholder:"Search Policies",value:c,onChange:i=>v(i.target.value),style:{marginBottom:"20px",width:"300px"}}),e.jsx(H,{type:"primary",onClick:m,style:{marginBottom:"20px"},children:"Create Policy"}),e.jsx(Ps,{}),e.jsx(se,{dataSource:n,columns:b,rowKey:"policyID",pagination:{current:u,pageSize:o,onChange:i=>d(i)}}),e.jsx(re,{title:"Create Policy",open:S,onCancel:j,footer:null,children:e.jsx(Rn,{onClose:j,fetchPolicies:A})}),e.jsx(re,{title:"Policy Details",open:N,onCancel:j,footer:null,children:g?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Policy ID:"})," ",g.policyID]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Policy Type:"})," ",g.policyType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Policy Content:"})," ",g.policyContent]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Applicable Object:"})," ",g.applicableObject]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Effective Date:"})," ",new Date(g.effectiveDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Value:"})," ",new Date(g.value).toLocaleDateString()]})]}):e.jsx("p",{children:"No policy selected"})}),e.jsx(re,{title:"Edit Policy",open:I,onCancel:j,footer:null,children:g?e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Policy ID:"})," ",g.policyID]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Policy Type:"}),e.jsx(Y,{value:g.policyType,onChange:i=>w({...g,policyType:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Policy Content:"}),e.jsx(Y,{value:g.policyContent,onChange:i=>w({...g,policyContent:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Applicable Object:"}),e.jsx(Y,{value:g.applicableObject,onChange:i=>w({...g,applicableObject:i.target.value})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Effective Date:"}),e.jsx(we,{value:g.effectiveDate?je(g.effectiveDate):null,onChange:(i,L)=>w({...g,effectiveDate:L})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Value:"}),e.jsx(Y,{value:g.value,onChange:i=>w({...g,value:i.target.value})})]}),e.jsx(H,{type:"primary",onClick:()=>p(g.policyID,g),children:"Update Policy"})]}):e.jsx("p",{children:"Loading policy..."})})]})},On=async(s,t)=>{try{return(await G.post("/account/login",{email:s,password:t})).data}catch{return null}},Bn=async s=>{try{return(await G.post("/account/create-account",s,{})).data}catch(t){return console.error("Error creating account:",t),null}},Yn=async(s,t,n,a,c,f,u,d,o,S,P,I,T,N)=>{try{const D=new FormData;return D.append("Email",s),D.append("Password",t),D.append("FirstName",n),D.append("LastName",a),D.append("SupplierName",c),D.append("SupplierDescription",f),D.append("SupplierAddress",u),D.append("ContactNumber",d),D.append("PhoneNumber",o),D.append("BankName",I),D.append("AccountNumber",T),D.append("AccountHolder",N),D.append("FrontOfCitizenIdentificationCard",S),D.append("BackOfCitizenIdentificationCard",P),(await G.post("/account/register/supplier",D,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(D){return console.error("Error registering supplier:",D),null}},Gs=async s=>{try{return(await G.post(`/account/send-email-for-activeCode/${s}`)).data}catch{return null}},Gn=async(s,t)=>{try{return(await G.put(`/account/active-account/${encodeURIComponent(s)}/${encodeURIComponent(t)}`)).data}catch{return null}},qn=async s=>{try{return(await G.post("/account/google-callback",`${s}`,{headers:{"Content-Type":"application/json"}})).data}catch{return null}},gt=async(s,t)=>{try{return(await G.post(`/account/get-account-by-userId/${s}`,{},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},withCredentials:!0})).data}catch(n){return console.error("Error fetching account by ID:",n),null}},Kt=async s=>{try{return(await G.post(`/account/get-account-by-userId/${s}`)).data}catch(t){return console.error("Error fetching account by ID:",t),null}},zn=async s=>{try{return(await G.post(`/account/send-email-forgot-password/${s}`)).data}catch{return null}},Kn=async(s,t,n)=>{try{return(await G.put("/account/forgot-password",{email:s,recoveryCode:t,newPassword:n})).data}catch{return null}},Wn=async(s,t)=>{try{return(await G.get(`/account/get-all-account?pageIndex=${s}&pageSize=${t}`,[])).data}catch{return null}},Ve=async s=>{try{return(await G.get(`/account/get-supplier-id-by-account-id/${s}`)).data}catch{return null}},xt=async s=>{try{return(await G.get(`/account/get-staff-id-by-account-id/${s}`)).data}catch{return null}},Un=async s=>{try{return(await G.put("/account/update-account",s)).data}catch{return null}},Qn=async s=>{try{return(await G.post("/account/create-staff",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){return console.error("Error creating staff:",t),null}},{Option:os}=Z,qs=()=>{const[s]=C.useForm(),[t,n]=r.useState([]),a=({fileList:f})=>{n(f)},c=async f=>{const u=new FormData;u.append("FirstName",f.FirstName),u.append("LastName",f.LastName),u.append("Email",f.Email),u.append("PhoneNumber",f.PhoneNumber),u.append("JobTitle",f.JobTitle),u.append("Department",f.Department),u.append("StaffStatus",f.StaffStatus),u.append("HireDate",f.HireDate.format()),u.append("IsAdmin",f.IsAdmin),t.length>0&&u.append("Img",t[0].originFileObj),await Qn(u)?(h.success("Tạo nhân viên thành công!"),s.resetFields(),n([])):h.error("Tạo nhân viên thất bại.")};return e.jsxs("div",{className:"p-4 max-w-md mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:"TẠO TÀI KHOẢN NHÂN VIÊN"}),e.jsxs(C,{form:s,onFinish:c,layout:"vertical",initialValues:{IsAdmin:!1},children:[e.jsx(C.Item,{label:"Tên",name:"FirstName",rules:[{required:!0,message:"Vui lòng nhập tên của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập tên"})}),e.jsx(C.Item,{label:"Họ",name:"LastName",rules:[{required:!0,message:"Vui lòng nhập họ của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập họ"})}),e.jsx(C.Item,{label:"Email",name:"Email",rules:[{required:!0,type:"email",message:"Vui lòng nhập email hợp lệ!"}],children:e.jsx(Y,{placeholder:"Nhập email"})}),e.jsx(C.Item,{label:"Số điện thoại",name:"PhoneNumber",rules:[{required:!0,message:"Vui lòng nhập số điện thoại của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập số điện thoại"})}),e.jsx(C.Item,{label:"Chức vụ",name:"JobTitle",rules:[{required:!0,message:"Vui lòng nhập chức vụ của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập chức vụ"})}),e.jsx(C.Item,{label:"Phòng ban",name:"Department",rules:[{required:!0,message:"Vui lòng nhập phòng ban của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập phòng ban"})}),e.jsx(C.Item,{label:"Trạng thái nhân viên",name:"StaffStatus",rules:[{required:!0,message:"Vui lòng chọn trạng thái nhân viên!"}],children:e.jsxs(Z,{placeholder:"Chọn trạng thái nhân viên",children:[e.jsx(os,{value:"active",children:"Hoạt động"}),e.jsx(os,{value:"suspended",children:"Đình chỉ"})]})}),e.jsx(C.Item,{label:"Ngày tuyển dụng",name:"HireDate",rules:[{required:!0,message:"Vui lòng chọn ngày tuyển dụng!"}],children:e.jsx(we,{showTime:!0,placeholder:"Chọn ngày tuyển dụng"})}),e.jsx(C.Item,{name:"IsAdmin",valuePropName:"checked",children:e.jsx(Je,{children:"Là quản trị viên"})}),e.jsx(C.Item,{label:"Tải lên hình ảnh",valuePropName:"fileList",getValueFromEvent:a,children:e.jsx(We,{beforeUpload:()=>!1,onChange:a,fileList:t,children:e.jsx(H,{icon:e.jsx(ct,{}),children:"Tải lên"})})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",className:"w-full",children:"Tạo Nhân Viên"})})]})]})},zs=async(s,t)=>{try{return(await G.get(`/supplier/get-all-supplier?pageIndex=${s}&pageSize=${t}`)).data}catch(n){return console.error("Error fetching supplier:",n),null}},be=async(s,t=1,n=1)=>{try{return(await G.get("/supplier/get-supplier-by-id",{params:{id:s,pageIndex:t,pageSize:n},headers:{accept:"application/json"}})).data}catch(a){return console.error("Error fetching supplier by ID:",a),null}},Xn=async s=>{try{return(await G.put("/supplier/update-supplier",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){return console.error("Error updating supplier:",t),null}},_n=async s=>{try{return(await G.delete(`/supplier/delete-supplier?supplierId=${s}`)).data}catch(t){return console.error("Error deleting supplier:",t),null}},ds=vr`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,Jn=Ht.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 9999;
`,Zn=Ht.div`
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: 8px solid transparent;
  border-top-color: #2ecc71; /* Màu xanh lá */
  animation: ${ds} 2s linear infinite;
  &:before {
    content: "";
    position: absolute;
    top: 5px;
    left: 5px;
    right: 5px;
    bottom: 5px;
    border-radius: 50%;
    border: 8px solid transparent;
    border-top-color: #ffffff; /* Màu trắng */
    animation: ${ds} 1.5s linear infinite reverse;
  }
`,ea=Ht.p`
  color: #ffffff;
  font-size: 18px;
  font-weight: bold;
  margin-top: 20px;
  animation: blink 1s infinite;

  @keyframes blink {
    0% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
`,Ce=({isLoading:s})=>s?e.jsxs(Jn,{children:[e.jsx(Zn,{}),e.jsx(ea,{children:"CameraServicePlatform đang tải dữ liệu bạn chờ xíu nhé..."})]}):null,ta=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!1),[c,f]=r.useState(""),[u,d]=r.useState(1),[o,S]=r.useState(10),[P,I]=r.useState(0),T=async(A,F,p="")=>{a(!0);try{const l=await zs(A,F,p);l&&l.result?(t(l.result.items),I(l.result.totalPages)):h.error("Failed to fetch suppliers")}catch(l){console.error("Error fetching suppliers:",l),h.error("Error fetching suppliers")}finally{a(!1)}};r.useEffect(()=>{T(u,o,c)},[u,o,c]);const N=A=>{f(A),d(1)},D=async A=>{a(!0);try{await _n(A)?(h.success("Supplier deleted successfully"),T(u,o,c)):h.error("Failed to delete supplier")}catch{h.error("Error deleting supplier")}finally{a(!1)}},g=[{title:"Supplier ID",dataIndex:"supplierID",key:"supplierID"},{title:"Account ID",dataIndex:"accountID",key:"accountID"},{title:"Supplier Name",dataIndex:"supplierName",key:"supplierName"},{title:"Supplier Description",dataIndex:"supplierDescription",key:"supplierDescription"},{title:"Supplier Address",dataIndex:"supplierAddress",key:"supplierAddress"},{title:"Contact Number",dataIndex:"contactNumber",key:"contactNumber"},{title:"Supplier Logo",dataIndex:"supplierLogo",key:"supplierLogo"},{title:"Account Balance",dataIndex:"accountBalance",key:"accountBalance"},{title:"Block Reason",dataIndex:"blockReason",key:"blockReason"},{title:"Actions",key:"actions",render:(A,F)=>e.jsxs(tt,{size:"middle",children:[e.jsx(H,{type:"link",onClick:()=>handleEditSupplier(F),children:"Edit"}),e.jsx(H,{type:"link",danger:!0,onClick:()=>D(F.supplierID),children:"Delete"})]})}],w=A=>{d(A.current),S(A.pageSize)};return e.jsxs("div",{children:[e.jsx(tt,{style:{marginBottom:16},children:e.jsx(Y.Search,{placeholder:"Search suppliers",enterButton:e.jsx($e,{}),onSearch:N})}),n?e.jsx(Ce,{}):e.jsx(se,{columns:g,dataSource:s,rowKey:"supplierID",pagination:{current:u,pageSize:o,total:P*o},onChange:w})]})},hs={0:"Nam",1:"Nữ",2:"N/A"},ue=s=>sa[s]||"Others",sa={0:"Canon",1:"Nikon",2:"Sony",3:"Fujifilm",4:"Olympus",5:"Panasonic",6:"Leica",7:"Pentax",8:"Hasselblad",9:"Sigma",10:"Others"},Xe={System:0,Supplier:1,Member:2},ra=s=>{switch(s){case PolicyType.System:return"HỆ THỐNG";case PolicyType.Supplier:return"NHÀ CUNG CẤP";case PolicyType.Member:return"THÀNH VIÊN";default:return"Unknown"}},Fe=s=>na[s]||"other",na={0:"Bán",1:"Cho thuê",2:"Đã cho thuê",3:"Đã bán",4:"Sản phẩm ngừng cung cấp"},aa=({accountId:s,visible:t,onCancel:n,mainRole:a})=>{const[c,f]=r.useState(null),[u,d]=r.useState(!1);r.useEffect(()=>{(async()=>{if(s){d(!0);try{const P=await gt(s);P.isSuccess?f(P.result):h.error("Lấy dữ liệu tài khoản không thành công.")}catch{h.error("Đã xảy ra lỗi khi lấy dữ liệu tài khoản.")}d(!1)}})()},[s]);const o=()=>{if(c){const S=`
        Mã tài khoản: ${c.id}
        Họ: ${c.firstName}
        Tên: ${c.lastName}
        Email: ${c.email}
        Tên người dùng: ${c.userName}
         Số điện thoại: ${c.phoneNumber}
        Địa chỉ: ${c.address||"Chưa cung cấp địa chỉ"}
        Giới tính: ${c.gender!==void 0?c.gender===0?"Nam":"Nữ":"Không xác định"}
         Mã nhà cung cấp: ${c.supplierID||"Chưa có mã nhà cung cấp"}
        Nghề nghiệp: ${c.job||"Chưa cung cấp nghề nghiệp"}
        Sở thích: ${c.hobby||"Chưa cung cấp sở thích"}
         
                

        Đã xác minh: ${c.isVerified?"Có":"Không"}
      `;navigator.clipboard.writeText(S).then(()=>{h.success("Dữ liệu tài khoản đã được sao chép vào clipboard!")}).catch(()=>{h.error("Sao chép dữ liệu tài khoản không thành công.")})}};return e.jsx(re,{title:"Thông tin tài khoản",visible:t,onCancel:n,footer:null,centered:!0,width:800,children:u?e.jsx(te,{}):e.jsxs(C,{layout:"vertical",style:{padding:"20px"},children:[e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Mã tài khoản"}),children:e.jsx("span",{children:c==null?void 0:c.id})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Họ"}),children:e.jsx("span",{children:c==null?void 0:c.firstName})})})]}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Tên"}),children:e.jsx("span",{children:c==null?void 0:c.lastName})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Email"}),children:e.jsx("span",{children:c==null?void 0:c.email})})})]}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Tên người dùng"}),children:e.jsx("span",{children:c==null?void 0:c.userName})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Số điện thoại"}),children:e.jsx("span",{children:c==null?void 0:c.phoneNumber})})})]}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Địa chỉ"}),children:e.jsx("span",{children:(c==null?void 0:c.address)||"Chưa cung cấp địa chỉ"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Giới tính"}),children:e.jsx("span",{children:(c==null?void 0:c.gender)!==void 0?c.gender===0?"Nam":"Nữ":"Không xác định"})})})]}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Nghề nghiệp"}),children:e.jsx("span",{children:(c==null?void 0:c.job)||"Chưa cung cấp nghề nghiệp"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Sở thích"}),children:e.jsx("span",{children:(c==null?void 0:c.hobby)||"Chưa cung cấp sở thích"})})})]}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Supplier ID"}),children:e.jsx("span",{children:(c==null?void 0:c.supplierID)||"No supplier ID provided"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Đã xác minh"}),children:e.jsx("span",{style:{display:"flex",alignItems:"center"},children:c!=null&&c.isVerified?e.jsx(e.Fragment,{children:e.jsx(ke,{style:{color:"green",marginRight:8}})}):e.jsx(e.Fragment,{children:e.jsx(ut,{style:{color:"red",marginRight:8}})})})})})]}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Mặt trước của CMND/CCCD"}),children:e.jsx("img",{src:(c==null?void 0:c.frontOfCitizenIdentificationCard)||"https://placehold.co/400x200",alt:"Mặt trước của CMND",style:{width:"100%",height:"auto",marginTop:"10px",borderRadius:"5px"}})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Mặt sau của CMND/CCCD"}),children:e.jsx("img",{src:(c==null?void 0:c.backOfCitizenIdentificationCard)||"https://placehold.co/400x200",alt:"Mặt sau của CMND",style:{width:"100%",height:"auto",marginTop:"10px",borderRadius:"5px"}})})})]}),e.jsx(H,{type:"primary",onClick:o,children:"Sao chép dữ liệu tài khoản"})]})})},{Option:_e}=Z,ca=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!1),[c,f]=r.useState(1),[u,d]=r.useState(1),o=10,[S,P]=r.useState(!1),[I,T]=r.useState({name:"",email:"",phone:"",role:"",gender:"",status:""}),[N,D]=r.useState(null);r.useState(!1);const[g,w]=r.useState(!1),A=async m=>{var j;try{a(!0);const b=await Wn(m,o);b.isSuccess&&(t(((j=b.result)==null?void 0:j.items)||[]),d(b.result.totalPages||1))}catch{h.error("Đã xảy ra lỗi, vui lòng thử lại sau")}finally{a(!1)}};r.useEffect(()=>{A(c)},[c]);const F=s.filter(m=>{const j=`${m.firstName} ${m.lastName}`.toLowerCase(),b=m.isVerified?"true":"false";return j.includes(I.name.toLowerCase())&&m.email.toLowerCase().includes(I.email.toLowerCase())&&m.phoneNumber.toLowerCase().includes(I.phone.toLowerCase())&&m.mainRole.toLowerCase().includes(I.role.toLowerCase())&&(hs[m.gender]||"Không xác định").toLowerCase().includes(I.gender.toLowerCase())&&b.includes(I.status.toLowerCase())}),p=m=>{f(m)},l=()=>{T({name:"",email:"",phone:"",role:"",gender:"",status:""}),A(1)},v=m=>{D(m.id),w(!0)};return e.jsxs("div",{className:"p-6",children:[e.jsx(Ce,{isLoading:n,title:"Đang tải dữ liệu"}),e.jsx("h2",{className:"text-center font-bold text-primary text-2xl mb-6",children:"Danh Sách Người Dùng"}),e.jsx(H,{onClick:()=>P(!S),type:"primary",icon:S?e.jsx(wr,{}):e.jsx($e,{}),children:S?"Ẩn Tìm Kiếm":"Hiển Thị Tìm Kiếm"}),S&&e.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Tên:"}),e.jsx(Y,{placeholder:"Tìm theo tên...",value:I.name,onChange:m=>T({...I,name:m.target.value}),className:"border rounded-lg p-2 shadow-md"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email:"}),e.jsx(Y,{placeholder:"Tìm theo email...",value:I.email,onChange:m=>T({...I,email:m.target.value}),className:"border rounded-lg p-2 shadow-md"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Số điện thoại:"}),e.jsx(Y,{placeholder:"Tìm theo số điện thoại...",value:I.phone,onChange:m=>T({...I,phone:m.target.value}),className:"border rounded-lg p-2 shadow-md"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Quyền:"}),e.jsx(Y,{placeholder:"Tìm theo quyền...",value:I.role,onChange:m=>T({...I,role:m.target.value}),className:"border rounded-lg p-2 shadow-md"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Giới tính:"}),e.jsxs(Z,{placeholder:"Chọn giới tính",value:I.gender,onChange:m=>T({...I,gender:m}),className:"w-full",children:[e.jsx(_e,{value:"",children:"Tất cả"}),e.jsx(_e,{value:"Nam",children:"Nam"}),e.jsx(_e,{value:"Nữ",children:"Nữ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Trạng thái:"}),e.jsxs(Z,{placeholder:"Chọn trạng thái",value:I.status,onChange:m=>T({...I,status:m}),className:"w-full",children:[e.jsx(_e,{value:"",children:"Tất cả"}),e.jsx(_e,{value:"true",children:"Đã xác thực"}),e.jsx(_e,{value:"false",children:"Chưa xác thực"})]})]})]}),e.jsx(H,{onClick:l,type:"primary",danger:!0,children:"Xóa Tìm Kiếm"}),e.jsx("div",{className:"overflow-x-auto rounded-lg my-10 shadow-md",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-primary text-white",children:e.jsxs("tr",{className:"h-10",children:[e.jsx("th",{className:"text-center",children:"STT"}),e.jsx("th",{className:"text-center",children:"ID"}),e.jsx("th",{className:"text-center",children:"Tên"}),e.jsx("th",{className:"text-center",children:"Email"}),e.jsx("th",{className:"text-center",children:"Số điện thoại"}),e.jsx("th",{className:"text-center",children:"Quyền"}),e.jsx("th",{className:"text-center",children:"Trạng thái"}),e.jsx("th",{className:"text-center",children:"Giới tính"}),e.jsx("th",{className:"text-center",children:"Ngày tạo"}),e.jsx("th",{className:"text-center",children:"Ngày cập nhật"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.length>0?F.map((m,j)=>e.jsxs("tr",{className:"h-10 hover:bg-gray-100",onDoubleClick:()=>v(m),children:[e.jsx("td",{className:"text-center",children:(c-1)*o+j+1}),e.jsx("td",{className:"text-center",children:m.id}),e.jsx("td",{className:"text-center",children:`${m.firstName} ${m.lastName}`}),e.jsx("td",{className:"text-center lowercase text-wrap",children:m.email}),e.jsx("td",{className:"text-center",children:m.phoneNumber}),e.jsx("td",{className:"text-center",children:m.mainRole}),e.jsx("td",{className:"text-center",children:m.isVerified?e.jsx("i",{className:"fa-solid fa-circle-check text-green-600"}):e.jsx("i",{className:"fa-solid fa-circle-xmark text-red-600"})}),e.jsx("td",{className:"text-center",children:hs[m.gender]||"Không xác định"}),e.jsx("td",{className:"text-center",children:m.createdAt}),e.jsx("td",{className:"text-center",children:m.updatedAt})]},m.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"text-center py-4",children:"Không có dữ liệu"})})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Me,{current:c,pageSize:o,total:u*o,onChange:p})}),e.jsx(aa,{accountId:N,visible:g,onCancel:()=>w(!1)})]})},{Title:la}=ie,ia=()=>{const[s,t]=r.useState(""),[n,a]=r.useState(!1),c=async()=>{if(!s){h.error("Vui lòng nhập email của nhà cung cấp");return}a(!0),console.log("Gửi email đến:",s),await Gs(s)&&(h.success("Mã kích hoạt đã được gửi thành công!"),h.error("Gửi mã kích hoạt thất bại")),a(!1)};return e.jsxs("div",{style:{maxWidth:"400px",margin:"auto",padding:"20px"},children:[e.jsx(la,{level:3,style:{textAlign:"center"},children:"Gửi Mã Kích Hoạt"}),e.jsxs(C,{layout:"vertical",children:[e.jsxs(C.Item,{label:"Email của Nhà Cung Cấp",children:[" ",e.jsx(Y,{type:"email",placeholder:"Nhập email của nhà cung cấp",value:s,onChange:f=>t(f.target.value),disabled:n})]}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",block:!0,onClick:c,loading:n,children:"Gửi Mã Kích Hoạt"})})]})]})},oa=()=>{const s=[{key:"1",label:"Danh Sách Người Dùng",children:e.jsx(ca,{})},{key:"2",label:"Danh Sách Nhà Cung Cấp",children:e.jsx(ta,{})},{key:"3",label:"Cấp quyền hoạt động cho nhà cung cấp ",children:e.jsx(ia,{})},{key:"4",label:"Tạo tài khoản cho Staff",children:e.jsx(qs,{})}];return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center font-bold text-primary text-xl",children:"QUẢN TRỊ NGƯỜI DÙNG TẠI HỆ THỐNG CAMERA SERVICE PLATFORM"}),e.jsx(He,{defaultActiveKey:"1",items:s})]})},da=()=>e.jsx("div",{children:e.jsxs("main",{className:"p-8",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-1/2 pr-4",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Camera Services Platform"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Trong lĩnh vực nhiếp ảnh và quay phim, nhiều người gặp khó khăn trong việc thuê thiết bị chất lượng với chi phí hợp lý, trong khi nhiều chủ sở hữu máy ảnh để thiết bị đắt tiền không sử dụng."}),e.jsx("p",{className:"text-gray-700",children:"Chúng tôi cung cấp giải pháp cho thuê và mua lại máy ảnh kỹ thuật số, giúp kết nối nhu cầu và thiết bị, mang lại sự linh hoạt và tiết kiệm cho khách hàng."})]}),e.jsx("div",{className:"w-1/2",children:e.jsx("img",{src:"https://placehold.co/500x300",alt:"Person holding a camera",className:"w-full h-auto"})})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("div",{className:"bg-white shadow-md p-4 text-center w-1/4 transition duration-300 ease-in-out transform hover:scale-105 hover:bg-blue-500 hover:text-white",children:[e.jsx(es,{className:"text-2xl mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"100+"}),e.jsx("div",{className:"text-gray-500 hover:text-white",children:"Người bán trên trang web"})]}),e.jsxs("div",{className:"bg-white shadow-md p-4 text-center w-1/4 transition duration-300 ease-in-out transform hover:scale-105 hover:bg-blue-500 hover:text-white",children:[e.jsx(Dr,{className:"text-2xl mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"100+"}),e.jsx("div",{className:"text-gray-500 hover:text-white",children:"Đơn hàng hàng tháng"})]}),e.jsxs("div",{className:"bg-white shadow-md p-4 text-center w-1/4 transition duration-300 ease-in-out transform hover:scale-105 hover:bg-blue-500 hover:text-white",children:[e.jsx(es,{className:"text-2xl mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"1000+"}),e.jsx("div",{className:"text-gray-500 hover:text-white",children:"Khách hàng trên trang web"})]}),e.jsxs("div",{className:"bg-white shadow-md p-4 text-center w-1/4 transition duration-300 ease-in-out transform hover:scale-105 hover:bg-blue-500 hover:text-white",children:[e.jsx(Cr,{className:"text-2xl mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"50+"}),e.jsx("div",{className:"text-gray-500 hover:text-white",children:"Doanh số bán hàng"})]})]}),e.jsx("div",{className:"flex justify-between mt-8",children:["Tom Cruise","Emma Watson","Will Smith"].map((s,t)=>e.jsxs("div",{className:"text-center w-1/3",children:[e.jsx("img",{src:"https://placehold.co/150x150",alt:s,className:"w-32 h-32 rounded-full mx-auto mb-4"}),e.jsx("div",{className:"text-xl font-bold",children:s}),e.jsx("div",{className:"text-gray-500 mb-2",children:s==="Duong Hoang Anh"?"Người sáng lập & CEO":s==="Tran Quoc Anh"?"Giám đốc điều hành":"Nhà thiết kế sản phẩm"}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(Pr,{}),e.jsx(kr,{}),e.jsx(Tr,{})]})]},t))}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("div",{className:"text-center w-1/3 flex flex-col items-center",children:[e.jsx(Mr,{className:"text-4xl mb-2"}),e.jsx("div",{className:"text-xl font-bold",children:"Giao dịch nhanh chóng"})]}),e.jsxs("div",{className:"text-center w-1/3 flex flex-col items-center",children:[e.jsx(Vr,{className:"text-4xl mb-2"}),e.jsx("div",{className:"text-xl font-bold",children:"Dịch vụ khách hàng 24/7"})]}),e.jsxs("div",{className:"text-center w-1/3 flex flex-col items-center",children:[e.jsx(Ar,{className:"text-4xl mb-2"}),e.jsx("div",{className:"text-xl font-bold",children:"Minh bạch về các điều khoản"})]})]})]})}),Wt=async(s,t,n)=>{try{return(await G.get(`/orderDetail/get-order-details/${s}?pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error fetching order details:",a),null}},Ks=async s=>{try{return(await G.post("/order/create-order-buy-with-payment",s)).data}catch(t){return console.error("Error creating order with payment:",t),null}},jt=async(s,t,n)=>{try{return(await G.get(`/order/get-order-of-account?AccountID=${s}&pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error fetching orders by account:",a),null}},Ws=async(s,t)=>{try{return(await G.get(`/order/get-all-order?pageIndex=${s}&pageSize=${t}`)).data}catch(n){return console.error("Error fetching all orders:",n),null}},Us=async(s,t,n)=>{try{return(await G.get(`/order/get-order-of-supplierId?SupplierId=${s}&pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error fetching orders of supplier:",a),null}},ha=async s=>{var t;try{return(await G.put(`/order/update-order-status-Shipped/${s}`,{headers:{accept:"text/plain"}})).data}catch(n){return console.error("Error updating order status to Shipped:",n),((t=n.response)==null?void 0:t.data)||{isSuccess:!1,messages:["Error updating order status"]}}},Qs=async s=>{var t;try{return(await G.post(`/order/purchase-order/${s}`,"")).data}catch(n){return console.error("Error purchasing order:",n),((t=n.response)==null?void 0:t.data)||{isSuccess:!1,messages:["Error purchasing order"]}}},ua=async s=>{var t;try{return(await G.put(`/order/accept-cancel-order/${s}`,{},{headers:{accept:"text/plain"}})).data}catch(n){return console.error("Error accepting order cancellation:",n),((t=n.response)==null?void 0:t.data)||{isSuccess:!1,messages:["Error accepting order cancellation"]}}},pa=async s=>{try{return(await G.post("/order/create-order-rent-with-payment",s)).data}catch(t){return console.error("Error creating rental order with payment:",t),null}},us=async s=>{var t;try{return(await G.put(`/order/update-order-status-placed/${s}`,{},{headers:{accept:"text/plain"}})).data}catch(n){return console.error("Error updating order status to placed:",n),((t=n.response)==null?void 0:t.data)||{isSuccess:!1,messages:["Error updating order status to placed"]}}},ma=async s=>{try{return(await G.put(`/order/update-order-status-pending-refund/${s}`)).data}catch(t){throw console.error("Error updating order status to pending refund:",t),t}},ga=async s=>{var t;try{return(await G.put(`/order/update-order-status-Approved/${s}`,{},{headers:{accept:"text/plain"}})).data}catch(n){return console.error("Error updating order status to Approved:",n),((t=n.response)==null?void 0:t.data)||{isSuccess:!1,messages:["Error updating order status"]}}},Xs=async s=>{try{return(await G.put(`/order/cancel-order/${s}`,{})).data}catch(t){return console.error("Error canceling order:",t),null}},xa=async s=>{try{return(await G.put(`/order/update-order-status-completed/${s}`,{})).data}catch(t){return console.error("Error updating order status:",t),null}},fa=async(s,t)=>{var a;const n=new FormData;n.append("OrderID",s),n.append("Img",t);try{return(await G.post("/order/add-img-product-after",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(c){return console.error("Error adding image to product after:",c),((a=c.response)==null?void 0:a.data)||{isSuccess:!1,messages:["Error adding image to product after"]}}},ya=async(s,t)=>{var a;const n=new FormData;n.append("OrderID",s),n.append("Img",t);try{return(await G.post("/order/add-img-product-before",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(c){return console.error("Error adding image to product before:",c),((a=c.response)==null?void 0:a.data)||{isSuccess:!1,messages:["Error adding image to product before"]}}},ja=ws({name:"cart",initialState:[],reducers:{addToCart:(s,t)=>{const n=s.findIndex(a=>a.id===t.payload.id);n>=0?s[n].quantity+=1:s.push({...t.payload,quantity:1})},increaseQuantity:(s,t)=>{const n=s.findIndex(a=>a.id===t.payload);n>=0&&(s[n].quantity+=1)},decreaseQuantity:(s,t)=>{const n=s.findIndex(a=>a.id===t.payload);n>=0&&(s[n].quantity-=1,s[n].quantity<=0&&s.splice(n,1))},removeFromCart:(s,t)=>{const n=s.findIndex(a=>a.id===t.payload);n>=0&&s.splice(n,1)},resetCart:s=>[]}}),{addToCart:zi,increaseQuantity:ba,decreaseQuantity:Na,removeFromCart:Sa,resetCart:Ia}=ja.actions,va=()=>{const s=X(d=>{var o;return((o=d.cart)==null?void 0:o.items)||[]}),t=X(d=>d.user.user||{}),[n,a]=r.useState(!1),c=ft(),f=s.reduce((d,o)=>d+o.price*o.quantity,0),u=async()=>{a(!0);const d={seatRank:s.map(o=>({id:o.id,quantity:o.quantity})),accountId:t==null?void 0:t.id,content:"Đặt vé "};console.log(d);try{const o=await Ks(d);a(!1),o.isSuccess?(h.success("Đặt vé thành công"),c(Ia()),window.location.href=o.result):o.messages.forEach(S=>{h.error(S)})}catch(o){a(!1),console.error("Error during checkout:",o),h.error("Failed to process payment. Please try again.")}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx(Ce,{isLoading:n,title:"Hệ thống đang xử lý đơn hàng"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Giỏ hàng"}),s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white shadow-lg rounded-lg divide-y divide-gray-200",children:s.map(d=>{var o;return e.jsxs("div",{className:"p-6 flex items-center justify-between w-full",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex ",children:[e.jsx("strong",{className:"text-lg mr-2",children:"Event:"}),e.jsx("h3",{className:"text-lg text-gray-900",children:(o=d.event)==null?void 0:o.title})]}),e.jsxs("div",{className:"flex ",children:[e.jsx("strong",{className:"text-lg mr-2",children:"Hạng vé:"}),e.jsx("h3",{className:"text-lg text-gray-900",children:d.name})]}),e.jsxs("p",{className:"text-gray-500",children:["Giá: ",ze(d.price)]}),e.jsxs("p",{className:"text-gray-500",children:["Thời gian mở bán: ",Ke(d.startTime)]}),e.jsxs("p",{className:"text-gray-500",children:["Thời gian kết thúc: ",Ke(d.endTime)]})]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg",children:[e.jsx("button",{onClick:()=>c(Na(d.id)),className:"px-3 py-2 text-gray-600 hover:text-gray-800 focus:outline-none",children:"-"}),e.jsx("span",{className:"px-4 py-2 text-gray-800",children:d.quantity}),e.jsx("button",{onClick:()=>c(ba(d.id)),className:"px-3 py-2 text-gray-600 hover:text-gray-800 focus:outline-none",children:"+"})]}),e.jsx("button",{onClick:()=>c(Sa(d.id)),className:"ml-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 focus:outline-none",children:"Xoá"})]})]},d.id)})}),e.jsxs("div",{className:"mt-8 bg-white shadow-lg rounded-lg p-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Tổng tiền"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:ze(f)})]}),Os(t)?e.jsx("p",{className:"text-red-600 text-xl mt-4 text-center",children:"Vui lòng đăng nhập để thanh toán"}):e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:u,className:"mt-8 px-8 py-3 bg-primary text-white rounded-lg hover:bg-blue-600 focus:outline-none",children:"Thanh toán ngay"})})]}):e.jsx("p",{className:"text-gray-500",children:"Giỏ hàng chưa có sản phẩm nào."})]})},ot=async(s,t)=>{try{return(await G.get("/category/get-all-category",{params:{pageIndex:s,pageSize:t}})).data}catch(n){throw console.error("Error fetching categories:",n),n}},Te=async s=>{try{return(await G.get("/category/get-category-by-id",{params:{id:s}})).data}catch(t){return console.error(`Failed to fetch category with ID ${s}:`,t),{isSuccess:!1,messages:[`Failed to fetch category by ID: ${s}`]}}},wa=async(s,t=1,n=100)=>{try{return(await G.get("/category/get-category-by-name",{params:{filter:s,pageIndex:t,pageSize:n}})).data}catch(a){return console.error(`Failed to search categories with filter "${s}":`,a),{isSuccess:!1,messages:[`Failed to search categories by name: ${s}`]}}},Da=async(s,t)=>{try{return(await G.post("/category/create-category",{categoryName:s,categoryDescription:t})).data}catch(n){return console.error("Failed to create category:",n),{isSuccess:!1,messages:["Failed to create category"]}}},Ca=async(s,t,n)=>{try{return(await G.put("/category/update-category",{categoryID:s,categoryName:t,categoryDescription:n})).data}catch(a){return console.error(`Failed to update category with ID ${s}:`,a),{isSuccess:!1,messages:[`Failed to update category with ID: ${s}`]}}},Pa=async s=>{try{return(await G.delete("/category/delete-category",{params:{CategoryId:s}})).data}catch(t){return console.error(`Failed to delete category with ID ${s}:`,t),{isSuccess:!1,messages:[`Failed to delete category with ID: ${s}`]}}},Ut=s=>{let t="An unexpected error occurred.";return s.response?t=s.response.data.message||s.response.statusText:s.request?t="No response received from the server.":t=s.message,console.error("API Error:",t),t},Ee=async(s,t)=>{try{const n=await G.get(`/product/get-all-product?pageIndex=${s}&pageSize=${t}`);return n.status===200&&n.data?n.data.result:[]}catch(n){return console.error("Error fetching products:",n),null}},ka=async s=>{const t=new FormData;t.append("SerialNumber",s.SerialNumber),t.append("SupplierID",s.SupplierID),t.append("CategoryID",s.CategoryID),t.append("ProductName",s.ProductName),t.append("ProductDescription",s.ProductDescription),t.append("Quality",s.Quality),t.append("PriceRent",s.PriceRent),t.append("PriceBuy",s.PriceBuy),t.append("Brand",s.Brand),t.append("Status",s.Status),t.append("File",s.File),s.listProductSpecification.forEach((n,a)=>{t.append(`listProductSpecification[${a}]`,n)});try{return(await G.post("/product/create-product-buy",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error creating product for buy:",n.response?n.response.data:n.message),n}},Ta=async s=>{const t=new FormData;t.append("SerialNumber",s.SerialNumber),t.append("SupplierID",s.SupplierID),t.append("CategoryID",s.CategoryID),t.append("ProductName",s.ProductName),t.append("ProductDescription",s.ProductDescription),t.append("Quality",s.Quality),t.append("DepositProduct",s.DepositProduct),t.append("PricePerHour",s.PricePerHour),t.append("PricePerDay",s.PricePerDay),t.append("PricePerWeek",s.PricePerWeek),t.append("PricePerMonth",s.PricePerMonth),t.append("Brand",s.Brand),t.append("File",s.File),s.listProductSpecification.forEach((n,a)=>{t.append(`listProductSpecification[${a}]`,n)});try{return(await G.post("/product/create-product-rent",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw console.error("Error creating product for rent:",n.response?n.response.data:n.message),n}},ge=async(s,t=1,n=10)=>{try{const a=await G.get("/product/get-product-by-id",{params:{id:s,pageIndex:t,pageSize:n}});if(a.data&&a.data.isSuccess)return a.data.result;throw new Error("Product not found")}catch(a){const c=Ut(a);throw new Error(c)}},bt=async(s,t,n)=>{try{const a=await G.get(`/product/get-product-by-supplierId?filter=${s}&pageIndex=${t}&pageSize=${n}`);return a.status===200&&a.data&&a.data.isSuccess?a.data.result:null}catch(a){return console.error("Error fetching products by supplier ID:",a),null}},Nt=async(s,t=1,n=20)=>{try{const a=await G.get("/product/get-product-by-name",{params:{filter:s,pageIndex:t,pageSize:n}});return a.status===200&&a.data&&a.data.isSuccess?a.data.result:null}catch(a){return console.error("Error fetching products by name:",a),null}},Ma=async(s,t,n)=>{try{const a=await G.get(`/product/get-product-by-category-id?filter=${s}&pageIndex=${t}&pageSize=${n}`);return a.status===200&&a.data&&a.data.isSuccess?a.data.result:null}catch(a){return console.error("Error fetching products by category ID:",a),null}},Va=async s=>{try{const t=await G.put("product/update-product",s,{headers:{accept:"text/plain","Content-Type":"multipart/form-data"}});return t.status===200&&t.data.isSuccess?t.data.result:(console.error("Failed to update product:",t.data.messages),null)}catch(t){throw console.error("Error updating product:",t),t}},Aa=async s=>{try{if(!s)return console.error("Product ID is required to delete a product."),!1;const t=await G.delete("/product/delete-product",{params:{productId:s}});return t.status===200?(console.log("Product deleted successfully."),!0):(console.error("Failed to delete product:",t.data.messages),!1)}catch(t){return console.error("Error deleting product:",t),!1}},Fa=async s=>{try{const t=await G.put("/product/update-product-rent",s,{});return t.status===200&&t.data.isSuccess?t.data.result:(console.error("Failed to update product for rent:",t.data.messages),null)}catch(t){throw console.error("Error updating product for rent:",t),t}},Tt=async(s,t,n)=>{if(!s)return console.error("accountId is required"),null;try{const a=await G.get(`/product/proposal-product-follow-job-buy?accountId=${s}&pageIndex=${t}&pageSize=${n}`);return a.status===200&&a.data?a.data.result:[]}catch(a){return console.error("Error fetching products following job buy:",a),Ut(a),null}},Mt=async(s,t,n)=>{if(!s)return console.error("accountId is required"),null;try{const a=await G.get(`/product/proposal-product-follow-hobby?accountId=${s}&pageIndex=${t}&pageSize=${n}`);return a.status===200&&a.data?a.data.result:[]}catch(a){return console.error("Error fetching products following hobby:",a),Ut(a),null}},{Title:ps,Text:Ae}=ie,La=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(null),[c,f]=r.useState([]),[u,d]=r.useState(1),[o]=r.useState(10),[S,P]=r.useState(!1),[I,T]=r.useState(!1);r.useEffect(()=>{(async()=>{P(!0);const w=await ot(u,o);w&&w.isSuccess&&t(w.result||[]),P(!1)})()},[u,o]);const N=async g=>{a(g),T(!0);const w=await Ma(g,u,o);f(w||[]),T(!1)},D=g=>{switch(g){case 0:return"success";case 1:return"processing";case 2:return"warning";case 3:return"error";case 4:return"default";default:return"default"}};return e.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[e.jsx(ps,{level:2,className:"text-center mb-4",children:"Danh mục"}),e.jsx(te,{spinning:S,children:e.jsx(Ze,{grid:{gutter:16,column:4},dataSource:s,renderItem:g=>e.jsx(Ze.Item,{children:e.jsx(H,{type:"primary",onClick:()=>N(g.categoryID),className:"w-full",children:g.categoryName})},g.categoryID)})}),n&&e.jsx("div",{className:"mt-4",children:e.jsx(te,{spinning:I,children:e.jsx(Ze,{loading:I,grid:{gutter:16,column:2},dataSource:c,renderItem:g=>{var w,A;return e.jsx(Ze.Item,{children:e.jsx(Q,{title:e.jsx(ps,{level:4,style:{marginBottom:0},children:g.productName}),hoverable:!0,className:"shadow-md rounded-md overflow-hidden",cover:e.jsx("img",{alt:g.productName,src:((w=g.listImage[0])==null?void 0:w.image)||"https://via.placeholder.com/300",style:{height:"200px",objectFit:"cover",borderRadius:"8px 8px 0 0"}}),children:e.jsxs("div",{children:[e.jsx(Ae,{type:"secondary",style:{display:"block",marginBottom:"8px"},children:g.productDescription}),e.jsx(Ps,{}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx(Ae,{strong:!0,children:"Số serial:"})," ",g.serialNumber]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx(Ae,{strong:!0,children:"Trạng thái:"}),e.jsx(Fr,{status:D(g.status),text:g.status===0?"Còn hàng":g.status===1?"Cho thuê":g.status===2?"Đã thuê":g.status===3?"Đã bán":"Ngừng kinh doanh"})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx(Ae,{strong:!0,children:"Giá:"})," ",g.priceBuy?`${g.priceBuy.toLocaleString()} VND`:"Không có sẵn"]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx(Ae,{strong:!0,children:"Chất lượng:"}),e.jsx(me,{color:g.quality==="moi"?"green":"orange",children:g.quality})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx(Ae,{strong:!0,children:"Đánh giá:"}),e.jsx(Ot,{disabled:!0,value:g.rating})]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx(Ae,{strong:!0,children:"Ngày tạo:"})," ",new Date(g.createdAt).toLocaleDateString()]}),((A=g.listProductSpecification)==null?void 0:A.length)>0&&e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx(Ae,{strong:!0,style:{fontSize:"16px",display:"block",marginBottom:"8px"},children:"Thông số kỹ thuật:"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px 16px",alignItems:"center",background:"#f9f9f9",padding:"12px",borderRadius:"8px"},children:g.listProductSpecification.map(F=>e.jsxs(ks.Fragment,{children:[e.jsx(Ae,{style:{fontWeight:"500",color:"#595959"},children:F.specification}),e.jsx(Ae,{children:F.details})]},F.productSpecificationID))})]})]})})})},bordered:!0})})})]})},Ea=s=>{console.log("Form values: ",s)},$a=()=>e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"text-gray-500 mb-4",children:[e.jsx("span",{children:"Trang chủ"})," / ",e.jsx("span",{children:"Liên hệ"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-1/3",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("i",{className:"fas fa-phone-alt text-red-500 text-2xl mr-4"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Liên hệ qua số điện thoại"}),e.jsx("p",{children:"Chúng tôi luôn sẵn sàng 24/7, 7 ngày một tuần."}),e.jsx("p",{className:"mt-2",children:"Số điện thoại: +8801611112222"})]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-envelope text-red-500 text-2xl mr-4"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Gửi email về chúng tôi"}),e.jsx("p",{children:"Điền vào biểu mẫu của chúng tôi và chúng tôi sẽ liên hệ với bạn trong vòng 24 giờ."}),e.jsx("p",{className:"mt-2",children:"Emails: customer@exclusive.com"}),e.jsx("p",{children:"Emails: support@exclusive.com"})]})]})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md w-2/3",children:e.jsxs(C,{name:"contactForm",layout:"vertical",onFinish:Ea,autoComplete:"off",children:[e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsx(C.Item,{name:"name",label:"Tên",rules:[{required:!0,message:"Vui lòng nhập tên của bạn!"}],className:"w-1/3",children:e.jsx(Y,{placeholder:"Tên"})}),e.jsx(C.Item,{name:"email",label:"Email *",rules:[{required:!0,message:"Vui lòng nhập email của bạn!"},{type:"email",message:"Email không hợp lệ!"}],className:"w-1/3",children:e.jsx(Y,{placeholder:"Email *"})}),e.jsx(C.Item,{name:"phone",label:"Số điện thoại *",rules:[{required:!0,message:"Vui lòng nhập số điện thoại của bạn!"}],className:"w-1/3",children:e.jsx(Y,{placeholder:"Số điện thoại *"})})]}),e.jsx(C.Item,{name:"message",label:"Lời nhắn",rules:[{required:!0,message:"Vui lòng nhập lời nhắn của bạn!"}],children:e.jsx(Y.TextArea,{placeholder:"Lời nhắn",rows:4})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",className:"bg-red-500 text-white px-4 py-2 rounded",children:"Gửi"})})]})})]})]}),Ra=()=>e.jsx("div",{children:e.jsxs("div",{className:"hero min-h-screen",style:{backgroundImage:"url(https://storage.googleapis.com/pai-images/15b6c469f0ff478bbaf430923923b35a.jpeg)"},children:[e.jsx("div",{className:"hero-overlay bg-opacity-60"}),e.jsx("div",{className:"hero-content text-center text-neutral-content",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h1",{className:"mb-5 text-9xl font-bold",children:"404"}),e.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Trang này không tồn tại"}),e.jsx("p",{className:"mb-5",children:"Trang này không tồn tại hoặc không có sẵn. Vui lòng kiểm tra xem địa chỉ đã chính xác không"}),e.jsx(qe,{to:"/",className:"text-white  w-full mt-2 bg-primary hover:bg-primary  font-medium rounded-lg text-md px-5 py-3.5 text-center mr-2 mb-2",children:"Trở về trang chủ"})]})})]})}),_s=async s=>{try{return(await G.post("/wishlist/create-wishlist",s)).data}catch(t){return console.error("Error creating wishlist:",t),null}},Ha=async s=>{try{return(await G.delete(`/wishlist/delete-wish-list-detail-by-id?wishlistId=${s}`)).data}catch(t){return console.error("Error deleting wishlist item:",t),null}},Oa=async(s,t=1,n=10)=>{try{return(await G.get(`/wishlist/get-wish-list-by-member-id?AccountID=${s}&pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error fetching wishlist by member ID:",a),null}},{Header:Ba,Content:Ya}=De,{Title:Ga}=ie,{Search:qa}=Y,za=()=>{var x;const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(null),[u,d]=r.useState(!1),[o,S]=r.useState(""),[P,I]=r.useState(1),T=4,N=P*T,D=N-T,g=s.slice(D,N),w=s.length,[A,F]=r.useState(""),[p,l]=r.useState(""),[v,m]=r.useState([]),b=X(y=>y.user.user||{}).id;r.useEffect(()=>{(async()=>{a(!0);try{const K=(await Ee(1,100)).sort((W,R)=>new Date(R.createdAt)-new Date(W.createdAt));t(K)}catch{h.error("Có lỗi xảy ra khi tải danh sách sản phẩm.")}finally{a(!1)}})()},[]);const i=async y=>{var E;a(!0);try{const K=await ge(y);if(K){f(K);const W=await be(K.supplierID,1,1),R=await Te(K.categoryID);((E=W==null?void 0:W.result)==null?void 0:E.items.length)>0&&F(W.result.items[0].supplierName),R!=null&&R.isSuccess?l(R.result.categoryName):l("Không xác định")}}catch{h.error("Có lỗi xảy ra khi tải chi tiết sản phẩm.")}finally{a(!1),d(!0)}},L=y=>{i(y)},k=()=>{d(!1),f(null),F(""),l("")},B=async y=>{S(y),a(!0);try{const W=(await Ee(1,100)).filter(R=>R.productName.toLowerCase().includes(y.toLowerCase())).sort((R,M)=>new Date(M.createdAt)-new Date(R.createdAt));t(W),I(1)}catch(E){console.error("Error fetching products:",E),h.error("Có lỗi xảy ra khi tìm kiếm sản phẩm."),t([])}a(!1)},q=()=>{S(""),a(!0),(async()=>{try{const K=(await Ee(1,100)).sort((W,R)=>new Date(R.createdAt)-new Date(W.createdAt));t(K)}catch{h.error("Có lỗi xảy ra khi tải danh sách sản phẩm.")}finally{a(!1)}})()},V=async y=>{try{const E={accountId:b,productID:y.productID};await _s(E)?(h.success("Product added to wishlist!"),m([...v,y.productID])):h.error("Failed to add product to wishlist.")}catch(E){console.error("Error adding product to wishlist:",E),h.error("Failed to add product to wishlist.")}};return e.jsxs(De,{children:[e.jsx(Ce,{isLoading:n}),e.jsx(Ba,{style:{backgroundImage:'url("/path/to/your/image.jpg")',backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:e.jsx(Ga,{level:2,style:{color:"white",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},children:"Danh Sách Sản Phẩm"})}),e.jsxs(Ya,{style:{padding:"20px"},children:[e.jsx(Lr,{autoplay:!0,style:{marginBottom:"20px"}}),e.jsxs("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"center"},children:[e.jsx(qa,{placeholder:"Tìm kiếm sản phẩm theo tên",enterButton:"Tìm kiếm",size:"large",value:o,onChange:y=>S(y.target.value),onSearch:B,style:{width:300,marginRight:20}}),e.jsx(H,{onClick:q,style:{marginLeft:20},children:"Xóa Tìm Kiếm"})]}),!n&&g.length>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{gutter:[16,16],children:g.map(y=>e.jsx(U,{span:6,children:e.jsx(Q,{hoverable:!0,cover:y.listImage.length>0&&e.jsx("img",{alt:y.productName,src:y.listImage[0].image,style:{height:200,objectFit:"cover",borderRadius:"8px 8px 0 0"},loading:"lazy"}),onDoubleClick:()=>L(y.productID),style:{marginBottom:"20px",height:"100%",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s"},bodyStyle:{padding:"16px"},onMouseEnter:E=>E.currentTarget.style.transform="scale(1.05)",onMouseLeave:E=>E.currentTarget.style.transform="scale(1)",children:e.jsx(Q.Meta,{title:e.jsxs("div",{className:"flex justify-between items-center",children:[y.productName,e.jsx("button",{onClick:()=>V(y),className:"focus:outline-none",children:v.includes(y.productID)?e.jsx(Ft,{size:24,className:"text-red-500"}):e.jsx(Lt,{size:24,className:"text-gray-500"})})]}),description:e.jsxs("div",{children:[e.jsx("p",{children:y.productDescription}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial Number:"}),e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:y.serialNumber})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created At:"}),e.jsx("span",{style:{color:"blue"},children:je(y.createdAt).format("DD/MM/YYYY HH:mm")})]}),y.priceRent!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/giờ:"}),e.jsxs("span",{style:{color:"blue"},children:["VND",y.priceRent]})]}),y.priceBuy!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Mua):"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",y.priceBuy]})]}),y.pricePerHour!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/giờ:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",y.pricePerHour]})]}),y.pricePerDay!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/ngày:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",y.pricePerDay]})]}),y.pricePerWeek!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/tuần:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",y.pricePerWeek]})]}),y.pricePerMonth!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/tháng:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",y.pricePerMonth]})]}),y.depositProduct!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá cọc:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",y.depositProduct]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Đánh giá:"}),Array.from({length:5},(E,K)=>e.jsx("span",{style:{color:K<y.rating?"yellow":"lightgray",fontSize:"20px"},children:K<y.rating?"★":"☆"},K))]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Thương hiệu:"}),ue(y.brand)||"Không xác định"]}),e.jsxs(me,{color:"blue",children:[e.jsx("strong",{children:"Chất lượng:"})," ",y.quality]})]})})})},y.productID))}),e.jsx(Me,{current:P,pageSize:T,total:w,onChange:y=>I(y),style:{marginTop:"20px",textAlign:"center"}})]}):!n&&e.jsx("p",{children:"Không tìm thấy sản phẩm nào."})]}),e.jsx(re,{title:(c==null?void 0:c.productName)||"Chi tiết sản phẩm",visible:u,onCancel:k,footer:[e.jsx(H,{onClick:k,children:"Đóng"},"close"),e.jsx(H,{onClick:()=>V(c),className:"focus:outline-none",children:v.includes(c==null?void 0:c.productID)?e.jsx(Ft,{size:24,className:"text-red-500"}):e.jsx(Lt,{size:24,className:"text-gray-500"})},"wishlist")],bodyStyle:{padding:"20px",borderRadius:"8px"},centered:!0,children:c?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("img",{src:(x=c.listImage[0])==null?void 0:x.image,alt:c.productName,style:{width:"100%",height:"auto",marginBottom:"20px",borderRadius:"8px"},loading:"lazy"}),e.jsxs($,{bordered:!0,column:1,layout:"horizontal",style:{width:"100%"},children:[e.jsx($.Item,{label:"Serial Number",children:e.jsx("span",{style:{color:"blue"},children:c.serialNumber})}),e.jsx($.Item,{label:"Mô tả",children:c.productDescription}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," Cọc sản phẩm"]}),children:c.depositProduct}),c.priceRent!=null&&e.jsx($.Item,{label:"Giá (Thuê)",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.priceRent]})}),c.priceBuy!=null&&e.jsx($.Item,{label:"Giá (Mua)",children:e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",c.priceBuy]})}),c.pricePerHour!=null&&e.jsx($.Item,{label:"Giá (Thuê)/giờ",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerHour]})}),c.pricePerDay!=null&&e.jsx($.Item,{label:"Giá (Thuê)/ngày",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerDay]})}),c.pricePerWeek!=null&&e.jsx($.Item,{label:"Giá (Thuê)/tuần",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerWeek]})}),c.pricePerMonth!=null&&e.jsx($.Item,{label:"Giá (Thuê)/tháng",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerMonth]})}),e.jsx($.Item,{label:"Nhà cung cấp",children:A||"Không xác định"}),e.jsx($.Item,{label:"Danh mục",children:p||"Không xác định"}),e.jsx($.Item,{label:"Thương hiệu",children:ue(c.brand)||"Không xác định"}),e.jsx($.Item,{label:"Chất lượng",children:e.jsxs(me,{color:"blue",children:[e.jsx("strong",{children:"Chất lượng:"})," ",c.quality]})}),e.jsx($.Item,{label:"Specifications",span:2,children:e.jsx("ul",{style:{paddingLeft:"20px"},children:c.listProductSpecification.map(y=>e.jsxs("li",{children:[y.specification,": ",y.details]},y.productSpecificationID))})})]})]}):e.jsx("p",{children:"Đang tải chi tiết sản phẩm..."})})]})},{Header:Ka,Content:Wa}=De,{Title:Ua}=ie,{Search:Qa}=Y,Xa=()=>{var b;const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(null),[u,d]=r.useState(!1),[o,S]=r.useState(""),[P,I]=r.useState(1),T=4,D=X(i=>i.user.user||{}).id;console.log(D),r.useEffect(()=>{(async()=>{a(!0);try{const L=await Mt(D,1,100);t(L||[])}catch{h.error("Có lỗi xảy ra khi tải danh sách sản phẩm.")}finally{a(!1)}})()},[D]);const g=async i=>{a(!0);try{const L=await ge(i);L&&f(L)}catch{h.error("Có lỗi xảy ra khi tải chi tiết sản phẩm.")}finally{a(!1),d(!0)}},w=i=>{g(i)},A=()=>{d(!1),f(null)},F=async i=>{S(i),a(!0);try{const k=(await Mt(D,1,100)).filter(B=>B.productName.toLowerCase().includes(i.toLowerCase()));t(k),I(1)}catch(L){console.error("Error fetching products:",L),h.error("Có lỗi xảy ra khi tìm kiếm sản phẩm."),t([])}a(!1)},p=()=>{S(""),a(!0),(async()=>{try{const L=await Mt(D,1,100);t(L||[])}catch{h.error("Có lỗi xảy ra khi tải danh sách sản phẩm.")}finally{a(!1)}})()},l=P*T,v=l-T,m=s.slice(v,l),j=s.length;return e.jsxs(De,{children:[e.jsx(Ce,{isLoading:n}),e.jsx(Ka,{style:{backgroundImage:'url("/path/to/your/image.jpg")',backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:e.jsx(Ua,{level:2,style:{color:"white",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},children:"Đề Xuất Sản Phẩm Theo Sở Thích"})}),e.jsxs(Wa,{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"center"},children:[e.jsx(Qa,{placeholder:"Tìm kiếm sản phẩm theo tên",enterButton:"Tìm kiếm",size:"large",value:o,onChange:i=>S(i.target.value),onSearch:F,style:{width:300,marginRight:20}}),e.jsx(H,{onClick:p,style:{marginLeft:20},children:"Xóa Tìm Kiếm"})]}),!n&&m.length>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{gutter:[16,16],children:m.map(i=>e.jsx(U,{span:6,children:e.jsx(Q,{hoverable:!0,cover:i.listImage.length>0&&e.jsx("img",{alt:i.productName,src:i.listImage[0].image,style:{height:200,objectFit:"cover",borderRadius:"8px 8px 0 0"},loading:"lazy"}),onDoubleClick:()=>w(i.productID),style:{marginBottom:"20px",height:"100%",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s"},bodyStyle:{padding:"16px"},onMouseEnter:L=>L.currentTarget.style.transform="scale(1.05)",onMouseLeave:L=>L.currentTarget.style.transform="scale(1)",children:e.jsx(Q.Meta,{title:i.productName,description:e.jsxs("div",{children:[e.jsx("p",{children:i.productDescription}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial Number:"}),e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:i.serialNumber})]}),i.priceRent!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/giờ:"}),e.jsxs("span",{style:{color:"blue"},children:["VND",i.priceRent]})]}),i.priceBuy!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Mua):"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.priceBuy]})]}),i.pricePerHour!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/giờ:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerHour]})]}),i.pricePerDay!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/ngày:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerDay]})]}),i.pricePerWeek!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/tuần:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerWeek]})]}),i.pricePerMonth!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/tháng:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerMonth]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Đánh giá:"}),Array.from({length:5},(L,k)=>e.jsx("span",{style:{color:k<i.rating?"yellow":"lightgray",fontSize:"20px"},children:k<i.rating?"★":"☆"},k))]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Thương hiệu:"}),ue(i.brand)||"Không xác định"]}),e.jsxs(me,{color:"blue",children:[e.jsx("strong",{children:"Chất lượng:"})," ",i.quality]})]})})})},i.productID))}),e.jsx(Me,{current:P,pageSize:T,total:j,onChange:i=>I(i),style:{marginTop:"20px",textAlign:"center"}})]}):!n&&e.jsx("p",{children:"Không tìm thấy sản phẩm nào."})]}),e.jsx(re,{title:(c==null?void 0:c.productName)||"Chi tiết sản phẩm",visible:u,onCancel:A,footer:[e.jsx(H,{onClick:A,children:"Đóng"},"close")],bodyStyle:{padding:"20px",borderRadius:"8px"},centered:!0,children:c?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("img",{src:(b=c.listImage[0])==null?void 0:b.image,alt:c.productName,style:{width:"100%",height:"auto",marginBottom:"20px",borderRadius:"8px"},loading:"lazy"}),e.jsxs($,{bordered:!0,column:1,layout:"vertical",style:{width:"100%"},children:[e.jsx($.Item,{label:"Serial Number",children:e.jsx("span",{style:{color:"blue"},children:c.serialNumber})}),e.jsx($.Item,{label:"Mô tả",children:c.productDescription}),c.priceRent!=null&&e.jsx($.Item,{label:"Giá (Thuê)",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.priceRent]})}),c.priceBuy!=null&&e.jsx($.Item,{label:"Giá (Mua)",children:e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",c.priceBuy]})}),c.pricePerHour!=null&&e.jsx($.Item,{label:"Giá (Thuê)/giờ",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerHour]})}),c.pricePerDay!=null&&e.jsx($.Item,{label:"Giá (Thuê)/ngày",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerDay]})}),c.pricePerWeek!=null&&e.jsx($.Item,{label:"Giá (Thuê)/tuần",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerWeek]})}),c.pricePerMonth!=null&&e.jsx($.Item,{label:"Giá (Thuê)/tháng",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerMonth]})}),e.jsx($.Item,{label:"Chất lượng",children:e.jsxs(me,{color:"blue",children:[e.jsx("strong",{children:"Chất lượng:"})," ",c.quality]})}),e.jsx($.Item,{label:"Specifications",children:e.jsx("ul",{style:{paddingLeft:"20px"},children:c.listProductSpecification.map(i=>e.jsxs("li",{children:[i.specification,": ",i.details]},i.productSpecificationID))})})]})]}):e.jsx("p",{children:"Đang tải chi tiết sản phẩm..."})})]})},{Header:_a,Content:Ja}=De,{Title:Za}=ie,{Search:ec}=Y,tc=()=>{var b;const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(null),[u,d]=r.useState(!1),[o,S]=r.useState(""),[P,I]=r.useState(1),T=4,D=X(i=>i.user.user||{}).id;console.log(D),r.useEffect(()=>{(async()=>{a(!0);try{const L=await Tt(D,1,100);t(L||[])}catch{h.error("Có lỗi xảy ra khi tải danh sách sản phẩm.")}finally{a(!1)}})()},[D]);const g=async i=>{a(!0);try{const L=await ge(i);L&&f(L)}catch{h.error("Có lỗi xảy ra khi tải chi tiết sản phẩm.")}finally{a(!1),d(!0)}},w=i=>{g(i)},A=()=>{d(!1),f(null)},F=async i=>{S(i),a(!0);try{const k=(await Tt(D,1,100)).filter(B=>B.productName.toLowerCase().includes(i.toLowerCase()));t(k),I(1)}catch(L){console.error("Error fetching products:",L),h.error("Có lỗi xảy ra khi tìm kiếm sản phẩm."),t([])}a(!1)},p=()=>{S(""),a(!0),(async()=>{try{const L=await Tt(D,1,100);t(L||[])}catch{h.error("Có lỗi xảy ra khi tải danh sách sản phẩm.")}finally{a(!1)}})()},l=P*T,v=l-T,m=s.slice(v,l),j=s.length;return e.jsxs(De,{children:[e.jsx(Ce,{isLoading:n}),e.jsx(_a,{style:{backgroundImage:'url("/path/to/your/image.jpg")',backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 20px"},children:e.jsx(Za,{level:2,style:{color:"white",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},children:"Đề Xuất Sản Phẩm Theo Công Việc Mua"})}),e.jsxs(Ja,{style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px",display:"flex",justifyContent:"center"},children:[e.jsx(ec,{placeholder:"Tìm kiếm sản phẩm theo tên",enterButton:"Tìm kiếm",size:"large",value:o,onChange:i=>S(i.target.value),onSearch:F,style:{width:300,marginRight:20}}),e.jsx(H,{onClick:p,style:{marginLeft:20},children:"Xóa Tìm Kiếm"})]}),!n&&m.length>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{gutter:[16,16],children:m.map(i=>e.jsx(U,{span:6,children:e.jsx(Q,{hoverable:!0,cover:i.listImage.length>0&&e.jsx("img",{alt:i.productName,src:i.listImage[0].image,style:{height:200,objectFit:"cover",borderRadius:"8px 8px 0 0"},loading:"lazy"}),onDoubleClick:()=>w(i.productID),style:{marginBottom:"20px",height:"100%",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s"},bodyStyle:{padding:"16px"},onMouseEnter:L=>L.currentTarget.style.transform="scale(1.05)",onMouseLeave:L=>L.currentTarget.style.transform="scale(1)",children:e.jsx(Q.Meta,{title:i.productName,description:e.jsxs("div",{children:[e.jsx("p",{children:i.productDescription}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial Number:"}),e.jsx("span",{style:{color:"green",fontWeight:"bold"},children:i.serialNumber})]}),i.priceRent!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/giờ:"}),e.jsxs("span",{style:{color:"blue"},children:["VND",i.priceRent]})]}),i.priceBuy!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Mua):"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.priceBuy]})]}),i.pricePerHour!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/giờ:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerHour]})]}),i.pricePerDay!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/ngày:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerDay]})]}),i.pricePerWeek!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/tuần:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerWeek]})]}),i.pricePerMonth!=null&&e.jsxs("p",{children:[e.jsx("strong",{children:"Giá (Thuê)/tháng:"}),e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",i.pricePerMonth]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Đánh giá:"}),Array.from({length:5},(L,k)=>e.jsx("span",{style:{color:k<i.rating?"yellow":"lightgray",fontSize:"20px"},children:k<i.rating?"★":"☆"},k))]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Thương hiệu:"}),ue(i.brand)||"Không xác định"]}),e.jsxs(me,{color:"blue",children:[e.jsx("strong",{children:"Chất lượng:"})," ",i.quality]})]})})})},i.productID))}),e.jsx(Me,{current:P,pageSize:T,total:j,onChange:i=>I(i),style:{marginTop:"20px",textAlign:"center"}})]}):!n&&e.jsx("p",{children:"Không tìm thấy sản phẩm nào."})]}),e.jsx(re,{title:(c==null?void 0:c.productName)||"Chi tiết sản phẩm",visible:u,onCancel:A,footer:[e.jsx(H,{onClick:A,children:"Đóng"},"close")],bodyStyle:{padding:"20px",borderRadius:"8px"},centered:!0,children:c?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("img",{src:(b=c.listImage[0])==null?void 0:b.image,alt:c.productName,style:{width:"100%",height:"auto",marginBottom:"20px",borderRadius:"8px"},loading:"lazy"}),e.jsxs($,{bordered:!0,column:1,layout:"vertical",style:{width:"100%"},children:[e.jsx($.Item,{label:"Serial Number",children:e.jsx("span",{style:{color:"blue"},children:c.serialNumber})}),e.jsx($.Item,{label:"Mô tả",children:c.productDescription}),c.priceRent!=null&&e.jsx($.Item,{label:"Giá (Thuê)",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.priceRent]})}),c.priceBuy!=null&&e.jsx($.Item,{label:"Giá (Mua)",children:e.jsxs("span",{style:{color:"green",fontWeight:"bold"},children:["VND",c.priceBuy]})}),c.pricePerHour!=null&&e.jsx($.Item,{label:"Giá (Thuê)/giờ",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerHour]})}),c.pricePerDay!=null&&e.jsx($.Item,{label:"Giá (Thuê)/ngày",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerDay]})}),c.pricePerWeek!=null&&e.jsx($.Item,{label:"Giá (Thuê)/tuần",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerWeek]})}),c.pricePerMonth!=null&&e.jsx($.Item,{label:"Giá (Thuê)/tháng",children:e.jsxs("span",{style:{color:"blue"},children:["VND",c.pricePerMonth]})}),e.jsx($.Item,{label:"Chất lượng",children:e.jsxs(me,{color:"blue",children:[e.jsx("strong",{children:"Chất lượng:"})," ",c.quality]})}),e.jsx($.Item,{label:"Specifications",children:e.jsx("ul",{style:{paddingLeft:"20px"},children:c.listProductSpecification.map(i=>e.jsxs("li",{children:[i.specification,": ",i.details]},i.productSpecificationID))})})]})]}):e.jsx("p",{children:"Đang tải chi tiết sản phẩm..."})})]})},sc=async(s,t,n,a)=>{try{return(await G.post("/rating/create-rating",{productID:s,accountID:t,ratingValue:n,reviewComment:a})).data}catch(c){return console.error("Error creating rating:",c),null}},rc=async(s,t=1,n=10)=>{try{return(await G.get("/rating/get-ratings-by-product-id",{params:{productId:s,pageIndex:t,pageSize:n}})).data}catch(a){return console.error("Error fetching ratings for product:",a),null}},nc=async(s=1,t=10)=>{try{return(await G.get("/rating/get-all-ratings",{params:{pageIndex:s,pageSize:t}})).data}catch(n){return console.error("Error fetching all ratings:",n),null}},ac=()=>{const s=X(o=>o.user.user||{});s.id;const[t,n]=r.useState([]),[a,c]=r.useState(!0),[f,u]=r.useState(null);r.useState(!1),r.useState({productName:"",ratingValue:0,reviewComment:""});const d={name:`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`};return r.useEffect(()=>{(async()=>{try{const S=await nc(),P=await Promise.all(S.result.map(async I=>{try{const T=await ge(I.productID);return console.log("Fetched product:",T),{...I,productName:T.productName,productImage:T.listImage.length>0?T.listImage[0]:null}}catch(T){return console.error("Error fetching product:",T),{...I,productName:"N/A",productImage:null}}}));n(P)}catch{u("Lỗi khi lấy đánh giá")}finally{c(!1)}})()},[]),a?e.jsx("div",{children:"Đang tải..."}):f?e.jsx("div",{children:f}):e.jsxs("div",{className:"p-6 bg-gray-100 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Đánh giá"}),e.jsx("div",{className:"flex justify-end mb-4"}),e.jsx("ul",{className:"space-y-6",children:t.map(o=>e.jsxs("li",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("p",{className:"font-semibold",children:["Mã sản phẩm: ",o.productID]}),e.jsxs("p",{className:"font-semibold",children:["Tên sản phẩm: ",o.productName||"N/A"]}),o.productImage&&e.jsx("img",{src:o.productImage,alt:o.productName,className:"w-32 h-32 object-cover mt-2",onError:S=>{S.target.onerror=null,S.target.src="https://via.placeholder.com/150"}}),e.jsxs("p",{className:"font-semibold",children:["Tên tài khoản: ",d.name]}),e.jsxs("p",{className:"font-semibold flex items-center",children:["Giá trị đánh giá:",[...Array(5)].map((S,P)=>e.jsx(Er,{className:P<o.ratingValue?"text-yellow-500 ml-1":"text-gray-300 ml-1"},P))]}),e.jsxs("p",{className:"font-semibold",children:["Bình luận: ",o.reviewComment]}),e.jsxs("p",{className:"font-semibold",children:["Ngày tạo: ",new Date(o.createdAt).toLocaleString()]})]},o.ratingID))})]})},Js=()=>{const s=[{url:"https://th.bing.com/th/id/R.71e5cd9565219e6a53ef5805025b4bc6?rik=VDvYSPf2D5ty%2bw&pid=ImgRaw&r=0",title:"Nhanh tay lên!",description:"Phiếu giảm giá lên tới 10%"},{url:"https://koala.sh/api/image/v2-3cfnz-6x48e.jpg?width=1344&height=768&dream",title:"Chạm đến sắc màu",description:"Nắm trọn khoẳng khắc",renderOverlay:()=>null},{url:"https://th.bing.com/th/id/OIP.gm94XOQvsa0S89QhcaLtCwAAAA?w=474&h=287&rs=1&pid=ImgDetMain",title:"Nút chạm khắc ghi",description:"Chỉ cần chạm nhẹ, bạn nắm trọn khoảng khắc bạn muốn ",renderOverlay:()=>null}],t={dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,autoplay:!0,autoplaySpeed:2e3,cssEase:"linear",arrows:!0},n={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3};return e.jsxs(r.Suspense,{fallback:e.jsx(te,{tip:"Loading Home component..."}),children:[e.jsx(ts,{...n,children:s.map((a,c)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"w-full h-96 object-cover rounded-md",src:a.url,alt:`Slide ${c+1}`}),e.jsxs("div",{className:"absolute bottom-0 left-0 bg-black bg-opacity-50 text-white p-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.title}),e.jsx("p",{children:a.description})]})]},c))}),e.jsx(za,{}),e.jsxs("section",{className:"my-8 px-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Đề xuất"}),e.jsx(Xa,{}),e.jsx(tc,{})]}),e.jsx(ac,{}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Các thương hiệu đồng hành "}),e.jsxs(ts,{...t,children:[e.jsxs("div",{className:"px-2",children:[" ",e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/sq/thumb/5/54/Canon_logo.jpg/250px-Canon_logo.jpg",alt:"Canon",className:"mx-auto",width:"250",height:"250"})]}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRx0wgnyFOMBu_akXZK0Nuaf21w_cdJ8SI_Pr0FneO4essV4mSfVVzjbeuGEMW7i1f64Vk&usqp=CAU",alt:"Sony",className:"mx-auto",width:"250",height:"250"})}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://logos-world.net/wp-content/uploads/2023/03/Nikon-Logo-1965.png",alt:"Nikon",className:"mx-auto",width:"250",height:"250"})}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://logodix.com/logo/1145209.png",alt:"Fujifilm",className:"mx-auto",width:"250",height:"250"})}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSazCWo0bI2fIW0YdCpymFK-das9FQQlT8Rpw&s",alt:"Ricoh",className:"mx-auto",width:"250",height:"250"})}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:"https://cnicphday.wordpress.com/wp-content/uploads/2018/10/logo-leica.png",alt:"Leica",className:"mx-auto",width:"250",height:"250"})})]})]})},cc=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(1),[c]=r.useState(10),[f,u]=r.useState(1),[d,o]=r.useState(!1),S=Re();r.useEffect(()=>{(async()=>{o(!0);const T=await zs(n,c);T&&T.isSuccess?(t(T.result.items),u(T.result.totalPages)):console.error("Lấy thông tin nhà cung cấp thất bại."),o(!1)})()},[n,c]);const P=I=>{S(`/supplier-information-detail/${I}`)};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-teal-600 mb-6",children:"Nhà Cung Cấp"}),d?e.jsx("div",{className:"flex justify-center",children:e.jsx(te,{size:"large"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(I=>e.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden cursor-pointer hover:shadow-xl transition-shadow duration-300",onDoubleClick:()=>P(I.supplierID),children:[e.jsxs("div",{className:"flex items-center p-4",children:[e.jsx("img",{src:I.supplierLogo,alt:`${I.supplierName} logo`,className:"w-16 h-16 object-cover rounded-full mr-4"}),e.jsx("h2",{className:"text-xl font-semibold text-teal-600",children:I.supplierName})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:I.supplierDescription}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("strong",{children:"Địa Chỉ:"})," ",I.supplierAddress]}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("strong",{children:"Liên Hệ:"})," ",I.contactNumber]})]})]},I.supplierID))}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(Me,{current:n,pageSize:c,total:f*c,onChange:I=>a(I),showSizeChanger:!1,className:"text-teal-600"})})]})]})},lc={apiKey:"AIzaSyA2cV2sxqM4INpHxDLdNnDVTAnIupgJTTU",authDomain:"cameraserviceplatform.firebaseapp.com",projectId:"cameraserviceplatform",storageBucket:"cameraserviceplatform.appspot.com",messagingSenderId:"900743389934",appId:"1:900743389934:web:82255c21172a2299ee09ff",measurementId:"G-K05RNCRSXB"},Qt=$r().length>0?Rr():Hr(lc),ic=Or(Qt);Br(Qt);Yr(Qt);const ms="/assets/login-wD8gfYpZ.jpg",oc=s=>{const t=Array.isArray(s)?s:[s];return t.includes("ADMIN")?"ADMIN":t.includes("STAFF")?"STAFF":t.includes("SUPPLIER")?"SUPLIER":"MEMBER"},Rt=s=>{const t=Gr(s);console.log(t);const n=t["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],a=oc(n);return{accountId:t.AccountId,expire:t.exp,mainRole:a}},dc=({visible:s,onCancel:t,onSubmit:n})=>{const[a,c]=r.useState(1),[f,u]=r.useState(""),[d,o]=r.useState(""),[S,P]=r.useState(""),[I,T]=r.useState(!1),[N,D]=r.useState(null),g=r.useRef(null);r.useEffect(()=>()=>{g.current&&clearInterval(g.current)},[]);const w=async()=>{T(!0);const p=await zn(f);if(p.isSuccess)ve.success("Mã OTP sẽ được gửi đến email của bạn"),T(!1),c(2),D(30),g.current=setInterval(()=>{D(v=>v<=1?(clearInterval(g.current),null):v-1)},1e3);else for(var l=0;l<p.messages.length;l++)ve.error(p.messages[l]),T(!1)},A=()=>{c(3)},F=()=>{T(!0),n({email:f,recoveryCode:d,newPassword:S}),T(!1),u(""),o(""),P(""),c(1)};return e.jsxs(re,{title:a===1?"Bước 1: Nhập Email":a===2?"Bước 2: Nhập Verification Code":"Bước 3: Nhập password mới",open:s,onCancel:t,footer:null,centered:!0,children:[a===1&&e.jsxs(C,{onFinish:w,children:[e.jsx(C.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Nhập email của bạn!"},{type:"email",message:"Email không hợp lệ!"}],children:e.jsx(Y,{value:f,onChange:p=>u(p.target.value)})}),e.jsx(H,{loading:I,type:"primary",htmlType:"submit",className:" inline-block  px-4  text-xs text-center font-semibold leading-6 text-white bg-baseGreen hover:bg-green-600 rounded-lg transition duration-200",children:"Tiếp"})]}),a===2&&e.jsxs(C,{onFinish:A,children:[e.jsx(C.Item,{label:"Verification Code",name:"verificationCode",rules:[{required:!0,message:"Nhập verification code!"}],children:e.jsx(Y,{value:d,onChange:p=>o(p.target.value)})}),e.jsx(H,{type:"primary",htmlType:"submit",className:" inline-block  px-4  text-xs text-center font-semibold leading-6 text-white bg-baseGreen hover:bg-green-600 rounded-lg transition duration-200",children:"Tiếp"}),e.jsx("span",{style:{position:"absolute",bottom:"2.2rem",right:"1rem"},onClick:w,children:e.jsxs(H,{type:"link",children:[" ","Gửi lại mã OTP ",N!==null&&`(${N}s)`]})})]}),a===3&&e.jsxs(C,{onFinish:F,children:[e.jsx(C.Item,{label:"Password mới",name:"newPassword",rules:[{required:!0,message:"Nhập password mới!"},{min:6,message:"Password phải có ít nhất 6 ký tự!"},{pattern:/[A-Z]/,message:"Password phải chứa ít nhất 1 chữ cái viết hoa!"},{pattern:/[!@#$%^&*(),.?":{}|<>]/,message:'Password phải có ít nhất 1 ký tự đặc biệt (!@#$%^&*(),.?":{}|<>)!'}],children:e.jsx(Y,{type:"password",value:d,onChange:p=>P(p.target.value)})}),e.jsx(H,{loading:I,type:"primary",htmlType:"submit",className:" inline-block  px-4  text-xs text-center font-semibold leading-6 text-white bg-baseGreen hover:bg-green-600 rounded-lg transition duration-200",children:"Gửi"})]})]})},hc=({visible:s,onCancel:t,onOtpSubmit:n,email:a})=>{const[c,f]=r.useState(["","","","","",""]),u=r.useRef([]),[d,o]=r.useState(null),S=r.useRef(null);r.useEffect(()=>()=>{S.current&&clearInterval(S.current)},[]);const P=(D,g)=>{const w=[...c];w[g]=D.target.value,f(w),g<5&&D.target.value!==""&&u.current[g+1].focus()},I=(D,g)=>{D.key==="Backspace"&&g>0&&!c[g]&&(D.preventDefault(),u.current[g-1].focus())},T=()=>{n(c.join("")),f(["","","","","",""])},N=async()=>{if(d!==null)return;(await Gs(a)).isSuccess&&(ve.success("Resend OTP successfully"),o(30),S.current=setInterval(()=>{o(g=>g<=1?(clearInterval(S.current),null):g-1)},1e3))};return e.jsxs(re,{title:"Enter OTP",visible:s,onCancel:t,footer:null,centered:!0,children:[e.jsx("div",{className:"flex justify-center",children:c.map((D,g)=>e.jsx(Y,{className:"w-12 h-12 mx-2 text-center rounded-full border border-gray-300",value:D,onChange:w=>P(w,g),onKeyDown:w=>I(w,g),maxLength:1,ref:w=>u.current[g]=w},g))}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs(H,{onClick:N,type:"link",children:["Resend OTP ",d!==null&&`(${d}s)`]}),e.jsxs("div",{children:[e.jsx(H,{onClick:t,style:{marginRight:"10px"},children:"Cancel"}),e.jsx(H,{type:"primary",onClick:T,children:"Submit"})]})]})]})},uc=it().shape({email:ne().email("Invalid email").required("Email is required"),password:ne().required("Password is required").min(6,"Password must be at least 6 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[!@#$%^&*(),.?":{}|<>]/,'Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)')}),pc=it().shape({email:ne().email("Invalid email").required("Email is required"),password:ne().required("Password is required").min(6,"Password must be at least 6 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[!@#$%^&*(),.?":{}|<>]/,'Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)'),firstName:ne().required("First name is required"),lastName:ne().required("Last name is required"),repassword:ne().oneOf([Ts("password"),null],"Passwords must match").required("Confirm password is required"),phoneNumber:at().min(10,"Must be more than 10 characters").required("Phone number is requried")}),mc=()=>{const[s,t]=r.useState(!1),[n,a]=r.useState(!1),[c,f]=r.useState(!1),[u,d]=r.useState(""),[o,S]=r.useState(!1),{user:P}=X(p=>p.user||{}),I=ft(),T=new qr,N=Re(),D=async p=>{console.log("Đã gửi OTP:",p),(await Gn(u,p)).isSuccess&&(h.success("Xác minh thành công"),f(!1),a(!1))},g=async p=>{console.log(p);const l=await Kn(p.email,p.recoveryCode,p.newPassword);if(l.isSuccess)h.success("Đặt lại mật khẩu thành công!");else for(var v=0;v<l.messages.length;v++)h.error(l.messages[v]);S(!1)},w=()=>{f(!1)},A=()=>{S(!1)},F=async()=>{var m,j;t(!0);const p=await Wr(ic,T);if(console.log("userCred: ",p),p){const b=p._tokenResponse.idToken;console.log("Google Access Token: ",b);var l=await qn(b);if(l.isSuccess){console.log("callback: ",l),localStorage.setItem("accessToken",(m=l==null?void 0:l.result)==null?void 0:m.token),localStorage.setItem("refreshToken",(j=l==null?void 0:l.result)==null?void 0:j.refreshToken);var v=await gt(Rt(localStorage.getItem("accessToken")).accountId,localStorage.getItem("accessToken"));if(I(is(l.result.mainRole)),v.isSuccess){const i=v.result;I($t(i)),h.success("Đăng nhập thành công"),N("/")}}}t(!1)};return r.useEffect(()=>{P&&N("/")},[P]),e.jsxs(e.Fragment,{children:[e.jsx(Ce,{isLoading:s}),n?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-mint",children:e.jsxs("div",{className:"relative flex flex-col m-6 space-y-8 bg-white shadow-2xl rounded-2xl md:flex-row md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col justify-center px-8 md:p-14",children:[e.jsx("span",{className:"mb-3 text-4xl font-bold",children:"Chào mừng bạn trở lại"}),e.jsx("span",{className:"font-light text-gray-400 mb-2",children:"Vui lòng nhập thông tin để đăng ký tài khoản"}),e.jsx(pt,{initialValues:{email:"",password:"",firstName:"",lastName:"",repassword:"",phoneNumber:"",frontOfCitizenIdentificationCard:null,backOfCitizenIdentificationCard:null},validationSchema:pc,onSubmit:async(p,{setSubmitting:l})=>{try{t(!0);const v=new FormData;v.append("email",p.email),v.append("firstName",p.firstName),v.append("lastName",p.lastName),v.append("password",p.password),v.append("phoneNumber",p.phoneNumber),v.append("roleName","MEMBER"),v.append("frontOfCitizenIdentificationCard",p.frontOfCitizenIdentificationCard),v.append("backOfCitizenIdentificationCard",p.backOfCitizenIdentificationCard);const m=await Bn(v);console.log("Register result: ",m),m&&m.isSuccess?(d(p.email),f(!0),h.success("Registration successful! Please verify email.")):(console.error("Registration failed:",(m==null?void 0:m.message)||"Unknown error"),h.error("Registration failed. Please try again."))}catch(v){console.error("Error signing up:",v),v.response?h.error(`Registration failed: ${v.response.data.message||"Unknown error"}`):h.error("An error occurred. Please try again later.")}finally{t(!1),l(!1)}},children:({isSubmitting:p,setFieldValue:l,values:v,errors:m,touched:j})=>e.jsxs(mt,{children:[e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"mb-2 text-md",children:"Email"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",type:"email",name:"email",placeholder:"Nhập email của bạn"}),m.email&&j.email&&e.jsx("div",{className:"text-red-500",children:m.email})]}),e.jsxs("div",{className:"py-2 flex justify-start",children:[e.jsxs("div",{className:"flex flex-col justify-between mr-5",children:[e.jsx("span",{className:"mb-2 text-md mr-6",children:"Tên"}),e.jsx(he,{className:"w-full mr-2 p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",name:"firstName",placeholder:"Tên của bạn"}),m.firstName&&j.firstName&&e.jsx("div",{className:"text-red-500",children:m.firstName})]}),e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsx("span",{className:"mb-2 text-md mr-6",children:"Họ và tên đệm"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",name:"lastName",placeholder:"Họ và tên đệm"}),m.lastName&&j.lastName&&e.jsx("div",{className:"text-red-500",children:m.lastName})]})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"mb-2 text-md",children:"Số điện thoại"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",name:"phoneNumber",placeholder:"Nhập số điện thoại của bạn"}),m.phoneNumber&&j.phoneNumber&&e.jsx("div",{className:"text-red-500",children:m.phoneNumber})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"mb-2 text-md",children:"Mật khẩu"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",type:"password",name:"password",placeholder:"Mật khẩu của bạn"}),m.password&&j.password&&e.jsx("div",{className:"text-red-500",children:m.password})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"mb-2 text-md",children:"Nhập lại mật khẩu"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",type:"password",name:"repassword",placeholder:"Nhập lại mật khẩu"}),m.repassword&&j.repassword&&e.jsx("div",{className:"text-red-500",children:m.repassword})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"mb-2 text-md",children:"Ảnh mặt trước CCCD"}),e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded-md",type:"file",onChange:b=>{l("frontOfCitizenIdentificationCard",b.currentTarget.files[0])}}),v.frontOfCitizenIdentificationCard&&e.jsx("img",{src:URL.createObjectURL(v.frontOfCitizenIdentificationCard),alt:"Front of Citizen ID Card",className:"my-2",width:200,height:200}),m.frontOfCitizenIdentificationCard&&e.jsx("div",{className:"text-red-500",children:m.frontOfCitizenIdentificationCard})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("span",{className:"mb-2 text-md",children:"Ảnh mặt sau CCCD"}),e.jsx("input",{className:"w-full p-2 border border-gray-300 rounded-md",type:"file",onChange:b=>{l("backOfCitizenIdentificationCard",b.currentTarget.files[0])}}),v.backOfCitizenIdentificationCard&&e.jsx("img",{src:URL.createObjectURL(v.backOfCitizenIdentificationCard),alt:"Back of Citizen ID Card",className:"my-2",width:200,height:200}),m.backOfCitizenIdentificationCard&&e.jsx("div",{className:"text-red-500",children:m.backOfCitizenIdentificationCard})]}),e.jsx("button",{type:"submit",className:"w-full mb-3 inline-block px-4 py-2 text-xs text-center font-semibold leading-6 text-white bg-primary hover:bg-base4 rounded-lg transition duration-200",disabled:p||s,children:"Đăng ký tài khoản"}),e.jsxs("div",{className:"text-center text-gray-400",children:["Tôi đã có tài khoản ?",e.jsxs("a",{style:{cursor:"pointer"},onClick:()=>a(!1),className:"font-bold text-black hover:text-baseGreen",children:[" ","Đăng nhập ngay"]})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ms,alt:"img",className:"w-[400px] h-full hidden rounded-r-2xl md:block object-cover"}),e.jsx("div",{className:"absolute hidden bottom-10 right-6 p-6 bg-white bg-opacity-20 backdrop-blur-sm rounded drop-shadow-lg md:block",children:e.jsxs("span",{className:"text-black italic text-xl",children:["Camera Service Platform",e.jsx("br",{}),"Đem lại cho bạn trải nghiệm sản phẩm vô cùng tiện lợi.",e.jsx("br",{})]})})]})]})})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-mint",children:e.jsxs("div",{className:"relative flex flex-col m-6 space-y-8 bg-white shadow-2xl rounded-2xl md:flex-row md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col justify-center p-8 md:p-14",children:[e.jsx("span",{className:"mb-3 text-4xl font-bold",children:"CAMERA SERVICE PLATFORM"}),e.jsx("span",{className:"font-light text-gray-400 mb-8",children:"Bạn vui lòng nhập các thông tin chi tiết để đăng nhập"}),e.jsx(pt,{initialValues:{email:"",password:""},validationSchema:uc,onSubmit:async(p,{setSubmitting:l})=>{var j;try{t(!0);const b=await On(p.email,p.password);if(b.isSuccess){localStorage.setItem("accessToken",b.result.token),localStorage.setItem("refreshToken",b.result.refreshToken);var v=await gt(Rt(localStorage.getItem("accessToken")).accountId,localStorage.getItem("accessToken"));if(I(is((j=b==null?void 0:b.result)==null?void 0:j.mainRole)),v.isSuccess){const i=v.result;I($t(i)),h.success("Đăng nhập thành công"),N("/")}}else for(var m=0;m<b.messages.length;m++)h.error(b.messages[m]),b.messages[m]=="Tài khoản này chưa được xác thực !"&&(d(p.email),f(!0))}catch(b){console.error(b)}finally{t(!1)}},children:({isSubmitting:p,errors:l,touched:v})=>e.jsxs(mt,{children:[e.jsxs("div",{className:"py-4",children:[e.jsx("span",{className:"mb-2 text-md",children:"Email"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",type:"email",name:"email",prefix:e.jsx(zr,{}),placeholder:"Email của bạn"}),l.email&&v.email&&e.jsx("div",{className:"text-red-500",children:l.email})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("span",{className:"mb-2 text-md",children:"Mật khẩu"}),e.jsx(he,{className:"w-full p-2 border border-gray-300 rounded-md placeholder:font-light placeholder:text-gray-500",type:"password",name:"password",prefix:e.jsx(Kr,{}),placeholder:"Mật khẩu của bạn"}),l.password&&v.password&&e.jsx("div",{className:"text-red-500",style:{fontSize:"0.75rem",marginTop:"0.25rem"},children:l.password})]}),e.jsx("div",{className:"flex justify-between w-full py-4  mr-24",children:e.jsx("span",{style:{cursor:"pointer"},onClick:()=>S(!0),className:" text-md w-full block text-baseGreen italic",children:"Quên mật khẩu?"})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"submit",className:"w-full mb-4 px-4 py-2 text-sm font-semibold text-white bg-primary rounded-lg hover:bg-primary-dark transition duration-200",disabled:p,children:"Đăng nhập"}),e.jsxs("button",{className:"w-full mb-4 text-black py-2 bg-base-300 rounded-md flex items-center justify-center hover:bg-base-200 transition duration-200",onClick:F,children:[e.jsx("i",{className:"fa-brands fa-google mx-2"})," Đăng nhập với Google"]}),e.jsxs("div",{className:"text-center text-gray-400 mb-4",children:["Bạn chưa có tài khoản?",e.jsx("a",{style:{cursor:"pointer"},className:"font-bold text-black hover:text-baseGreen",onClick:()=>a(!0),children:"Đăng kí ở đây"})]}),e.jsx(qe,{to:"/register-supplier",children:e.jsx("button",{className:"w-full mb-4 px-4 py-2 text-sm font-mono text-black bg-pink-400 rounded-lg hover:bg-primary-dark transition duration-500",children:"Đăng ký trở thành nhà cung cấp cùng CameraServicePlatform"})})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:ms,alt:"img",className:"w-[400px] h-full hidden rounded-r-2xl md:block object-cover"}),e.jsx("div",{className:"absolute hidden bottom-10 right-6 p-6 bg-white bg-opacity-40 backdrop-blur-sm rounded drop-shadow-lg md:block",children:e.jsxs("span",{className:"text-black italic text-xl",children:["Camera Service Platform",e.jsx("br",{}),"Đem lại cho bạn trải nghiệm sản phẩm vô cùng tiện lợi.",e.jsx("br",{})]})})]})]})}),e.jsx(hc,{visible:c,onCancel:w,onOtpSubmit:D,email:u}),e.jsx(dc,{visible:o,onCancel:A,onSubmit:g})]})},Zs=async(s=1,t=100)=>{try{const n=await G.get("/voucher/get-all-voucher",{params:{pageIndex:s,pageSize:t}});if(n.status===200)return n.data}catch(n){return console.error("Error fetching vouchers:",n),h.error("Failed to fetch vouchers. Please try again later."),null}},lt=async s=>{try{const t=await G.get("/voucher/get-voucher-by-id",{params:{id:s}});if(t.status===200&&t.data.isSuccess)return t.data.result}catch(t){return console.error("Error fetching voucher by ID:",t),null}},Xt=async(s,t,n)=>{try{const a=await G.get(`/voucher/get-voucher-by-supplier-id?supplierId=${s}&pageIndex=${t}&pageSize=${n}`);if(!a.data.isSuccess)throw new Error("Failed to fetch vouchers.");return a.data}catch(a){throw console.error("Error fetching vouchers by supplier ID:",a),h.error("Failed to fetch vouchers. Please try again later."),a}},gc=async s=>{try{const t=await G.post("/voucher/create-voucher",s,{headers:{"Content-Type":"application/json"}});if(t.status===200&&t.data.isSuccess)return h.success("Voucher created successfully."),t.data.result}catch(t){throw console.error("Error creating voucher:",t),h.error("Failed to create voucher. Please try again."),t}},xc=async s=>{try{const t=await G.put("/voucher/update-voucher",s,{headers:{"Content-Type":"application/json"}});if(t.status===200&&t.data.isSuccess)return h.success("Voucher updated successfully."),t.data.result}catch(t){throw console.error("Error updating voucher:",t),h.error("Failed to update voucher. Please try again."),t}},er=async(s,t=1,n=10)=>{try{const a=await G.get("/productVoucher/get-product-voucher-by-product-id",{params:{ProductId:s,pageIndex:t,pageSize:n},headers:{Accept:"text/plain"}});if(a.data.isSuccess)return a.data.result;throw new Error("Failed to fetch product vouchers.")}catch(a){throw console.error("Error fetching product vouchers by product ID:",a),h.error("Failed to fetch product vouchers. Please try again later."),a}},fc=({deliveryMethod:s,setDeliveryMethod:t,supplierInfo:n})=>{const a=c=>{t(c.target.value)};return e.jsxs(Q,{title:"Phương thức giao hàng",bordered:!1,children:[e.jsx(C.Item,{label:"Chọn phương thức giao hàng",rules:[{required:!0,message:"Vui lòng chọn phương thức giao hàng!"}],children:e.jsxs(Ge.Group,{onChange:a,value:s,children:[e.jsx(Ge,{value:0,children:"Nhận tại cửa hàng"}),e.jsx(Ge,{value:1,children:"Giao hàng tận nơi"})]})}),s===1&&e.jsx(C.Item,{label:"Địa chỉ giao hàng",name:"shippingAddress",rules:[{required:!0,message:"Vui lòng nhập địa chỉ giao hàng!"}],children:e.jsx(Y,{})}),s===0&&n&&e.jsxs($,{bordered:!0,children:[e.jsx($.Item,{label:"Tên nhà cung cấp",children:n.supplierName}),e.jsx($.Item,{label:"Số điện thoại",children:n.contactNumber}),e.jsx($.Item,{label:"Địa chỉ nhà cung cấp",children:n.supplierAddress})]})]})},yc=({totalAmount:s})=>e.jsx("div",{children:e.jsx(Q,{title:"Xác nhận đơn hàng",bordered:!1,children:e.jsx($,{bordered:!0,column:1,children:e.jsx($.Item,{label:"Tổng số tiền",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s)})})})}),jc=({product:s,form:t,deliveryMethod:n,supplierInfo:a,selectedVoucherDetails:c,totalAmount:f})=>{const u=isNaN(f)?0:f;return e.jsx(Q,{title:"Xem lại đơn hàng",bordered:!1,children:e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsxs($,{column:1,bordered:!0,children:[e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ue,{})," Mã sản phẩm"]}),children:s.productID}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Tên"]}),children:s.productName}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," Mô tả"]}),children:s.productDescription}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(fe,{})," Giá"]}),children:e.jsx("div",{style:{color:"#52c41a"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s==null?void 0:s.priceBuy)})}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Chất lượng"]}),children:s.quality})]})}),e.jsx(U,{span:12,children:e.jsx(Q,{title:"Thông tin giao hàng",bordered:!1,style:{marginBottom:"16px"},children:e.jsxs($,{bordered:!0,column:1,children:[e.jsx($.Item,{label:"Phương thức giao hàng",children:n===0?"Nhận tại cửa hàng":"Giao hàng tận nơi"}),n===1&&e.jsx($.Item,{label:"Địa chỉ giao hàng",children:t.getFieldValue("shippingAddress")}),n===0&&a&&e.jsxs(e.Fragment,{children:[e.jsx($.Item,{label:"Tên nhà cung cấp",children:a.supplierName}),e.jsx($.Item,{label:"Số điện thoại",children:a.contactNumber}),e.jsx($.Item,{label:"Địa chỉ nhà cung cấp",children:a.supplierAddress})]})]})})}),e.jsx(U,{span:12,children:e.jsxs($,{column:1,bordered:!0,children:[e.jsx($.Item,{label:"Voucher đã chọn",children:(c==null?void 0:c.vourcherCode)||"Không có"}),e.jsx($.Item,{label:"Mô tả",children:(c==null?void 0:c.description)||"Không có"}),e.jsx($.Item,{label:"Số tiền giảm",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format((c==null?void 0:c.discountAmount)||0)}),e.jsx($.Item,{label:"Tổng số tiền",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(u)})]})})]})})},bc=({product:s,loading:t})=>e.jsx(Q,{title:"Thông tin sản phẩm",bordered:!1,style:{marginBottom:"24px"},children:t?e.jsx(te,{tip:"Đang tải thông tin sản phẩm..."}):s?e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsxs($,{column:1,bordered:!0,children:[e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ue,{})," Mã sản phẩm"]}),children:s.productID}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Tên"]}),children:s.productName}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," Mô tả"]}),children:s.productDescription}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(fe,{})," Giá"]}),children:e.jsx("div",{style:{color:"#52c41a"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.priceBuy)})}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Chất lượng"]}),children:s.quality})]})}),e.jsx(U,{span:12,children:e.jsx(Q,{title:e.jsxs("span",{children:[e.jsx(Bt,{})," Hình ảnh sản phẩm"]}),bordered:!1,children:e.jsx("div",{className:"flex flex-wrap mt-2",children:s.listImage&&s.listImage.length>0?s.listImage.map((n,a)=>e.jsx("img",{src:n.image,alt:`Hình ảnh sản phẩm ${a+1}`,className:"w-24 h-24 mr-2 mb-2 object-cover",style:{width:"100px",height:"100px",objectFit:"cover",margin:"4px"}},n.productImagesID)):e.jsx("p",{children:"Không có hình ảnh cho sản phẩm này."})})})})]}):e.jsx("p",{children:"Không tìm thấy thông tin sản phẩm."})}),Nc=({vouchers:s,selectedVoucher:t,setSelectedVoucher:n,handleVoucherSelect:a,selectedVoucherDetails:c})=>{r.useEffect(()=>{t||a({target:{value:null}})},[t,a]);const f=u=>{n(u),a({target:{value:u}})};return e.jsx(C.Item,{label:"Chọn Voucher",children:e.jsx(Ge.Group,{onChange:a,value:t,style:{width:"100%"},children:e.jsx(J,{gutter:[16,16],children:s.map(u=>e.jsx(U,{span:8,children:e.jsxs(Q,{title:u.vourcherID,bordered:!1,style:{cursor:"pointer",borderColor:t===u.vourcherID?"#1890ff":"#f0f0f0",backgroundColor:t===u.vourcherID?"#e6f7ff":"#ffffff",boxShadow:t===u.vourcherID?"0 4px 8px rgba(0, 0, 0, 0.1)":"none",transition:"all 0.3s ease"},onClick:()=>f(u.vourcherID),children:[e.jsx("p",{children:u.vourcherID}),t===u.vourcherID&&c&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mã Voucher:"})," ",c.vourcherCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mô tả:"})," ",c.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ưu đãi :"})," ",c.discountAmount]})]})]})},u.productVoucherID))})})})},{Step:Sc}=st,Ic=()=>{const[s]=C.useForm(),[t,n]=r.useState(0),[a,c]=r.useState(null),[f,u]=r.useState([]),[d,o]=r.useState(null),[S,P]=r.useState(0),[I,T]=r.useState(0),[N,D]=r.useState(null),g=yt();Re();const{productID:w,supplierID:A}=g.state||{},[F,p]=r.useState(!0),[l,v]=r.useState(!0),[m,j]=r.useState(null),i=X(y=>y.user.user||{}).id;r.useEffect(()=>{(async()=>{p(!0);try{const E=await ge(w);E?c(E):h.error("Không tìm thấy sản phẩm.")}catch{h.error("Không thể lấy thông tin sản phẩm.")}p(!1)})()},[w]),r.useEffect(()=>{(async()=>{v(!0);try{const E=await er(w,1,10);E?(u(E),console.log("voucherData",E)):h.error("Không có voucher khả dụng.")}catch{h.error("Không thể lấy voucher.")}v(!1)})()},[w]),r.useEffect(()=>{(async()=>{if(I===1&&A)try{const E=await be(A);E&&E.result&&E.result.items.length>0?D(E.result.items[0]):h.error("Không thể lấy thông tin nhà cung cấp.")}catch{h.error("Không thể lấy thông tin nhà cung cấp.")}})()},[I,A]);const L=async y=>{const E=y.target.value;if(o(E),E)try{const K=await lt(E);j(K),console.log("voucherDetails",K),console.log("voucherDetails.discountAmount",K.discountAmount),k(E)}catch(K){console.error("Lỗi khi lấy chi tiết voucher:",K)}else j(null),k(null)},k=async y=>{if(!a){console.error("Sản phẩm không được xác định");return}let E=0;if(y)try{const R=await lt(y);R?E=Number(R.discountAmount)||0:console.error("Không tìm thấy chi tiết voucher")}catch(R){console.error("Lỗi khi lấy chi tiết voucher:",R)}const K=Number(a.priceBuy),W=K-E;P(W),console.log("discount",E),console.log("productPrice",K),console.log("total",W)},B=async y=>{var K,W,R;const E={supplierID:A||"",accountID:i||"",productID:(a==null?void 0:a.productID)||"",vourcherID:d,productPrice:a.priceBuy||0,orderDate:new Date().toISOString(),orderStatus:0,totalAmount:S||0,products:[{productID:(a==null?void 0:a.productID)||"",productName:(a==null?void 0:a.productName)||"",productDescription:(a==null?void 0:a.productDescription)||"",price:a.priceBuy||0,quality:a==null?void 0:a.quality}],orderDetailRequests:[{productID:(a==null?void 0:a.productID)||"",productPrice:(a==null?void 0:a.priceBuy)||0,productQuality:a==null?void 0:a.quality,discount:d&&((K=f.find(M=>M.vourcherID===d))==null?void 0:K.discountAmount)||0,productPriceTotal:S||0}],orderType:0,shippingAddress:y.shippingAddress||"",deliveryMethod:I,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{const M=await Ks(E);M.isSuccess&&M.result?(h.success("Tạo đơn hàng thành công. Đang chuyển hướng đến thanh toán..."),window.location.href=M.result):h.error("Không thể khởi tạo thanh toán.")}catch(M){h.error("Không thể tạo đơn hàng. "+(((R=(W=M.response)==null?void 0:W.data)==null?void 0:R.title)||"")),console.error(M)}},q=[{title:"Chi tiết sản phẩm",content:e.jsx(bc,{product:a,loading:F})},{title:"Phương thức giao hàng",content:e.jsx(fc,{deliveryMethod:I,setDeliveryMethod:T,supplierInfo:N})},{title:"Chọn Voucher",content:e.jsx(Nc,{vouchers:f,selectedVoucher:d,setSelectedVoucher:o,handleVoucherSelect:L,selectedVoucherDetails:m})},{title:"Xem lại đơn hàng",content:e.jsx(jc,{product:a,form:s,deliveryMethod:I,supplierInfo:N,selectedVoucherDetails:m,totalAmount:S})},{title:"Xác nhận",content:e.jsx(yc,{totalAmount:S})}],V=()=>{n(t+1)},x=()=>{n(t-1)};return e.jsx(Q,{title:"Tạo đơn hàng mua",children:F||l?e.jsx(te,{}):e.jsxs(C,{form:s,layout:"vertical",onFinish:B,children:[e.jsx(st,{current:t,children:q.map(y=>e.jsx(Sc,{title:y.title},y.title))}),e.jsx("div",{className:"steps-content",style:{marginTop:"16px"},children:q[t].content}),e.jsxs("div",{className:"steps-action",style:{marginTop:"16px"},children:[t>0&&e.jsx(H,{style:{margin:"0 8px"},onClick:()=>x(),children:"Quay lại"}),t<q.length-1&&e.jsx(H,{type:"primary",onClick:()=>V(),children:"Tiếp theo"}),t===q.length-1&&e.jsx(H,{type:"primary",htmlType:"submit",children:"Tạo đơn hàng"})]})]})})},vc=it({email:ne().email("Email không hợp lệ").required("Email là bắt buộc"),firstName:ne().required("Họ là bắt buộc"),lastName:ne().required("Tên là bắt buộc"),phoneNumber:ne().required("Số điện thoại là bắt buộc"),address:ne(),job:at().nullable(),hobby:at().nullable(),gender:at().nullable(),frontOfCitizenIdentificationCard:ss().nullable(),backOfCitizenIdentificationCard:ss().nullable()}),wc=({onClose:s})=>{const{user:t}=X(c=>c.user||{}),n=ft(),a={email:(t==null?void 0:t.email)||"",firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",phoneNumber:(t==null?void 0:t.phoneNumber)||"",address:(t==null?void 0:t.address)||"",job:(t==null?void 0:t.job)||null,hobby:(t==null?void 0:t.hobby)||null,gender:(t==null?void 0:t.gender)||null,frontOfCitizenIdentificationCard:null,backOfCitizenIdentificationCard:null};return e.jsx("div",{className:"modal modal-open",children:e.jsxs("div",{className:"modal-box max-w-xl",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Thông tin cá nhân"}),e.jsx(pt,{initialValues:a,validationSchema:vc,onSubmit:async(c,{setSubmitting:f})=>{f(!0);const u=new FormData;Object.keys(c).forEach(d=>{u.append(d,c[d])});try{const d=await Un(u);if(d.isSuccess){const o=await gt(t.id);o.isSuccess?(n($t(o.result)),ve.success("Cập nhật dữ liệu thành công"),s()):ve.error("Failed to fetch updated user data")}else d.messages.length===0?ve.error("Đã xảy ra lỗi, vui lòng thử lại sau"):d.messages.forEach(o=>{ve.error(o)})}catch{ve.error("Có lỗi xảy ra, vui lòng thử lại")}finally{f(!1)}},children:({isSubmitting:c,setFieldValue:f})=>e.jsxs(mt,{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label font-semibold",children:"Email"}),e.jsx(he,{id:"email",name:"email",type:"email",readOnly:!0,className:"input input-bordered w-full",placeholder:"Nhập email của bạn"}),e.jsx(Ie,{name:"email",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"label font-semibold",children:"Họ"}),e.jsx(he,{id:"firstName",name:"firstName",type:"text",className:"input input-bordered w-full",placeholder:"Nhập họ của bạn"}),e.jsx(Ie,{name:"firstName",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"label font-semibold",children:"Tên"}),e.jsx(he,{id:"lastName",name:"lastName",type:"text",className:"input input-bordered w-full",placeholder:"Nhập tên của bạn"}),e.jsx(Ie,{name:"lastName",component:"div",className:"text-error mt-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"label font-semibold",children:"Số điện thoại"}),e.jsx(he,{id:"phoneNumber",name:"phoneNumber",type:"text",className:"input input-bordered w-full",placeholder:"Nhập số điện thoại của bạn"}),e.jsx(Ie,{name:"phoneNumber",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"label font-semibold",children:"Địa chỉ"}),e.jsx(he,{id:"address",name:"address",type:"text",className:"input input-bordered w-full",placeholder:"Nhập địa chỉ của bạn"}),e.jsx(Ie,{name:"address",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"job",className:"label font-semibold",children:"Nghề nghiệp"}),e.jsxs(he,{id:"job",name:"job",as:"select",className:"input input-bordered w-full",children:[e.jsx("option",{value:"",children:"Chọn nghề nghiệp"}),e.jsx("option",{value:0,children:"Học sinh"}),e.jsx("option",{value:1,children:"Nhiếp ảnh chuyên nghiệp"}),e.jsx("option",{value:2,children:"Nhiếp ảnh tự do"}),e.jsx("option",{value:3,children:"Người sáng tạo nội dung"}),e.jsx("option",{value:4,children:"Người mới bắt đầu"}),e.jsx("option",{value:5,children:"Sinh viên nhiếp ảnh"}),e.jsx("option",{value:6,children:"Người yêu thích du lịch"}),e.jsx("option",{value:7,children:"Người dùng thông thường"}),e.jsx("option",{value:8,children:"Khác"})]}),e.jsx(Ie,{name:"job",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hobby",className:"label font-semibold",children:"Sở thích"}),e.jsxs(he,{id:"hobby",name:"hobby",as:"select",className:"input input-bordered w-full",children:[e.jsx("option",{value:"",children:"Chọn sở thích"}),e.jsx("option",{value:0,children:"Chụp ảnh phong cảnh"}),e.jsx("option",{value:1,children:"Chụp ảnh chân dung"}),e.jsx("option",{value:2,children:"Chụp ảnh động vật hoang dã"}),e.jsx("option",{value:3,children:"Chụp ảnh đường phố"}),e.jsx("option",{value:4,children:"Chụp ảnh cận cảnh"}),e.jsx("option",{value:5,children:"Chụp ảnh thể thao"}),e.jsx("option",{value:6,children:"Khác"})]}),e.jsx(Ie,{name:"hobby",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"label font-semibold",children:"Giới tính"}),e.jsxs(he,{id:"gender",name:"gender",as:"select",className:"input input-bordered w-full",children:[e.jsx("option",{value:"",children:"Chọn giới tính"}),e.jsx("option",{value:1,children:"Nam"}),e.jsx("option",{value:2,children:"Nữ"}),e.jsx("option",{value:3,children:"Không cung cấp"})]}),e.jsx(Ie,{name:"gender",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"frontOfCitizenIdentificationCard",className:"label font-semibold",children:"Ảnh trước CMND"}),e.jsx("input",{id:"frontOfCitizenIdentificationCard",name:"frontOfCitizenIdentificationCard",type:"file",onChange:u=>f("frontOfCitizenIdentificationCard",u.currentTarget.files[0]),className:"input input-bordered w-full"}),e.jsx(Ie,{name:"frontOfCitizenIdentificationCard",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"backOfCitizenIdentificationCard",className:"label font-semibold",children:"Ảnh sau CMND"}),e.jsx("input",{id:"backOfCitizenIdentificationCard",name:"backOfCitizenIdentificationCard",type:"file",onChange:u=>f("backOfCitizenIdentificationCard",u.currentTarget.files[0]),className:"input input-bordered w-full"}),e.jsx(Ie,{name:"backOfCitizenIdentificationCard",component:"div",className:"text-error mt-1"})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{type:"submit",className:"btn bg-primary text-white",disabled:c,children:"Gửi"}),e.jsx("button",{type:"button",className:"btn btn-ghost",onClick:s,children:"Đóng"})]})]})})]})})},Dc={0:"Sinh viên",1:"Nhiếp ảnh gia chuyên nghiệp",2:"Nhiếp ảnh gia tự do",3:"Người sáng tạo nội dung",4:"Người mới bắt đầu",5:"Sinh viên nhiếp ảnh",6:"Người đam mê du lịch",7:"Người dùng thường xuyên",8:"Khác"},Cc={0:"Nhiếp ảnh phong cảnh",1:"Nhiếp ảnh chân dung",2:"Nhiếp ảnh động vật hoang dã",3:"Nhiếp ảnh đường phố",4:"Nhiếp ảnh macro",5:"Nhiếp ảnh thể thao",6:"Khác"},Pc={0:{text:"Chờ xử lý",color:"blue",icon:"fa-hourglass-start"},1:{text:"Sản phẩm sẵn sàng được giao",color:"green",icon:"fa-check-circle"},2:{text:"Hoàn thành",color:"yellow",icon:"fa-clipboard-check"},3:{text:"Đã nhận sản phẩm",color:"purple",icon:"fa-shopping-cart"},4:{text:"Đã giao hàng",color:"cyan",icon:"fa-truck"},5:{text:"Thanh toán thất bại",color:"cyan",icon:"fa-money-bill-wave"},6:{text:"Đang hủy",color:"lime",icon:"fa-box-open"},7:{text:"Đã hủy thành công",color:"red",icon:"fa-times-circle"},8:{text:"Đã Thanh toán",color:"orange",icon:"fa-money-bill-wave"},9:{text:"Hoàn tiền đang chờ xử lý",color:"pink",icon:"fa-clock"},10:{text:"Hoàn tiền",color:"brown",icon:"fa-undo"},11:{text:"Hoàn trả tiền đặt cọc",color:"gold",icon:"fa-piggy-bank"}},kc={0:{text:"Mua",color:"indigo",icon:"fa-shopping-bag"},1:{text:"Thuê",color:"green",icon:"fa-warehouse"}},Tc={0:{text:"Nhận tại cửa hàng",color:"blue",icon:"fa-store"},1:{text:"Giao hàng tận nơi",color:"green",icon:"fa-truck"},2:{text:"Trả lại",color:"red",icon:"fa-undo"}},Mc=()=>{const{user:s}=X(k=>k.user||{}),[t,n]=r.useState([]),[a,c]=r.useState(!1),[f,u]=r.useState(!1),[d,o]=r.useState([]),[S,P]=r.useState(!1),[I,T]=r.useState({}),[N,D]=r.useState({}),g=async()=>{try{P(!0),console.log("Fetching orders for user ID:",s.id);const k=await jt(s.id,1,100);console.log("API response:",k),k.isSuccess?n(k.result||[]):h.error("Failed to fetch orders.")}catch(k){console.error("Error fetching orders:",k),h.error("An error occurred, please try again later.")}finally{P(!1)}},w={name:`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`,email:`${(s==null?void 0:s.email)||""}`,phone:`${(s==null?void 0:s.phoneNumber)||""}`,address:`${(s==null?void 0:s.address)||""}`,job:s==null?void 0:s.job,hobby:s==null?void 0:s.hobby,gender:s==null?void 0:s.gender,bankName:`${(s==null?void 0:s.bankName)||""}`,accountNumber:`${(s==null?void 0:s.accountNumber)||""}`,accountHolder:`${(s==null?void 0:s.accountHolder)||""}`};r.useEffect(()=>{s!=null&&s.id&&g()},[s]);const A=async k=>{try{P(!0);const B=await Wt(k,1,100);B.isSuccess?o(B.result||[]):h.error("Failed to fetch order details.")}catch(B){console.error("Error fetching order details:",B),h.error("An error occurred, please try again later.")}finally{P(!1)}};r.useEffect(()=>{d.length>0&&(console.log("Chi tiết đơn hàng",d),F())},[d]);const F=async()=>{const k=[...new Set(d.map(q=>q.product.categoryID))].filter(q=>q),B=[...new Set(d.map(q=>q.product.supplierID))].filter(q=>q);try{const q=k.map(W=>Te(W)),V=B.map(W=>be(W,1,1)),x=await Promise.all(q),y=await Promise.all(V),E={};x.forEach((W,R)=>{var _;const M=k[R];E[M]=W.isSuccess&&((_=W.result)==null?void 0:_.categoryName)||"Không xác định"});const K={};y.forEach((W,R)=>{const M=B[R];K[M]=W&&W.result&&W.result.items.length>0?{supplierName:W.result.items[0].supplierName,supplierAddress:W.result.items[0].supplierAddress||"Không xác định",supplierDescription:W.result.items[0].supplierDescription||"Không xác định",contactNumber:W.result.items[0].contactNumber||"Không xác định"}:{supplierName:"Không xác định",supplierAddress:"Không xác định",supplierDescription:"Không xác định",contactNumber:"Không xác định"}}),T(E),D(K)}catch(q){console.error("Error fetching category or supplier names:",q),h.error("Error fetching category or supplier names.")}},p=k=>{c(!0),A(k.orderID)},l=({status:k,map:B})=>{const q=B[k]||{text:"Thanh toán thất bại",color:"gray",icon:"fa-question-circle"};return e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-semibold rounded-full bg-opacity-20",children:[e.jsx("i",{className:`fa-solid ${q.icon} text-${q.color}-500`}),e.jsx("span",{className:`text-${q.color}-700`,children:q.text})]})},v=async k=>{try{P(!0);const B=await Qs(k);B.isSuccess&&B.result?window.location.href=B.result:h.error("Failed to initiate payment.")}catch{h.error("Đã xảy ra lỗi, vui lòng thử lại sau")}finally{P(!1)}},m=k=>{const B=new Date(k).getTime();return new Date().getTime()-B<=24*60*60*1e3},j=k=>{const B=new Date(k).getTime(),q=new Date().getTime(),V=24*60*60*1e3-(q-B);return V>0?V:0},b=k=>{const B=Math.floor(k/36e5),q=Math.floor(k%(1e3*60*60)/(1e3*60)),V=Math.floor(k%(1e3*60)/1e3);return`${B}h ${q}m ${V}s`},i=({order:k})=>{const[B,q]=r.useState(j(k.orderDate));return r.useEffect(()=>{const V=setInterval(()=>{q(j(k.orderDate))},1e3);return()=>clearInterval(V)},[k.orderDate]),(k.orderStatus===0||k.orderStatus===8)&&m(k.orderDate)&&e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx(Pt,{icon:Qr,className:"mr-2"}),e.jsx("span",{className:"mr-2",children:b(B)}),e.jsxs("button",{className:"bg-red-500 text-white rounded-md py-2 px-4 my-2 flex items-center group",onClick:async V=>{if(V.preventDefault(),alert("Cancel Order Request clicked"),console.log("Order:",k),!k.orderID){console.error("Order ID is undefined");return}try{const x=await Xs(k.orderID);console.log("API Response:",x),x&&x.isSuccess?(console.log("Order canceled successfully:",x),window.location.reload()):console.error("Failed to cancel order:",x.messages)}catch(x){console.error("Error canceling order:",x)}},children:[e.jsx(Pt,{icon:Xr,className:"mr-2 group-hover:hidden"}),e.jsx("span",{className:"hidden group-hover:inline",children:"Yêu cầu hủy đơn hàng"})]})]})},L=k=>{var B,q,V,x;return e.jsxs("tr",{className:k.orderStatus===1&&k.deliveryMethod===0?"bg-yellow-100":"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p(k),children:[e.jsx("td",{className:"py-3 px-4 border-b",children:k.orderID}),e.jsxs("td",{className:"py-3 px-4 border-b",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Tên nhà cung cấp:"})," ",((B=N[k.supplierID])==null?void 0:B.supplierName)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Địa chỉ:"})," ",((q=N[k.supplierID])==null?void 0:q.supplierAddress)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mô tả:"})," ",((V=N[k.supplierID])==null?void 0:V.supplierDescription)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Số điện thoại liên hệ:"})," ",((x=N[k.supplierID])==null?void 0:x.contactNumber)||""]})]}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(l,{status:k.orderStatus,map:Pc})}),e.jsx("td",{className:"py-3 px-4 border-b hidden md:table-cell",children:k.shippingAddress}),e.jsx("td",{className:"py-3 px-4 border-b hidden lg:table-cell",children:e.jsx(l,{status:k.deliveriesMethod,map:Tc})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(l,{status:k.orderType,map:kc})}),e.jsx("td",{className:"py-3 px-4 border-b hidden sm:table-cell",children:Ke(k.orderDate)}),e.jsx("td",{className:"py-3 px-4 border-b",children:ze(k.totalAmount)}),e.jsx("td",{children:k.orderStatus===0&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"bg-primary text-white rounded-md py-2 px-4 my-2",onClick:y=>{y.stopPropagation(),v(k.orderID)},children:"Thanh toán ngay"})})}),e.jsxs("td",{children:[e.jsx(i,{order:k}),k.orderStatus===1&&k.deliveryMethod===0&&k.orderType===0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"red",marginTop:"10px"},children:"Vui lòng nhận sản phẩm tại cửa hàng trong vòng 3 ngày. Sau 3 ngày, đơn hàng của bạn sẽ bị hủy."}),e.jsx("button",{className:"bg-blue-500 text-white rounded-md py-2 px-4 my-2",onClick:async y=>{y.stopPropagation(),await us(k.orderID)},children:"Nhận hàng"})]}),k.orderStatus===1&&k.deliveryMethod===0&&k.orderType===1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"red",marginTop:"10px"},children:"Vui lòng đến trước 30 phút thời gian thuê để có thể nhận và kiểm tra sản phẩm."}),e.jsx("button",{className:"bg-blue-500 text-white rounded-md py-2 px-4 my-2",onClick:async y=>{y.stopPropagation(),await us(k.orderID)},children:"Nhận hàng"})]})]}),e.jsx("td",{})]},k.orderID)};return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsx(Ce,{isLoading:S,title:"Loading data..."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-teal-600 flex items-center",children:[e.jsx("i",{className:"fa-solid fa-user mr-2"})," Thông tin cá nhân"]}),e.jsx("button",{className:"btn bg-primary text-white flex items-center",onClick:()=>u(!0),children:e.jsx(Pt,{icon:Ur,className:"mr-2"})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-user mr-2 text-gray-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Tên:"})," ",w.name]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-phone mr-2 text-gray-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Điện thoại:"})," ",w.phone]})]}),e.jsxs("div",{className:"flex items-center flex-wrap",children:[e.jsx("i",{className:"fa-solid fa-envelope mr-2 text-gray-600"}),e.jsxs("span",{className:"break-words",children:[e.jsx("strong",{children:"Email:"})," ",w.email]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-briefcase mr-2 text-gray-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Công việc:"})," ",Dc[w.job]]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-heart mr-2 text-gray-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Sở thích:"})," ",Cc[w.hobby]]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"fa-solid fa-venus-mars mr-2 text-gray-600"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Giới tính:"})," ",w.gender===0?"Nam":"Nữ"]})]})]})]}),a?e.jsxs("div",{className:"lg:col-span-3 bg-white shadow-xl rounded-lg p-6",children:[e.jsxs("button",{onClick:()=>{c(!1)},className:"text-teal-600 hover:text-teal-800 mb-4 flex items-center",children:[e.jsx("i",{className:"fa-solid fa-arrow-left mr-2"})," Back"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-teal-600 text-center",children:"THông tin chi tiết"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 border-b",children:"Tên sản phẩm"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Giá"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Chất lượng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Tổng giá"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Số seri"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Tên nhà cung cấp"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Tên danh mục"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Ngày tạo"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Ngày cập nhật"})]})}),e.jsx("tbody",{children:d.length>0?d.map(k=>{var B,q,V,x;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 border-b",children:k.product.productName||"N/A"}),e.jsx("td",{className:"py-2 px-4 border-b",children:ze(k.product.priceBuy||k.productPrice)}),e.jsx("td",{className:"py-2 px-4 border-b",children:k.product.quality}),e.jsx("td",{className:"py-2 px-4 border-b",children:ze(k.productPriceTotal)}),e.jsx("td",{className:"py-2 px-4 border-b",children:k.product.serialNumber||"N/A"}),e.jsxs("td",{className:"py-3 px-4 border-b",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Tên nhà cung cấp:"})," ",((B=N[k.product.supplierID])==null?void 0:B.supplierName)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Địa chỉ:"})," ",((q=N[k.product.supplierID])==null?void 0:q.supplierAddress)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mô tả:"})," ",((V=N[k.product.supplierID])==null?void 0:V.supplierDescription)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Số điện thoại liên hệ:"})," ",((x=N[k.product.supplierID])==null?void 0:x.contactNumber)||""]})]}),e.jsx("td",{className:"py-2 px-4 border-b",children:I[k.product.categoryID]||"N/A"}),e.jsx("td",{className:"py-2 px-4 border-b",children:Ke(k.product.createdAt)}),e.jsx("td",{className:"py-2 px-4 border-b",children:Ke(k.product.updatedAt)})]},k.productID)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-4",children:"No products found"})})})]})})]})]}):e.jsxs("div",{className:"lg:col-span-3 bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-teal-600 mb-6 text-center",children:"Đơn hàng của bạn"}),t.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No orders found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 border-b",children:"Mã đơn hàng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Mã nhà cung cấp"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Trạng thái"}),e.jsx("th",{className:"py-3 px-4 border-b hidden md:table-cell",children:"Địa chỉ giao hàng"}),e.jsx("th",{className:"py-3 px-4 border-b hidden lg:table-cell",children:"Phương thức giao hàng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Loại"}),e.jsx("th",{className:"py-3 px-4 border-b hidden sm:table-cell",children:"Ngày đặt hàng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Tổng số tiền"}),e.jsx("th",{className:"py-3 px-6 border-b",children:" "}),e.jsx("th",{className:"py-3 px-6 border-b",children:" "}),e.jsx("th",{className:"py-3 px-6 border-b",children:" "})]})}),e.jsx("tbody",{children:t.map(L)})]})})]}),f&&e.jsx(wc,{onClose:()=>u(!1)})]})]})},Vc=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(null),[u,d]=r.useState(1),[o,S]=r.useState(1),P=10,[I,T]=r.useState(null),[N,D]=r.useState(null);r.useEffect(()=>{(async()=>{a(!0);try{const l=I!==null?await $n(I,u,P):await Ys(u,P);console.log("API Result:",l),l&&l.isSuccess?Array.isArray(l.result)?(t(l.result),S(Math.ceil(l.result.length/P))):l.result.items?(t(l.result.items),S(l.result.totalPages>0?l.result.totalPages:1)):f("Không thể lấy chính sách."):f("Không thể lấy chính sách.")}catch(l){console.error("Error fetching policies:",l),f("Đã xảy ra lỗi khi lấy chính sách.")}a(!1)})()},[u,P,I]);const g=p=>{D(N===p?null:p)},w=()=>{u>1&&d(u-1)},A=()=>{u<o&&d(u+1)},F=p=>{T(I===p?null:p),d(1)};return e.jsxs("div",{children:[e.jsx("header",{className:"bg-gray-900 shadow p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"bg-teal-500 text-white px-3 py-1 rounded",children:"TRUNG TÂM TRỢ GIÚP"}),e.jsx("h1",{className:"text-4xl font-extrabold mt-2 text-white",children:"Chúng tôi có thể giúp gì cho bạn!"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx("img",{src:"https://thumb.ac-illust.com/96/96cdd9d61cb741de486486073b0f821a_t.jpeg",alt:"Đại diện hỗ trợ khách hàng",className:"rounded-full w-28 h-28 object-cover border-2 border-white shadow-lg"})})]})}),e.jsx("main",{className:"max-w-7xl mx-auto mt-10 px-4",children:e.jsxs("section",{className:"mt-10",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Các Chính Sách Hiện Có"}),e.jsxs("div",{className:"mb-6 flex space-x-2",children:[e.jsx("button",{onClick:()=>F(Xe.System),className:`px-5 py-2 rounded-full transition-colors duration-300 ${I===Xe.System?"bg-teal-600 text-white":"bg-gray-300 text-gray-700 hover:bg-teal-400 hover:text-white"}`,children:"HỆ THỐNG"}),e.jsx("button",{onClick:()=>F(Xe.Supplier),className:`px-5 py-2 rounded-full transition-colors duration-300 ${I===Xe.Supplier?"bg-teal-600 text-white":"bg-gray-300 text-gray-700 hover:bg-teal-400 hover:text-white"}`,children:"NHÀ CUNG CẤP"}),e.jsx("button",{onClick:()=>F(Xe.Member),className:`px-5 py-2 rounded-full transition-colors duration-300 ${I===Xe.Member?"bg-teal-600 text-white":"bg-gray-300 text-gray-700 hover:bg-teal-400 hover:text-white"}`,children:"THÀNH VIÊN"})]}),n?e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsxs("svg",{className:"animate-spin h-10 w-10 text-teal-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-label":"Loading",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),e.jsx("span",{className:"ml-3 text-teal-500 text-lg",children:"Đang tải..."})]}):c?e.jsx("p",{className:"text-red-600 text-center text-lg",role:"alert",children:c}):s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(p=>e.jsxs("li",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow hover:shadow-2xl transition-shadow duration-300",children:[e.jsx("h3",{className:"font-semibold text-2xl text-gray-800",children:p.policyContent}),e.jsx("button",{className:"mt-4 text-teal-500 hover:underline focus:outline-none focus:ring-2 focus:ring-teal-400 rounded transition-colors duration-300",onClick:()=>g(p.policyID),"aria-expanded":N===p.policyID,"aria-controls":`policy-details-${p.policyID}`,children:N===p.policyID?"Thu gọn":"Xem chi tiết"}),N===p.policyID&&e.jsxs("div",{id:`policy-details-${p.policyID}`,className:"mt-4 bg-gray-100 p-4 rounded-lg transition-all duration-300",children:[e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Loại chính sách:"})," ",ra(p.policyType)]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Hiệu lực:"})," ",new Date(p.effectiveDate).toLocaleString()]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"ID chính sách:"})," ",p.policyID]})]})]},p.policyID))}),e.jsxs("div",{className:"flex justify-center items-center mt-8 space-x-4",children:[e.jsx("button",{onClick:w,disabled:u===1,className:`px-5 py-2 rounded-full transition-colors duration-300 ${u===1?"bg-gray-300 cursor-not-allowed":"bg-teal-600 text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-400"}`,"aria-disabled":u===1,children:"Trước"}),e.jsxs("span",{className:"text-lg text-gray-700",children:["Trang ",u," / ",o]}),e.jsx("button",{onClick:A,disabled:u===o,className:`px-5 py-2 rounded-full transition-colors duration-300 ${u===o?"bg-gray-300 cursor-not-allowed":"bg-teal-600 text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-400"}`,"aria-disabled":u===o,children:"Tiếp theo"})]})]}):e.jsx("p",{className:"text-center text-gray-500 text-lg",children:"Không có chính sách nào để hiển thị."})]})})]})},{Title:gs,Paragraph:Ac}=ie,Fc=()=>{const{id:s}=Le(),[t,n]=r.useState(null),[a,c]=r.useState(!0),[f,u]=r.useState(!1),[d,o]=r.useState(""),[S,P]=r.useState(""),[I,T]=r.useState(""),[N,D]=r.useState(!1),[g,w]=r.useState([]),F=X(i=>i.user.user||{}).id,p=Re();r.useEffect(()=>{(async()=>{c(!0);try{const L=await ge(s);if(console.log("Product data:",L),L){n(L);const k=await be(L.supplierID,1,1),B=await Te(L.categoryID);if(console.log("Category data:",B),k&&k.result&&Array.isArray(k.result.items)&&k.result.items.length>0){const V=k.result.items[0];P(V.supplierName)}if(B&&B.result){const V=B.result;T(V.categoryName),console.log("Category name:",V.categoryName)}else console.log("Category data is not in the expected format or is empty.");const q=await rc(s,1,10);q&&q.result&&w(q.result)}}catch(L){console.error("Failed to load product:",L),h.error("Failed to load product. Please try again later.")}finally{c(!1)}})()},[s]);const l=i=>{o(i),u(!0)},v=()=>{u(!1),o("")},m=i=>{p("/create-order-rent",{state:{productID:i.productID,supplierID:i.supplierID,product:i}})},j=i=>{p("/create-order-buy",{state:{productID:i.productID,supplierID:i.supplierID,product:i}})},b=async()=>{try{const i={accountId:F,productID:t.productID};await _s(i)?(h.success("Product added to wishlist!"),D(!0)):h.error("Failed to add product to wishlist.")}catch(i){console.error("Error adding product to wishlist:",i),h.error("Failed to add product to wishlist.")}};return a?e.jsx(te,{size:"large",className:"flex justify-center mt-10"}):e.jsxs("div",{className:"container mx-auto p-6",children:[t&&e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/2 mb-4 md:mb-0 flex justify-center",children:e.jsx("div",{className:"flex flex-col h-full",children:t.listImage&&t.listImage.length>0?e.jsx("img",{src:t.listImage[0].image,alt:t.productName,className:"w-full h-auto cursor-pointer rounded-lg shadow-md",onClick:()=>l(t.listImage[0].image)}):e.jsx("div",{className:"w-full h-auto cursor-pointer rounded-lg shadow-md bg-gray-200 flex items-center justify-center",children:e.jsx("span",{children:"No Image Available"})})})}),e.jsx("div",{className:"md:w-1/2 md:pl-6 flex justify-center",children:e.jsxs(Q,{className:"shadow-lg rounded-lg w-full h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(gs,{level:2,className:"text-center text-lg font-bold",children:t.productName}),e.jsx("button",{onClick:b,className:"focus:outline-none",children:N?e.jsx(Ft,{size:24,className:"text-red-500"}):e.jsx(Lt,{size:24,className:"text-gray-500"})})]}),e.jsx(Ac,{className:"text-center",children:t.productDescription}),e.jsxs("div",{className:"text-center",children:[t.priceRent!=null&&e.jsxs("p",{className:"font-bold",children:["Giá thuê:"," ",e.jsxs("span",{className:"text-green-500",children:["VND/giờ ",t.priceRent.toFixed(2)]})]}),t.priceBuy!=null&&e.jsxs("p",{className:"font-bold",children:["Giá mua:"," ",e.jsxs("span",{className:"text-green-500",children:["VND ",t.priceBuy.toFixed(2)]})]}),t.depositProduct!=null&&e.jsxs("p",{className:"font-bold",children:["Tiền đặt cọc:"," ",e.jsxs("span",{className:"text-red-500",children:["VND ",t.depositProduct.toFixed(2)]})]}),t.pricePerDay!=null&&e.jsxs("p",{className:"font-bold",children:["Giá thuê theo ngày:"," ",e.jsxs("span",{className:"text-green-500",children:["VND/ngày ",t.pricePerDay.toFixed(2)]})]}),t.pricePerHour!=null&&e.jsxs("p",{className:"font-bold",children:["Giá thuê theo giờ:"," ",e.jsxs("span",{className:"text-green-500",children:["VND/giờ ",t.pricePerHour.toFixed(2)]})]}),t.pricePerMonth!=null&&e.jsxs("p",{className:"font-bold",children:["Giá thuê theo tháng:"," ",e.jsxs("span",{className:"text-green-500",children:["VND/tháng ",t.pricePerMonth.toFixed(2)]})]}),t.pricePerWeek!=null&&e.jsxs("p",{className:"font-bold",children:["Giá thuê theo tuần:"," ",e.jsxs("span",{className:"text-green-500",children:["VND/tuần ",t.pricePerWeek.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Thương hiệu:"})," ",ue(t.brand)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nhà cung cấp:"})," ",S]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Danh mục:"})," ",I]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx("strong",{children:"Tình trạng:"})," ",e.jsx("span",{className:t.status===0?"text-green-600":t.status===1?"text-blue-600":t.status===3?"text-gray-600":"text-orange-600",children:Fe(t.status)||"Unknown Status"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Chất lượng:"})," ",t.quality]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial Number:"})," ",t.serialNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ngày tạo:"})," ",new Date(t.createdAt).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ngày cập nhật:"})," ",new Date(t.updatedAt).toLocaleString()]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(gs,{level:4,children:"Đánh giá "}),g.length>0?g.map(i=>e.jsxs("div",{className:"mb-4 p-4 border rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ot,{disabled:!0,defaultValue:i.ratingValue}),e.jsxs("span",{className:"ml-2 text-gray-600",children:[i.ratingValue," / 5"]})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(_r,{className:"text-gray-600 mr-2"}),e.jsx("p",{className:"text-gray-800",children:i.reviewComment})]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[e.jsx("strong",{children:"Date:"})," ",new Date(i.createdAt).toLocaleString()]})]},i.ratingID)):e.jsxs("div",{className:"flex items-center justify-center text-gray-500 mt-4",children:[e.jsx(Jr,{size:24,className:"mr-2"}),e.jsx("p",{children:"Sản phẩm chưa có đánh giá!"})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-4",children:[t.status===0&&e.jsx(H,{type:"default",onClick:()=>j(t),className:"bg-primary text-white hover:bg-opacity-80 transition duration-200",children:"Đặt hàng ngay"}),t.status===1&&e.jsx(H,{type:"primary",onClick:()=>m(t),className:"bg-mainColor hover:bg-opacity-80 transition duration-200",children:"Thuê ngay"})]})]})})]}),e.jsx(re,{title:t==null?void 0:t.productName,open:f,footer:null,onCancel:v,width:800,children:t&&e.jsx("img",{src:d,alt:t.productName,className:"w-full h-auto"})})]})},{Content:Lc}=De,{Title:Ec}=ie,{Search:$c}=Y,Rc=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(""),[u,d]=r.useState(""),[o,S]=r.useState(""),[P,I]=r.useState(""),T=Re(),{id:N}=Le(),D=async()=>{a(!0);try{const l=await Ee(1,20);l?t(l):h.error("Failed to load products.")}catch{h.error("An error occurred while fetching products.")}finally{a(!1)}};r.useEffect(()=>{D(),N&&g()},[N]);const g=async()=>{a(!0);try{const l=await ge(N);if(l){t([l]),t([l]);const v=await be(l.supplierID),m=await Te(l.categoryID);if(v&&v.result&&v.result.items.length>0){const j=v.result.items[0];S(j.supplierName)}if(m&&m.result&&m.result.items.length>0){const j=m.result.items[0];I(j.categoryName)}}}catch{h.error("An error occurred while loading the product.")}finally{a(!1)}},w=async l=>{a(!0),d(l);try{const v=await Nt(l,1,20);v?t(v):(h.error("No products found."),t([]))}catch{h.error("An error occurred while searching for products.")}finally{a(!1)}},A=()=>{d(""),f(""),D()},F=l=>{switch(l){case 0:return"text-green-500";case 1:return"text-blue-500";case 2:return"text-yellow-500";case 3:return"text-red-500";case 4:return"text-gray-500";default:return"text-black"}},p=s.filter(l=>l.status===0);return e.jsx(De,{children:e.jsxs(Lc,{className:"p-6",children:[e.jsx(Ec,{level:2,className:"text-center mb-6 text-mainColor",children:"Trang Sản Phẩm"}),e.jsxs("div",{className:"flex justify-center mb-6",children:[e.jsx($c,{className:"w-1/2",placeholder:"Tìm kiếm sản phẩm",enterButton:!0,value:u,onSearch:w,onChange:l=>d(l.target.value),style:{borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},suffix:e.jsx($e,{})}),e.jsx(H,{onClick:A,className:"ml-4 rounded-lg shadow-lg transition duration-200 hover:bg-gray-200",style:{backgroundColor:"#f0f0f0",border:"none"},children:"Xóa Tìm Kiếm"})]}),n?e.jsxs("div",{className:"flex flex-col items-center mt-10",children:[e.jsx(te,{size:"large"}),e.jsx("p",{className:"mt-4 text-lg",children:"Đang tải sản phẩm..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(l=>e.jsxs(Q,{className:"shadow-lg rounded-lg hover:shadow-xl transition-shadow duration-200",cover:l.listImage.length>0?e.jsx("img",{src:l.listImage[0].image,alt:l.productName,className:"w-full object-cover h-64 rounded-t-lg"}):e.jsx("img",{src:"https://placehold.co/300x200",alt:"Placeholder for product image",className:"w-full object-cover h-64 rounded-t-lg"}),children:[e.jsx(Q.Meta,{title:e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:"text-lg font-semibold",children:l.productName})})}),e.jsxs("div",{className:"mt-2 p-4",children:[e.jsx("p",{className:"text-gray-700 text-left",children:l.productDescription}),l.priceRent!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá thuê: VND/giờ ",l.priceRent.toFixed(2)]}),l.priceBuy!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá mua: VND ",l.priceBuy.toFixed(2)]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Ue,{className:"inline mr-1"}),"Thương hiệu: ",ue(l.brand)]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Chất lượng: ",l.quality]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Trạng thái:"," ",e.jsx("span",{className:F(l.status),children:Fe(l.status)})]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Yt,{className:"inline mr-1"}),"Đánh giá: ",l.rating]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Số Serial: ",l.serialNumber]}),e.jsxs("p",{className:"text-left",children:[e.jsx(Ms,{className:"inline mr-1"}),e.jsx("strong",{children:"Nhà cung cấp:"})," ",o]}),e.jsxs("p",{className:"text-left",children:[e.jsx(Vs,{className:"inline mr-1"}),e.jsx("strong",{children:"Danh mục:"})," ",P]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Gt,{className:"inline mr-1"}),"Ngày tạo: ",new Date(l.createdAt).toLocaleString()]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Qe,{className:"inline mr-1"}),"Ngày cập nhật:"," ",new Date(l.updatedAt).toLocaleString()]}),e.jsx(H,{type:"primary",onClick:()=>T(`/product/${l.productID}`),className:"mt-2 rounded-lg transition duration-200 hover:bg-blue-600",children:"Xem Chi Tiết"})]})]},l.productID))})]})})},{Content:Hc}=De,{Title:Oc}=ie,{Search:Bc}=Y,Yc=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(""),[u,d]=r.useState("");r.useState(""),r.useState("");const o=Re();Le();const S=async()=>{a(!0);try{const g=await Ee(1,20);if(g){const w=await Promise.all(g.map(async A=>{var l,v,m,j;const F=await be(A.supplierID),p=await Te(A.categoryID);return{...A,supplierName:((m=(v=(l=F==null?void 0:F.result)==null?void 0:l.items)==null?void 0:v[0])==null?void 0:m.supplierName)||"Unknown",categoryName:((j=p==null?void 0:p.result)==null?void 0:j.categoryName)||"Unknown"}}));t(w)}else h.error("Failed to load products.")}catch(g){console.error("Error fetching products:",g),h.error("An error occurred while fetching products.")}finally{a(!1)}};r.useEffect(()=>{S()},[]);const P=async g=>{a(!0),d(g);try{const w=await Nt(g,1,20);w?t(w):(h.error("No products found."),t([]))}catch{h.error("An error occurred while searching for products.")}finally{a(!1)}},I=()=>{d(""),f(""),S()},T=g=>{switch(g){case 0:return"text-green-500";case 1:return"text-blue-500";case 2:return"text-yellow-500";case 3:return"text-red-500";case 4:return"text-gray-500";default:return"text-black"}},N=g=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(g),D=s.filter(g=>g.status===0);return e.jsx(De,{children:e.jsxs(Hc,{className:"p-6",children:[e.jsx(Oc,{level:2,className:"text-center mb-6 text-mainColor",children:"Trang Sản Phẩm"}),e.jsxs("div",{className:"flex justify-center mb-6",children:[e.jsx(Bc,{className:"w-1/2",placeholder:"Tìm kiếm sản phẩm",enterButton:!0,value:u,onSearch:P,onChange:g=>d(g.target.value),style:{borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},suffix:e.jsx($e,{})}),e.jsx(H,{onClick:I,className:"ml-4 rounded-lg shadow-lg transition duration-200 hover:bg-gray-200",style:{backgroundColor:"#f0f0f0",border:"none"},children:"Xóa Tìm Kiếm"})]}),n?e.jsxs("div",{className:"flex flex-col items-center mt-10",children:[e.jsx(te,{size:"large"}),e.jsx("p",{className:"mt-4 text-lg",children:"Đang tải sản phẩm..."})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(g=>e.jsxs(Q,{className:"shadow-lg rounded-lg hover:shadow-xl transition-shadow duration-200",cover:g.listImage.length>0?e.jsx("img",{src:g.listImage[0].image,alt:g.productName,className:"w-full object-cover h-64 rounded-t-lg"}):e.jsx("img",{src:"https://placehold.co/300x200",alt:"Placeholder for product image",className:"w-full object-cover h-64 rounded-t-lg"}),children:[e.jsx(Q.Meta,{title:e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:"text-lg font-semibold",children:g.productName})})}),e.jsxs("div",{className:"mt-2 p-4",children:[e.jsx("p",{className:"text-gray-700 text-left",children:g.productDescription}),g.priceBuy!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá mua: ",N(g.priceBuy)]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Ue,{className:"inline mr-1"}),"Thương hiệu: ",ue(g.brand)]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Chất lượng: ",g.quality]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Trạng thái:"," ",e.jsx("span",{className:T(g.status),children:Fe(g.status)})]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Yt,{className:"inline mr-1"}),"Đánh giá: ",g.rating]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Số Serial: ",g.serialNumber]}),e.jsxs("p",{className:"text-left",children:[e.jsx(Ms,{className:"inline mr-1"}),e.jsx("strong",{children:"Nhà cung cấp:"})," ",g.supplierName]}),e.jsxs("p",{className:"text-left",children:[e.jsx(Vs,{className:"inline mr-1"}),e.jsx("strong",{children:"Danh mục:"})," ",g.categoryName]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Gt,{className:"inline mr-1"}),"Ngày tạo: ",new Date(g.createdAt).toLocaleString()]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Qe,{className:"inline mr-1"}),"Ngày cập nhật:"," ",new Date(g.updatedAt).toLocaleString()]}),e.jsx(H,{type:"primary",onClick:()=>o(`/product/${g.productID}`),className:"mt-2 rounded-lg transition duration-200 hover:bg-blue-600",children:"Xem Chi Tiết"})]})]},g.productID))})]})})},{Content:Gc}=De,{Title:qc}=ie,{Search:zc}=Y,Kc=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(""),u=Re();Le();const[d,o]=r.useState(1),[S,P]=r.useState(0),I=20,T=p=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p),N=async()=>{a(!0);try{const p=await Ee(1,20);if(p){const l=await Promise.all(p.map(async v=>{var b,i,L,k;const m=await be(v.supplierID),j=await Te(v.categoryID);return{...v,supplierName:((L=(i=(b=m==null?void 0:m.result)==null?void 0:b.items)==null?void 0:i[0])==null?void 0:L.supplierName)||"Unknown",categoryName:((k=j==null?void 0:j.result)==null?void 0:k.categoryName)||"Unknown"}}));t(l)}else h.error("Failed to load products.")}catch(p){console.error("Error fetching products:",p),h.error("An error occurred while fetching products.")}finally{a(!1)}};r.useEffect(()=>{N()},[]);const D=async p=>{a(!0),f(p);try{const l=await Nt(p,1,20);if(l){const v=await Promise.all(l.map(async m=>{var i,L,k,B,q,V;const j=await be(m.supplierID),b=await Te(m.categoryID);return{...m,supplierName:((k=(L=(i=j==null?void 0:j.result)==null?void 0:i.items)==null?void 0:L[0])==null?void 0:k.supplierName)||"Unknown",categoryName:((V=(q=(B=b==null?void 0:b.result)==null?void 0:B.items)==null?void 0:q[0])==null?void 0:V.categoryName)||"Unknown"}}));t(v)}else h.error("No products found."),t([])}catch(l){console.error("Error searching products:",l),h.error("An error occurred while searching for products.")}finally{a(!1)}},g=()=>{f(""),N()},w=p=>{switch(p){case 0:return"text-green-500";case 1:return"text-blue-500";case 2:return"text-yellow-500";case 3:return"text-red-500";case 4:return"text-gray-500";default:return"text-black"}},A=p=>{o(p)},F=s.filter(p=>p.status===1);return e.jsx(De,{children:e.jsxs(Gc,{className:"p-6",children:[e.jsx(qc,{level:2,className:"text-center mb-6 text-mainColor",children:"Trang Sản Phẩm"}),e.jsxs("div",{className:"flex justify-center mb-6",children:[e.jsx(zc,{className:"w-1/2",placeholder:"Tìm kiếm sản phẩm",enterButton:!0,value:c,onSearch:D,onChange:p=>f(p.target.value),style:{borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},suffix:e.jsx($e,{})}),e.jsx(H,{onClick:g,className:"ml-4 rounded-lg shadow-lg transition duration-200 hover:bg-gray-200",style:{backgroundColor:"#f0f0f0",border:"none"},children:"Xóa Tìm Kiếm"})]}),n?e.jsxs("div",{className:"flex flex-col items-center mt-10",children:[e.jsx(te,{size:"large"}),e.jsx("p",{className:"mt-4 text-lg",children:"Đang tải sản phẩm..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(p=>e.jsxs(Q,{className:"shadow-lg rounded-lg hover:shadow-xl transition-shadow duration-200",cover:p.listImage.length>0?e.jsx("img",{src:p.listImage[0].image,alt:p.productName,className:"w-full object-cover h-64 rounded-t-lg"}):e.jsx("img",{src:"https://placehold.co/300x200",alt:"Placeholder for product image",className:"w-full object-cover h-64 rounded-t-lg"}),children:[e.jsx(Q.Meta,{title:e.jsx("div",{className:"flex justify-center",children:e.jsx("span",{className:"text-lg font-semibold",children:p.productName})})}),e.jsxs("div",{className:"mt-2 p-4",children:[e.jsx("p",{className:"text-gray-700 text-left",children:p.productDescription}),p.depositProduct!=null&&e.jsxs("p",{className:"font-bold text-left text-red-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá Cọc: ",T(p.depositProduct)]}),p.pricePerHour!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá thuê: ",T(p.pricePerHour),"/giờ"]}),p.pricePerDay!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá thuê: ",T(p.pricePerDay),"/ngày"]}),p.pricePerWeek!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá thuê: ",T(p.pricePerWeek),"/tuần"]}),p.pricePerMonth!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá thuê: ",T(p.pricePerMonth),"/tháng"]}),p.priceBuy!=null&&e.jsxs("p",{className:"font-bold text-left text-green-500",children:[e.jsx(fe,{className:"inline mr-1"}),"Giá mua: ",T(p.priceBuy)]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Ue,{className:"inline mr-1"}),"Thương hiệu: ",ue(p.brand)]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Chất lượng: ",p.quality]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Trạng thái:"," ",e.jsx("span",{className:w(p.status),children:Fe(p.status)})]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Yt,{className:"inline mr-1"}),"Đánh giá: ",p.rating]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(ae,{className:"inline mr-1"}),"Số Serial: ",p.serialNumber]}),e.jsxs("p",{className:"text-left",children:[e.jsx(Zr,{className:"inline mr-1"}),e.jsx("strong",{children:"Nhà cung cấp:"})," ",p.supplierName]}),e.jsxs("p",{className:"text-left",children:[e.jsx(en,{className:"inline mr-1"}),e.jsx("strong",{children:"Danh mục:"})," ",p.categoryName]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Gt,{className:"inline mr-1"}),"Ngày tạo: ",new Date(p.createdAt).toLocaleString()]}),e.jsxs("p",{className:"font-semibold text-left",children:[e.jsx(Qe,{className:"inline mr-1"}),"Ngày cập nhật:"," ",new Date(p.updatedAt).toLocaleString()]}),e.jsx(H,{type:"primary",onClick:()=>u(`/product/${p.productID}`),className:"mt-2 rounded-lg transition duration-200 hover:bg-blue-600",children:"Xem Chi Tiết"})]})]},p.productID))}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(Me,{current:d,pageSize:I,total:S,onChange:A,showSizeChanger:!1})})]})]})})},Wc=async(s,t)=>{try{return(await G.get("/dashboard/best-selling-categories",{params:{startDate:s,endDate:t}})).data}catch(n){throw console.error("Error fetching best selling categories:",n),n}},Uc=async(s,t,n)=>{try{return(await G.get(`/dashboard/best-selling-categories-by-supplier/${s}`,{params:{startDate:t,endDate:n}})).data}catch(a){throw console.error(`Error fetching best selling categories for supplier ${s}:`,a),a}},Qc=async s=>{try{return(await G.get(`/dashboard/get-supplier-product-statistics/${s}`)).data}catch(t){throw console.error(`Error fetching product statistics for supplier ${s}:`,t),t}},Xc=async(s,t,n)=>{try{return(await G.get(`/dashboard/get-month-order-cost-statistics/${s}`,{params:{startDate:t,endDate:n}})).data}catch(a){throw console.error(`Error fetching month order cost statistics for supplier ${s}:`,a),a}},_c=async(s,t,n)=>{try{return(await G.get(`/dashboard/get-account-order-statistics/${s}`,{params:{startDate:t,endDate:n}})).data}catch(a){throw console.error(`Error fetching order statistics for account ${s}:`,a),a}},Jc=async(s,t,n)=>{try{return(await G.get(`/dashboard/get-supplier-order-statistics/${s}`,{params:{startDate:t,endDate:n}})).data}catch(a){throw console.error(`Error fetching order statistics for supplier ${s}:`,a),a}},Zc=async s=>{try{return(await G.get(`/dashboard/get-calculate-total-revenue-by-supplier/${s}`)).data}catch(t){throw console.error(`Error calculating total revenue for supplier ${s}:`,t),t}},el=async(s,t,n)=>{try{return(await G.get(`/dashboard/get-calculate-monthly-revenue-by-supplier/${s}`,{params:{startDate:t,endDate:n}})).data}catch(a){throw console.error(`Error calculating monthly revenue for supplier ${s}:`,a),a}},tr=({accountId:s,startDate:t,endDate:n})=>{const[a,c]=r.useState([]),[f,u]=r.useState(!0);r.useEffect(()=>{s&&t&&n&&(async()=>{try{const S=await _c(s,t,n);c(S)}catch(S){console.error("Failed to fetch order statistics:",S)}finally{u(!1)}})()},[s,t,n]);const d=[{title:"Order ID",dataIndex:"orderId",key:"orderId"},{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Date",dataIndex:"date",key:"date"}];return e.jsx(e.Fragment,{children:f?e.jsx("div",{children:"Loading..."}):e.jsx(se,{dataSource:a,columns:d,rowKey:"orderId"})})},sr=({startDate:s,endDate:t})=>{const[n,a]=r.useState([]),[c,f]=r.useState(!0);r.useEffect(()=>{s&&t&&(async()=>{try{const o=await Wc(s,t);a(o)}catch(o){console.error(o)}finally{f(!1)}})()},[s,t]);const u={labels:n.map(d=>d.name),datasets:[{label:"Sales",data:n.map(d=>d.sales),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]};return c?e.jsx("div",{children:"Loading..."}):e.jsx(As,{data:u})},rr=({supplierId:s,startDate:t,endDate:n})=>{const[a,c]=r.useState([]),[f,u]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const S=await Uc(s,t,n);c(S)}catch(S){console.error(S)}finally{u(!1)}})()},[s,t,n]);const d={labels:a.map(o=>o.name),datasets:[{label:"Sales",data:a.map(o=>o.sales),backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]};return f?e.jsx("div",{children:"Loading..."}):e.jsx(As,{data:d})},nr=({supplierId:s,startDate:t,endDate:n})=>{const[a,c]=r.useState([]),[f,u]=r.useState(!0);r.useEffect(()=>{s&&t&&n&&(async()=>{try{const S=await Xc(s,t,n);c(S)}catch(S){console.error("Error fetching monthly costs:",S)}finally{u(!1)}})()},[s,t,n]);const d={labels:a.map(o=>o.month),datasets:[{label:"Order Cost",data:a.map(o=>o.cost),fill:!1,borderColor:"rgba(255, 99, 132, 1)",tension:.1}]};return f?e.jsx("div",{children:"Loading..."}):e.jsx(Fs,{data:d})},ar=({supplierId:s,startDate:t,endDate:n})=>{const[a,c]=r.useState([]),[f,u]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const S=await el(s,t,n);c(S)}catch(S){console.error(S)}finally{u(!1)}})()},[s,t,n]);const d={labels:a.map(o=>o.month),datasets:[{label:"Revenue",data:a.map(o=>o.revenue),fill:!1,borderColor:"rgba(255, 206, 86, 1)",tension:.1}]};return f?e.jsx("div",{children:"Loading..."}):e.jsx(Fs,{data:d})},cr=({supplierId:s,startDate:t,endDate:n})=>{const[a,c]=r.useState([]),[f,u]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const S=await Jc(s,t,n);c(S)}catch(S){console.error(S)}finally{u(!1)}})()},[s,t,n]);const d=[{title:"Order ID",dataIndex:"orderId",key:"orderId"},{title:"Amount",dataIndex:"amount",key:"amount"},{title:"Date",dataIndex:"date",key:"date"}];return f?e.jsx("div",{children:"Loading..."}):e.jsx(se,{dataSource:a,columns:d})},lr=({supplierId:s})=>{const[t,n]=r.useState([]),[a,c]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const d=await Qc(s);n(d)}catch(d){console.error(d)}finally{c(!1)}})()},[s]);const f=[{title:"Product Name",dataIndex:"name",key:"name"},{title:"Sales",dataIndex:"sales",key:"sales"}];return a?e.jsx("div",{children:"Loading..."}):e.jsx(se,{dataSource:t,columns:f})},ir=({supplierId:s})=>{const[t,n]=r.useState(0),[a,c]=r.useState(!0);return r.useEffect(()=>{(async()=>{try{const u=await Zc(s);n(u)}catch(u){console.error(u)}finally{c(!1)}})()},[s]),a?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:["Total Revenue: ",t]})},{RangePicker:tl}=we,sl=()=>{var F,p,l,v,m,j,b,i,L,k,B,q;const s=X(V=>V.user.user||{}),t=s.id,n=s.supplierID,[a,c]=r.useState([]),[f,u]=r.useState(!1),[d,o]=r.useState(1),[S,P]=r.useState(10),[I,T]=r.useState(0),[N,D]=r.useState([null,null]);r.useEffect(()=>{const V=async(x,y,E,K)=>{u(!0);try{const W=await Xt(n,x,y,E,K);W&&W.isSuccess?(c(Array.isArray(W.result)?W.result:[]),T(W.totalCount||0)):h.error("No vouchers available.")}catch{h.error("Failed to fetch vouchers.")}u(!1)};if(n){const[x,y]=N;V(d,S,x?x.format("YYYY-MM-DD"):null,y?y.format("YYYY-MM-DD"):null)}},[n,d,S,N]);const g=V=>{D(V),o(1)},w=[{title:"Voucher ID",dataIndex:"id",key:"id"},{title:"Voucher Name",dataIndex:"name",key:"name"},{title:"Voucher Value",dataIndex:"value",key:"value"}],A=V=>{o(V.current),P(V.pageSize)};return e.jsxs("div",{children:[e.jsx("h1",{children:"Dashboard Admin"}),e.jsx(tl,{onChange:g,format:"YYYY-MM-DD",style:{marginBottom:16}}),e.jsxs(J,{gutter:16,children:[" ",e.jsxs(U,{span:12,children:[" ",e.jsx(sr,{startDate:(F=N[0])==null?void 0:F.format("YYYY-MM-DD"),endDate:(p=N[1])==null?void 0:p.format("YYYY-MM-DD")}),e.jsx(rr,{supplierId:n,startDate:(l=N[0])==null?void 0:l.format("YYYY-MM-DD"),endDate:(v=N[1])==null?void 0:v.format("YYYY-MM-DD")}),e.jsx(lr,{supplierId:n})]}),e.jsxs(U,{span:12,children:[" ",e.jsx(nr,{supplierId:n,startDate:(m=N[0])==null?void 0:m.format("YYYY-MM-DD"),endDate:(j=N[1])==null?void 0:j.format("YYYY-MM-DD")}),e.jsx(tr,{accountId:t,startDate:(b=N[0])==null?void 0:b.format("YYYY-MM-DD"),endDate:(i=N[1])==null?void 0:i.format("YYYY-MM-DD")}),e.jsx(cr,{supplierId:n,startDate:(L=N[0])==null?void 0:L.format("YYYY-MM-DD"),endDate:(k=N[1])==null?void 0:k.format("YYYY-MM-DD")}),e.jsx(ir,{supplierId:n}),e.jsx(ar,{supplierId:n,startDate:(B=N[0])==null?void 0:B.format("YYYY-MM-DD"),endDate:(q=N[1])==null?void 0:q.format("YYYY-MM-DD")})]})]}),e.jsx("h2",{children:"Vouchers"}),f?e.jsx(te,{tip:"Loading vouchers..."}):e.jsx(se,{dataSource:a,columns:w,rowKey:"id",pagination:{current:d,pageSize:S,total:I,showSizeChanger:!0},onChange:A})]})},rl=async s=>{try{return(await G.get("/contractTemplate/get-contract-template-by-product-id",{params:{productID:s}})).data.result.items}catch(t){throw console.error("Error fetching contract templates by product ID:",t),t}},nl=async s=>{try{return(await G.post("/contractTemplate/create-contract-template",s)).data}catch(t){throw console.error("Error creating contract template:",t),t}},al=async(s,t)=>{try{return(await G.put("/contractTemplate/update-contract-template-by-id",t,{params:{contractTemplateId:s}})).data}catch(n){throw console.error("Error updating contract template:",n),n}},cl=async s=>{try{return(await G.delete("/contractTemplate/delete-contract-template-by-id",{params:{contractTemplateId:s}})).data}catch(t){throw console.error("Error deleting contract template:",t),t}},ll=async s=>{try{return(await G.get("/contractTemplate/get-contract-template-by-id",{params:{contractTemplateId:s}})).data}catch(t){throw console.error("Error fetching contract template by ID:",t),t}},il=async(s=1,t=10)=>{try{return(await G.get("/contractTemplate/get-all-contract-templates",{params:{pageIndex:s,pageSize:t}})).data}catch(n){throw console.error("Error fetching all contract templates:",n),n}},ol=({shippingAddress:s,setShippingAddress:t,deliveryMethod:n,setDeliveryMethod:a,supplierInfo:c})=>{const f=d=>{console.log("Selected delivery method:",d.target.value),a(d.target.value)},u=d=>{t(d.target.value)};return e.jsxs(Q,{title:"Phương thức giao hàng",bordered:!1,children:[e.jsx(C.Item,{label:"Chọn phương thức giao hàng",rules:[{required:!0,message:"Vui lòng chọn phương thức giao hàng!"}],children:e.jsxs(Ge.Group,{onChange:f,value:n,children:[e.jsx(Ge,{value:0,children:"Nhận tại cửa hàng"}),e.jsx(Ge,{value:1,children:"Giao hàng tận nơi"})]})}),n===1&&e.jsx(C.Item,{label:"Địa chỉ giao hàng",name:"shippingAddress",rules:[{required:!0,message:"Vui lòng nbsp địa chỉ giao hàng!"}],children:e.jsx(Y,{value:s,onChange:u})}),n===0&&c&&e.jsxs($,{bordered:!0,children:[e.jsx($.Item,{label:"Tên nhà cung cấp",children:c.supplierName}),e.jsx($.Item,{label:"Số điện thoại",children:c.contactNumber}),e.jsx($.Item,{label:"Địa chỉ nhà cung cấp",children:c.supplierAddress})]})]})},dl=({totalAmount:s,depositProduct:t,productPriceRent:n,selectedVoucherDetails:a})=>e.jsx(Q,{title:"Xác nhận đơn hàng",bordered:!1,children:e.jsxs($,{bordered:!0,column:1,children:[e.jsx($.Item,{label:"Giá thuê sản phẩm",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n)}),e.jsx($.Item,{label:"Tiền cọc sản phẩm",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t)}),a&&e.jsx($.Item,{label:"Mã Voucher",children:a.vourcherCode}),a&&e.jsx($.Item,{label:"Số tiền giảm",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(a.discountAmount)}),e.jsx($.Item,{label:"Tổng số tiền",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s)})]})}),hl=({product:s,form:t,deliveryMethod:n,supplierInfo:a,selectedVoucherDetails:c,totalAmount:f,contractTemplate:u,loading:d,depositProduct:o,productPriceRent:S})=>{const P=f;return e.jsxs("div",{children:[e.jsx("h3",{children:"Xem lại đơn hàng của bạn"}),e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:24,children:e.jsx(Q,{title:"Thông tin sản phẩm",bordered:!1,style:{marginBottom:"24px"},children:d?e.jsx(te,{tip:"Đang tải thông tin sản phẩm..."}):s?e.jsxs(e.Fragment,{children:[e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsxs($,{column:1,bordered:!0,children:[e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ue,{})," Mã sản phẩm"]}),children:s.productID}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Tên"]}),children:s.productName}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," Mô tả"]}),children:s.productDescription}),e.jsxs($.Item,{label:e.jsxs("span",{children:[e.jsx(fe,{})," Giá thuê"]}),children:[e.jsxs("div",{style:{color:"#1890ff"},children:[e.jsx("strong",{children:"Ngày:"})," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerDay)]}),e.jsxs("div",{style:{color:"#52c41a"},children:[e.jsx("strong",{children:"Giờ: "})," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerHour)]}),e.jsxs("div",{style:{color:"#faad14"},children:[e.jsx("strong",{children:"Tuần:"})," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerWeek)]}),e.jsxs("div",{style:{color:"#f5222d"},children:[e.jsx("strong",{children:"Tháng:"})," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerMonth)]})]}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Chất lượng"]}),children:s.quality})]})}),e.jsx(U,{span:12,children:e.jsx(Q,{title:e.jsxs("span",{children:[e.jsx(Bt,{})," Hình ảnh sản phẩm"]}),bordered:!1,children:e.jsx("div",{className:"flex flex-wrap mt-2",children:s.listImage&&s.listImage.length>0?s.listImage.map((I,T)=>e.jsx("img",{src:I.image,alt:`Hình ảnh sản phẩm ${T+1}`,className:"w-24 h-24 mr-2 mb-2 object-cover",style:{width:"100px",height:"100px",objectFit:"cover",margin:"4px"}},I.productImagesID)):e.jsx("p",{children:"Không có hình ảnh cho sản phẩm này."})})})})]}),u&&u.length>0&&e.jsx(Q,{title:"Điều khoản hợp đồng",bordered:!1,style:{marginTop:"24px"},children:e.jsx(J,{gutter:16,children:e.jsx(U,{span:24,children:e.jsx($,{column:1,bordered:!0,children:u.map(I=>e.jsxs($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," ",I.templateName]}),children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Điều khoản hợp đồng:"})," ",I.contractTerms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Chính sách phạt:"})," ",I.penaltyPolicy]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Chi tiết mẫu:"})," ",I.templateDetails]})]},I.contractTemplateID))})})})})]}):e.jsx("p",{children:"Không tìm thấy thông tin sản phẩm."})})}),e.jsx(U,{span:24,children:e.jsx(Q,{title:"Thông tin giao hàng",bordered:!1,style:{marginBottom:"16px"},children:e.jsxs($,{bordered:!0,column:1,children:[e.jsx($.Item,{label:"Phương thức giao hàng",children:n===0?"Nhận tại cửa hàng":"Giao hàng tận nơi"}),n===1&&e.jsx($.Item,{label:"Địa chỉ giao hàng",children:t.getFieldValue("shippingAddress")}),n===0&&a&&e.jsxs(e.Fragment,{children:[e.jsx($.Item,{label:"Tên nhà cung cấp",children:a.supplierName}),e.jsx($.Item,{label:"Số điện thoại",children:a.contactNumber}),e.jsx($.Item,{label:"Địa chỉ nhà cung cấp",children:a.supplierAddress})]})]})})}),e.jsxs(U,{span:24,children:[e.jsx(Q,{title:"Chi tiết Voucher",bordered:!1,style:{marginBottom:"24px"},children:c?e.jsxs($,{bordered:!0,column:1,children:[e.jsx($.Item,{label:"Mã Voucher",children:c.vourcherCode}),e.jsx($.Item,{label:"Mô tả",children:c.description}),e.jsx($.Item,{label:"Số tiền giảm",children:c.discountAmount})]}):e.jsx("p",{children:"Không có voucher được chọn."})}),e.jsx("div",{style:{marginTop:"16px",width:"100%",textAlign:"center"},children:e.jsxs(Q,{bordered:!1,style:{backgroundColor:"#f6f8fa",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx("strong",{style:{fontSize:"16px",color:"#333"},children:"Giá thuê sản phẩm:"}),e.jsx("div",{style:{fontSize:"24px",color:"#52c41a",marginTop:"8px"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(S)})]})}),e.jsx(Q,{title:"Tổng kết đơn hàng",bordered:!1,style:{marginTop:"16px"},children:e.jsxs($,{bordered:!0,column:1,children:[e.jsx($.Item,{label:"Tiền cọc sản phẩm",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(o)}),e.jsx($.Item,{label:"Tổng số tiền",children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(P)})]})})]})]})]})},{Option:ht}=Z,ul=({product:s,contractTemplate:t,durationUnit:n,setDurationUnit:a,durationValue:c,setDurationValue:f,productPriceRent:u,setProductPriceRent:d,loading:o,showContractTerms:S,toggleContractTerms:P,rentalStartDate:I,setRentalStartDate:T,rentalEndDate:N,setRentalEndDate:D,returnDate:g,setReturnDate:w})=>{var q,V;const A=s.pricePerHour,F=s.pricePerDay,p=s.pricePerWeek,l=s.pricePerMonth,v={0:{min:2,max:8},1:{min:1,max:3},2:{min:1,max:2},3:{min:1,max:1}},m=x=>{f(x)};r.useEffect(()=>{if(n!==void 0&&c&&I){i();const x=k(I.toDate(),c,n);D(je(x));const y=b(x);w(je(y))}},[n,c,I]);const j=x=>{a(x),f(v[x].min);const{min:y,max:E}=v[x];h.info(`Please select a duration between ${y} and ${E}.`)},b=x=>x?je(x).clone().add(1,"hours"):null;r.useEffect(()=>{console.log("Price variables:",{pricePerHour:A,pricePerDay:F,pricePerWeek:p,pricePerMonth:l})},[]);const i=()=>{if(console.log("Calculating price with:",{durationUnit:n,durationValue:c,pricePerHour:A,pricePerDay:F,pricePerWeek:p,pricePerMonth:l}),!v[n]){h.error("Invalid duration unit");return}if(!c||c<=0){h.error("Duration value must be greater than 0");return}const{min:x,max:y}=v[n];if(c<x||c>y){h.error(`Invalid duration value. Please choose between ${x} and ${y}.`);return}let E=0;switch(n){case 0:E=c*(A||0);break;case 1:E=c*(F||0);break;case 2:E=c*(p||0);break;case 3:E=c*(l||0);break;default:E=0}console.log("Calculated price:",E),d(E)};r.useEffect(()=>{n!==void 0&&c>0&&i()},[n,c]);const L=x=>{if(!x){h.error("Vui lòng chọn ngày bắt đầu thuê");return}T(x);const y=k(x.toDate(),c,n);if(y){D(je(y));const E=b(y);w(je(E))}},k=(x,y,E)=>{let K;switch(E){case 0:K=new Date(x.getTime()+y*60*60*1e3);break;case 1:K=new Date(x.getTime()+y*24*60*60*1e3);break;case 2:K=new Date(x.getTime()+y*7*24*60*60*1e3);break;case 3:K=new Date(x.getTime()+y*30*24*60*60*1e3);break;default:throw new Error("Invalid duration type")}return K},B=()=>({disabledHours:()=>[...Array(24)].map((x,y)=>y).filter(x=>x<7||x>=20)});return e.jsx(Q,{title:"Thông tin sản phẩm",bordered:!1,style:{marginBottom:"24px"},children:o?e.jsx(te,{tip:"Đang tải thông tin sản phẩm..."}):s?e.jsxs(e.Fragment,{children:[e.jsxs(J,{gutter:16,children:[e.jsx(U,{span:12,children:e.jsxs($,{column:1,bordered:!0,children:[e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ue,{})," Mã sản phẩm"]}),children:s.productID}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Tên"]}),children:s.productName}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," Mô tả"]}),children:s.productDescription}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," Cọc sản phẩm"]}),children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.depositProduct)}),e.jsxs($.Item,{label:e.jsxs("span",{children:[e.jsx(fe,{})," Giá thuê"]}),children:[e.jsxs("div",{style:{color:"#52c41a"},children:[e.jsx("strong",{children:"Giờ: "}),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerHour)]}),e.jsxs("div",{style:{color:"#1890ff"},children:[e.jsx("strong",{children:"Ngày:"}),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerDay)]}),e.jsxs("div",{style:{color:"#faad14"},children:[e.jsx("strong",{children:"Tuần:"}),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerWeek)]}),e.jsxs("div",{style:{color:"#f5222d"},children:[e.jsx("strong",{children:"Tháng:"}),new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s.pricePerMonth)]})]}),e.jsx($.Item,{label:e.jsxs("span",{children:[e.jsx(ae,{})," Chất lượng"]}),children:s.quality})]})}),e.jsx(U,{span:12,children:e.jsx(Q,{title:e.jsxs("span",{children:[e.jsx(Bt,{})," Hình ảnh sản phẩm"]}),bordered:!1,children:e.jsx("div",{className:"flex flex-wrap mt-2",children:s.listImage&&s.listImage.length>0?s.listImage.map((x,y)=>e.jsx("img",{src:x.image,alt:`Hình ảnh sản phẩm ${y+1}`,className:"w-24 h-24 mr-2 mb-2 object-cover",style:{width:"100px",height:"100px",objectFit:"cover",margin:"4px"}},x.productImagesID)):e.jsx("p",{children:"Không có hình ảnh cho sản phẩm này."})})})})]}),e.jsxs(C,{layout:"vertical",style:{marginTop:"24px"},children:[e.jsxs(Q,{title:"Tính giá thuê",bordered:!1,style:{width:"100%"},children:[e.jsx(C.Item,{label:"Đơn vị thời gian",style:{width:"100%"},children:e.jsxs(Z,{value:n,onChange:j,style:{width:"100%"},children:[e.jsx(ht,{value:0,children:"Giờ"}),e.jsx(ht,{value:1,children:"Ngày"}),e.jsx(ht,{value:2,children:"Tuần"}),e.jsx(ht,{value:3,children:"Tháng"})]})}),e.jsx(C.Item,{label:"Giá trị thời gian",style:{width:"100%"},children:e.jsx(Ls,{min:((q=v[n])==null?void 0:q.min)||1,max:((V=v[n])==null?void 0:V.max)||1,value:c,onChange:m})}),e.jsx(C.Item,{label:"Ngày bắt đầu thuê",style:{width:"100%"},children:e.jsx(we,{showTime:{format:"HH:mm",hideDisabledOptions:!0},value:I,onChange:L,format:"DD - MM - YYYY HH:mm",style:{width:"100%"},disabledTime:B,onOk:x=>{const y=x.hour();if(y<7||y>=20){h.error("Chỉ được chọn thời gian từ 7:00 đến 20:00");return}L(x)},placeholder:"Chọn ngày và giờ bắt đầu thuê"})}),e.jsx(C.Item,{label:"Ngày kết thúc thuê",style:{width:"100%"},children:e.jsx(we,{showTime:!0,value:N,disabled:!0,format:"DD - MM - YYYY HH:mm",style:{width:"100%"}})}),e.jsx(C.Item,{label:"Ngày trả hàng",style:{width:"100%"},children:e.jsx(we,{showTime:!0,value:g,disabled:!0,format:"DD - MM - YYYY HH:mm",style:{width:"100%"}})})]}),e.jsx("div",{style:{marginTop:"16px",width:"100%",textAlign:"center"},children:e.jsxs(Q,{bordered:!1,style:{backgroundColor:"#f6f8fa",padding:"16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx("strong",{style:{fontSize:"16px",color:"#333"},children:"Giá thuê sản phẩm:"}),e.jsx("div",{style:{fontSize:"24px",color:"#52c41a",marginTop:"8px"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(u)})]})})]}),e.jsx(H,{type:"link",onClick:P,style:{marginTop:"16px"},children:S?"Ẩn điều khoản hợp đồng":"Hiển thị điều khoản hợp đồng"}),S&&t&&t.length>0&&e.jsx(Q,{title:"Điều khoản hợp đồng",bordered:!1,style:{marginTop:"24px"},children:e.jsx(J,{gutter:16,children:e.jsx(U,{span:24,children:e.jsx($,{column:1,bordered:!0,children:t.map(x=>e.jsxs($.Item,{label:e.jsxs("span",{children:[e.jsx(Ye,{})," ",x.templateName]}),children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Điều khoản hợp đồng:"}),x.contractTerms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Chính sách phạt:"}),x.penaltyPolicy]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Chi tiết mẫu:"}),x.templateDetails]})]},x.contractTemplateID))})})})})]}):e.jsx("p",{children:"Không tìm thấy thông tin sản phẩm."})})},pl=({vouchers:s,selectedVoucher:t,setSelectedVoucher:n,handleVoucherSelect:a,selectedVoucherDetails:c})=>{const[f,u]=r.useState({});r.useEffect(()=>{(async()=>{const S={};for(const P of s)try{const I=await lt(P.vourcherID);console.log("Fetched details for voucherID:",P.vourcherID,I),S[P.vourcherID]=I.vourcherCode}catch{h.error("Failed to fetch voucher details.")}u(S)})()},[s]),r.useEffect(()=>{t||a({target:{value:null}})},[t,a]);const d=o=>{n(o),a({target:{value:o}})};return e.jsx(C.Item,{label:"Chọn Voucher",children:e.jsx(Ge.Group,{onChange:a,value:t,style:{width:"100%"},children:e.jsx(J,{gutter:[16,16],children:s.map(o=>{const S=f[o.vourcherID]||o.vourcherID;return console.log("vourcherCode",S),e.jsx(U,{span:8,children:e.jsx(Q,{title:S,bordered:!1,style:{cursor:"pointer",borderColor:t===o.vourcherID?"#1890ff":"#f0f0f0",backgroundColor:t===o.vourcherID?"#e6f7ff":"#ffffff",borderWidth:t===o.vourcherID?2:1,boxShadow:t===o.vourcherID?"0 4px 8px rgba(0, 0, 0, 0.1)":"none",transition:"all 0.3s ease"},onClick:()=>d(o.vourcherID),children:t===o.vourcherID&&c&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mã Voucher:"})," ",c.vourcherCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mô tả:"})," ",c.description]})]})})},o.productVoucherID)})})})})},{Step:ml}=st,gl=()=>{const[s]=C.useForm(),[t,n]=r.useState(null),[a,c]=r.useState(0),[f,u]=r.useState(null),[d,o]=r.useState(null),[S,P]=r.useState(0),[I,T]=r.useState(null),[N,D]=r.useState(null),[g,w]=r.useState(""),[A,F]=r.useState(null),p=yt(),{productID:l,supplierID:v}=p.state||{},[m,j]=r.useState(!0),[b,i]=r.useState(0),[L,k]=r.useState(),[B,q]=r.useState(null),[V,x]=r.useState([]),[y,E]=r.useState(!1),[K,W]=r.useState([]),[R,M]=r.useState(null),[_,O]=r.useState(!0),[z,ce]=r.useState(null),rt=X(ye=>ye.user.user||{}).id;r.useEffect(()=>{(async()=>{try{if(l){const le=await ge(l);if(le){n(le),s.setFieldsValue({supplierID:v});const Pe=await rl(l);x(Pe)}else h.error("Product not found or could not be retrieved.")}}catch{h.error("Failed to fetch product details or contract template.")}j(!1)})()},[l]),r.useEffect(()=>{(async()=>{if(L===1&&v)try{const le=await be(v);le&&le.result&&le.result.items.length>0?q(le.result.items[0]):h.error("Không thể lấy thông tin nhà cung cấp.")}catch{h.error("Không thể lấy thông tin nhà cung cấp.")}})()},[L,v]),r.useEffect(()=>{(async()=>{O(!0);try{const le=await er(l,1,10);le?W(le):h.error("Không có voucher khả dụng.")}catch{h.error("Không thể lấy voucher.")}O(!1)})()},[l]);const St=async ye=>{const le=ye.target.value;M(le);try{const Pe=await lt(le);ce(Pe),It(Pe)}catch(Pe){console.error("Lỗi khi lấy chi tiết voucher:",Pe)}},It=ye=>{if(!t)return;let le=0;ye&&(le=ye.discountAmount);const Pe=S-le+((t==null?void 0:t.depositProduct)||0);c(Pe)},vt=()=>{E(!y)},ur=async ye=>{var Pe,_t,Jt;if(console.log("Success:",ye),console.log("Delivery Method:",L),console.log("Product Price Rent:",S),console.log("Duration Unit:",f),console.log("Duration Value:",d),console.log("Rental Start Date:",I),console.log("Rental End Date:",N),console.log("Return Date:",A),!t){h.error("Product information is incomplete.");return}const le={supplierID:v||"",accountID:rt||"",productID:(t==null?void 0:t.productID)||"",vourcherID:R,productPriceRent:S,orderDate:new Date().toISOString(),orderStatus:0,totalAmount:a,products:[{productID:(t==null?void 0:t.productID)||"",productName:(t==null?void 0:t.productName)||"",productDescription:(t==null?void 0:t.productDescription)||"",priceRent:S,quality:t==null?void 0:t.quality}],orderDetailRequests:[{productID:(t==null?void 0:t.productID)||"",productPrice:(t==null?void 0:t.priceBuy)||0,productQuality:t==null?void 0:t.quality,discount:R&&((Pe=K.find(Oe=>Oe.vourcherID===R))==null?void 0:Pe.discountAmount)||0,productPriceTotal:a}],orderType:0,shippingAddress:g,rentalStartDate:I,rentalEndDate:N,durationUnit:f,durationValue:d,returnDate:A,deliveryMethod:L,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{const Oe=await pa(le);Oe.isSuccess&&Oe.result?(h.success("Tạo đơn hàng thành công. Đang chuyển hướng đến thanh toán..."),window.location.href=Oe.result):h.error("Không thể khởi tạo thanh toán.")}catch(Oe){h.error("Không thể tạo đơn hàng. "+(((Jt=(_t=Oe.response)==null?void 0:_t.data)==null?void 0:Jt.title)||"")),console.error(Oe)}},dt=[{title:"Chi tiết sản phẩm",content:e.jsx(ul,{product:t,contractTemplate:V,durationUnit:f,setDurationUnit:u,durationValue:d,setDurationValue:o,productPriceRent:S,setProductPriceRent:P,loading:m,showContractTerms:y,toggleContractTerms:vt,rentalStartDate:I,setRentalStartDate:T,rentalEndDate:N,setRentalEndDate:D,returnDate:A,setReturnDate:F})},{title:"Phương thức giao hàng",content:e.jsx(ol,{shippingAddress:g,setShippingAddress:w,deliveryMethod:L,setDeliveryMethod:k,supplierInfo:B})},{title:"Chọn Voucher",content:e.jsx(pl,{vouchers:K,selectedVoucher:R,setSelectedVoucher:M,handleVoucherSelect:St,selectedVoucherDetails:z})},{title:"Xem lại đơn hàng",content:e.jsx(hl,{product:t,form:s,deliveryMethod:L,supplierInfo:B,selectedVoucherDetails:z,totalAmount:a,contractTemplate:V,depositProduct:t==null?void 0:t.depositProduct,productPriceRent:S})},{title:"Xác nhận",content:e.jsx(dl,{totalAmount:a,depositProduct:t==null?void 0:t.depositProduct,selectedVoucherDetails:z,productPriceRent:S})}],pr=()=>{i(b+1)},mr=()=>{i(b-1)};return e.jsx(Q,{title:"Tạo đơn hàng thuê",children:m||_?e.jsx(te,{}):e.jsxs(C,{form:s,layout:"vertical",onFinish:ur,children:[e.jsx(st,{current:b,children:dt.map(ye=>e.jsx(ml,{title:ye.title},ye.title))}),e.jsx("div",{className:"steps-content",style:{marginTop:"16px"},children:dt[b].content}),e.jsxs("div",{className:"steps-action",style:{marginTop:"16px"},children:[b>0&&e.jsx(H,{style:{margin:"0 8px"},onClick:()=>mr(),children:"Quay lại"}),b<dt.length-1&&e.jsx(H,{type:"primary",onClick:()=>pr(),children:"Tiếp theo"}),b===dt.length-1&&e.jsx(H,{type:"primary",htmlType:"submit",children:"Tạo đơn hàng"})]})]})})},xl=()=>{const s=X(N=>N.user),[t,n]=r.useState(!1),[a,c]=r.useState([]),[f,u]=r.useState([]),[d,o]=r.useState({}),S=async()=>{try{n(!0),console.log("Fetching orders for user ID:",s.id);const N=await jt(s.id,1,100);console.log("API response:",N),N.isSuccess?c(N.result||[]):h.error("Failed to fetch orders.")}catch(N){console.error("Error fetching orders:",N),h.error("An error occurred, please try again later.")}finally{n(!1)}},P=async N=>{try{n(!0);const D=await Wt(N,1,100);D.isSuccess?u(D.result||[]):h.error("Failed to fetch order details.")}catch(D){console.error("Error fetching order details:",D),h.error("An error occurred, please try again later.")}finally{n(!1)}},I=N=>{P(N.orderID)},T=N=>{var D,g,w,A;return e.jsxs("tr",{className:N.orderStatus===1&&N.deliveryMethod===0?"bg-yellow-100":"cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>I(N),children:[e.jsx("td",{className:"py-3 px-4 border-b",children:N.orderID}),e.jsxs("td",{className:"py-3 px-4 border-b",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Tên nhà cung cấp:"})," ",((D=d[N.supplierID])==null?void 0:D.supplierName)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Địa chỉ:"})," ",((g=d[N.supplierID])==null?void 0:g.supplierAddress)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mô tả:"})," ",((w=d[N.supplierID])==null?void 0:w.supplierDescription)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Số điện thoại liên hệ:"})," ",((A=d[N.supplierID])==null?void 0:A.contactNumber)||""]})]}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(StatusBadge,{status:N.orderStatus,map:orderStatusMap})}),e.jsx("td",{className:"py-3 px-4 border-b hidden md:table-cell",children:N.shippingAddress}),e.jsx("td",{className:"py-3 px-4 border-b hidden lg:table-cell",children:e.jsx(StatusBadge,{status:N.deliveriesMethod,map:deliveryStatusMap})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(StatusBadge,{status:N.orderType,map:orderTypeMap})}),e.jsx("td",{className:"py-3 px-4 border-b hidden sm:table-cell",children:Ke(N.orderDate)}),e.jsx("td",{className:"py-3 px-4 border-b",children:ze(N.totalAmount)})]},N.orderID)};return r.useEffect(()=>{s!=null&&s.id&&S()},[s]),e.jsxs("div",{children:[e.jsx("h1",{children:"Create Report Product Form"}),t?e.jsx("p",{children:"Loading..."}):e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"Supplier Info"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Shipping Address"}),e.jsx("th",{children:"Delivery Method"}),e.jsx("th",{children:"Order Type"}),e.jsx("th",{children:"Order Date"}),e.jsx("th",{children:"Total Amount"})]})}),e.jsx("tbody",{children:a.map(T)})]})]})},fl=async s=>{try{return(await G.post("/report/create-Report",s)).data}catch(t){return console.error("Error creating report:",t),null}},yl=()=>{const s=X(o=>o.user),[t,n]=r.useState(1),[a,c]=r.useState(""),[f,u]=r.useState(!1),d=async o=>{o.preventDefault(),u(!0);const S={accountId:s.id,reportType:t,reportDetails:a};try{(await fl(S)).isSuccess?h.success("Report created successfully."):h.error("Failed to create report.")}catch(P){console.error("Error creating report:",P),h.error("An error occurred, please try again later.")}finally{u(!1)}};return e.jsxs("div",{children:[e.jsx("h1",{children:"Create System Report"}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportType",children:"Report Type:"}),e.jsxs("select",{id:"reportType",value:t,onChange:o=>n(Number(o.target.value)),children:[e.jsx("option",{value:1,children:"Supplier"}),e.jsx("option",{value:2,children:"System"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportDetails",children:"Report Details:"}),e.jsx("textarea",{id:"reportDetails",value:a,onChange:o=>c(o.target.value)})]}),e.jsx("button",{type:"submit",disabled:f,children:f?"Submitting...":"Submit Report"})]})]})},jl=()=>{const[s,t]=r.useState(!1),n=[{key:"1",label:"BÁO CÁO SẢN PHẨM",children:e.jsx(xl,{refresh:s})},{key:"2",label:"BÁO CÁO HỆ THỐNG",children:e.jsx(yl,{refresh:s})}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Quản Lý Báo Cáo Sản Phẩm"})," ",e.jsx(He,{defaultActiveKey:"1",items:n})]})},bl=async s=>{var t;try{return(await G.post(`/transaction/create-supplier-payment-purchuse/${s}`,"")).data}catch(n){return console.error("Error purchasing order:",n),((t=n.response)==null?void 0:t.data)||{isSuccess:!1,messages:["Error purchasing order"]}}},Nl=async(s=1,t=100)=>{try{return(await G.get(`/transaction/get-all-transaction?pageIndex=${s}&pageSize=${t}`)).data}catch(n){return console.error("Error fetching all transactions:",n),null}},Sl=async(s,t=1,n=100)=>{try{return(await G.get(`/transaction/get-transaction-by-id?id=${s}&pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error fetching transaction by ID:",a),null}},Il=async s=>{try{return(await G.post(`/transaction/create-staff-refund-member-purchuse?orderId=${s}`,"")).data}catch(t){return console.error("Error creating staff refund purchase:",t),null}},vl=async(s=1,t=10)=>{try{return(await G.get(`/historyTransaction/get-all-history-transaction?pageIndex=${s}&pageSize=${t}`)).data}catch(n){return console.error("Error fetching all history transactions:",n),null}},or=async(s,t)=>{try{return(await G.post("/transaction/create-staff-refund-return-detail",{orderID:s,staffId:t})).data}catch(n){return console.error("Error creating staff refund return detail:",n),null}},dr=async(s,t)=>{try{return(await G.post("/transaction/create-staff-refund-deposit",{orderID:s,staffId:t})).data}catch(n){return console.error("Error creating staff refund deposit:",n),null}},wl="/assets/payment-failed-BQcgoQ1u.gif",Dl="/assets/payment-success-BXFlmYTP.gif",Cl=()=>{const s=yt(),[t,n]=r.useState(!1),[a,c]=r.useState(""),[f,u]=r.useState(!1),[d,o]=r.useState(!1),[S,P]=r.useState(!1),I=async()=>{try{P(!0);const N=new URLSearchParams(s.search),D=N.get("vnp_ResponseCode"),g=N.get("vnp_TxnRef"),w=decodeURIComponent(N.get("vnp_OrderInfo"));if(console.log("vnpResponseCode:",D),console.log("vnp_TxnRef:",g),console.log("vnpOrderInfo:",w),D)if(o(!0),D==="00"){const A=await Qs(g)||await bl(g);console.log("purchaseOrder data:",A),c(`Thanh toán thành công cho ${w}`),u(!0)}else{const A=await Il(g);console.log("createStaffRefundPurchuse data:",A),c(`Thanh toán VNPay thất bại cho đơn hàng: ${w}. Vui lòng thanh toán lại`),u(!1)}else c(`Thanh toán VNPay thất bại cho đơn hàng: ${w}. Vui lòng thanh toán lại`),u(!1);n(!0)}catch(N){console.error("Error handling payment:",N)}finally{P(!1)}};r.useEffect(()=>{I()},[s]);const T=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{isLoading:S}),e.jsx(Js,{}),t&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx("div",{className:"modal modal-open shadow-lg",children:e.jsxs("div",{className:"modal-box p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 text-center",children:[e.jsx("h2",{className:"font-bold text-lg",children:"Thông báo thanh toán"}),e.jsx("img",{src:f?Dl:wl,alt:"Payment Status"})]}),e.jsxs("p",{className:"text-center font-bold",children:["Thanh toán ",f?"thành công":"thất bại"," với VNPAY"]}),e.jsx("p",{className:"py-4",children:a}),e.jsx("div",{className:"modal-action flex justify-end",children:e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded-md",onClick:T,children:"Đóng"})})]})})})]})},{Title:Pl}=ie,kl=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),f=X(d=>d.user.user||{}).id;r.useEffect(()=>{(async()=>{a(!0);try{const o=await Oa(f);if(o&&o.isSuccess){const S=await Promise.all(o.result.items.map(async P=>{var T,N;const I=await ge(P.productID);return{...P,productName:I.productName,productDescription:I.productDescription,price:I.priceBuy||I.priceRent,productImage:((N=(T=I.listImage)==null?void 0:T[0])==null?void 0:N.image)||"default-image-url"}}));t(S)}else h.error("Failed to load wishlist.")}catch(o){console.error("Error fetching wishlist:",o),h.error("Error fetching wishlist.")}finally{a(!1)}})()},[f]);const u=async d=>{console.log("Deleting wishlist",d);try{const o=await Ha(d);o&&o.isSuccess?(h.success("Wishlist item deleted successfully!"),t(s.filter(S=>S.wishlistID!==d))):h.error("Failed to delete wishlist item.")}catch(o){console.error("Error deleting wishlist item:",o),h.error("Failed to delete wishlist item.")}};return e.jsxs("div",{className:"wishlist-container",children:[e.jsx(Pl,{level:2,children:"My Wishlist"}),n?e.jsx("div",{className:"loading-spinner",children:e.jsx(te,{size:"large"})}):s.length===0?e.jsx(Es,{description:"No items in your wishlist"}):e.jsx(Ze,{grid:{gutter:16,column:1},dataSource:s,renderItem:d=>e.jsx(Ze.Item,{children:e.jsx(Q,{title:d.productName,extra:e.jsx(H,{type:"danger",onClick:()=>u(d.wishlistID),children:"Delete"}),hoverable:!0,children:e.jsxs("div",{style:{display:"flex"},children:[e.jsx("img",{alt:d.productName,src:d.productImage,style:{width:"150px",height:"150px",objectFit:"cover",marginRight:"16px"}}),e.jsx(Q.Meta,{description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:d.productDescription}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",d.price]})]})})]})})})})]})},{Title:Tl}=ie,Ml=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),f=X(o=>o.user.user||{}).id,u=1,d=10;return r.useEffect(()=>{f&&(async()=>{try{a(!0);const S=await jt(f,u,d);if(S&&S.isSuccess){const P=S.result,I=await Promise.all(P.map(async T=>{const N=await Promise.all(T.orderDetails.map(async D=>{const g=await ge(D.productID);return console.log("Fetched product for ID:",D.productID,g.productName),{...D,product:{...g.result,productName:g&&g.isSuccess?g.result.productName:"Not available"}}}));return{...T,orderDetails:N}}));t(I)}else h.error("Failed to fetch order details.")}catch{h.error("An error occurred while fetching order details.")}finally{a(!1)}})()},[f,u,d]),n?e.jsx(te,{size:"large"}):e.jsx("div",{children:s.length>0?s.map(o=>e.jsxs(Q,{style:{marginBottom:20},children:[e.jsxs(Tl,{level:4,children:["Order ID: ",o.orderID]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order Date:"})," ",new Date(o.orderDate).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Amount:"})," ",o.totalAmount," VND"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping Address:"})," ",o.shippingAddress]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Order Status:"})," ",o.orderStatus===0?"Pending":"Completed"]}),e.jsx(se,{dataSource:o.orderDetails,rowKey:"orderDetailsID",pagination:!1,columns:[{title:"Product ID",dataIndex:"productID"},{title:"Product Name",dataIndex:"product.productName",render:S=>S||"Not available"},{title:"Product Price (VND)",dataIndex:"productPrice"},{title:"Quantity",dataIndex:"productQuality"},{title:"Total Price (VND)",dataIndex:"productPriceTotal"}]})]},o.orderID)):e.jsx("p",{children:"No order details found."})})},{Option:Vl}=Z,Al=s=>new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(s),a.onload=()=>t(a.result),a.onerror=c=>n(c)}),Fl=()=>{const[s,t]=r.useState(!1),[n,a]=r.useState([]),[c,f]=r.useState(!0),[u,d]=r.useState(!1),[o,S]=r.useState(""),[P,I]=r.useState(""),[T,N]=r.useState([]),[D,g]=r.useState([]),w=Re();r.useEffect(()=>{(async()=>{try{const j=await Cs.get("https://api.vietqr.io/v2/banks");a(j.data.data)}catch{h.error("Failed to fetch bank list.")}finally{f(!1)}})()},[]);const A=()=>d(!1),F=async m=>{!m.url&&!m.preview&&(m.preview=await Al(m.originFileObj)),S(m.url||m.preview),d(!0),I(m.name||m.url.substring(m.url.lastIndexOf("/")+1))},p=m=>({fileList:j})=>{m==="front"?N(j):g(j)},l=it({email:ne().email("Định dạng email không hợp lệ").required("Email là bắt buộc!"),password:ne().required("Mật khẩu là bắt buộc!").min(6,"Mật khẩu phải có ít nhất 6 ký tự").matches(/[A-Z]/,"Mật khẩu phải chứa ít nhất một chữ cái viết hoa").matches(/[!@#$%^&*(),.?":{}|<>]/,'Mật khẩu phải chứa ít nhất một ký tự đặc biệt (!@#$%^&*(),.?":{}|<>)'),confirmPassword:ne().oneOf([Ts("password"),null],"Mật khẩu xác nhận không khớp").required("Mật khẩu xác nhận là bắt buộc!"),firstName:ne().required("Tên là bắt buộc!"),lastName:ne().required("Họ là bắt buộc!"),supplierName:ne().required("Tên nhà cung cấp là bắt buộc!"),supplierDescription:ne().required("Mô tả nhà cung cấp là bắt buộc!"),supplierAddress:ne().required("Địa chỉ nhà cung cấp là bắt buộc!"),contactNumber:ne().required("Số liên hệ là bắt buộc!").matches(/^\d+$/,"Số liên hệ chỉ được chứa các ký tự số"),phoneNumber:ne().matches(/^\d*$/,"Số điện thoại chỉ được chứa các ký tự số"),bankName:ne().required("Tên ngân hàng là bắt buộc!"),accountNumber:ne().required("Số tài khoản là bắt buộc!").matches(/^\d+$/,"Số tài khoản chỉ được chứa các ký tự số"),accountHolder:ne().required("Tên người đứng tên tài khoản là bắt buộc!")}),v=async m=>{t(!0);try{await l.validate(m,{abortEarly:!1});const{email:j,password:b,firstName:i,lastName:L,supplierName:k,supplierDescription:B,supplierAddress:q,contactNumber:V,phoneNumber:x,bankName:y,accountNumber:E,accountHolder:K}=m,W=T.length>0?T[0].originFileObj:null,R=D.length>0?D[0].originFileObj:null;await Yn(j,b,i,L,k,B,q,V,x,W,R,y,E,K)?(h.success("Supplier registered successfully! Vui lòng quay về trang Đăng nhập"),w("/")):h.error("Failed to register supplier.")}catch(j){j instanceof tn?j.errors.forEach(b=>h.error(b)):h.error("An error occurred while registering the supplier.")}finally{t(!1)}};return e.jsxs("div",{className:"flex items-center justify-center bg-mint min-h-screen",children:[e.jsx("div",{className:"relative flex flex-col m-6 space-y-8 bg-white shadow-4xl rounded-2xl md:flex-row md:space-y-0 w-full max-w-2xl p-6",children:e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"ĐĂNG KÍ NHÀ CUNG CẤP"}),e.jsxs(C,{layout:"vertical",onFinish:v,children:[e.jsx(C.Item,{label:e.jsx("strong",{children:"Email"}),name:"email",rules:[{required:!0,message:"Vui lòng nhập email của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập email của bạn"})}),e.jsx(C.Item,{label:e.jsx("strong",{children:"Tên nhà cung cấp"}),name:"supplierName",rules:[{required:!0,message:"Vui lòng nhập tên nhà cung cấp!"}],children:e.jsx(Y,{placeholder:"Nhập tên nhà cung cấp của bạn"})}),e.jsxs(J,{gutter:20,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Mật khẩu"}),name:"password",rules:[{required:!0,message:"Vui lòng nhập mật khẩu của bạn!"}],children:e.jsx(Y.Password,{placeholder:"Nhập mật khẩu của bạn"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Xác nhận mật khẩu"}),name:"confirmPassword",rules:[{required:!0,message:"Vui lòng xác nhận mật khẩu của bạn!"}],children:e.jsx(Y.Password,{placeholder:"Xác nhận mật khẩu của bạn"})})})]}),e.jsxs(J,{gutter:20,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Tên"}),name:"firstName",rules:[{required:!0,message:"Vui lòng nhập tên của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập tên của bạn"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Họ"}),name:"lastName",rules:[{required:!0,message:"Vui lòng nhập họ của bạn!"}],children:e.jsx(Y,{placeholder:"Nhập họ của bạn"})})})]}),e.jsx(C.Item,{label:e.jsx("strong",{children:'Nhập mô tả về dịch vụ để khách hàng hiểu hơn về dịch vụ bạn mang đến"'}),name:"supplierDescription",rules:[{required:!0,message:"Vui lòng nhập mô tả nhà cung cấp!"}],children:e.jsx(Y.TextArea,{placeholder:"Nhập mô tả về dịch vụ để khách hàng hiểu hơn về dịch vụ bạn mang đến"})}),e.jsx(C.Item,{label:e.jsx("strong",{children:"Địa chỉ nhà cung cấp"}),name:"supplierAddress",rules:[{required:!0,message:"Vui lòng nhập địa chỉ nhà cung cấp!"}],children:e.jsx(Y,{placeholder:"Nhập địa chỉ nhà cung cấp"})}),e.jsxs(J,{gutter:20,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Số liên lạc"}),name:"contactNumber",rules:[{required:!0,message:"Vui lòng nhập số liên lạc!"}],children:e.jsx(Y,{placeholder:"Nhập số liên lạc"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Số điện thoại cá nhân"}),name:"phoneNumber",rules:[{required:!0,message:"Vui lòng nhập số điện thoại!"}],children:e.jsx(Y,{placeholder:"Nhập số điện thoại"})})})]}),e.jsx(C.Item,{label:e.jsx("strong",{children:"Ngân hàng bạn dùng:"}),name:"bankName",rules:[{required:!0,message:"Vui lòng chọn ngân hàng của bạn!"}],children:c?e.jsx(te,{}):e.jsx(Z,{placeholder:"Chọn ngân hàng",children:n.map(m=>e.jsxs(Vl,{value:m.name,children:[e.jsx("strong",{children:m.shortName})," - ",m.name]},m.code))})}),e.jsxs(J,{gutter:20,children:[e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Số tài khoản"}),name:"accountNumber",rules:[{required:!0,message:"Vui lòng nhập số tài khoản!"}],children:e.jsx(Y,{placeholder:"Nhập số tài khoản"})})}),e.jsx(U,{span:12,children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Tên chủ tài khoản"}),name:"accountHolder",rules:[{required:!0,message:"Vui lòng nhập tên chủ tài khoản!"}],children:e.jsx(Y,{placeholder:"Nhập tên chủ tài khoản"})})})]}),e.jsxs(J,{gutter:16,style:{justifyContent:"center"},children:[e.jsx(U,{span:12,style:{display:"flex",justifyContent:"center"},children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Mặt trước CCCD/CMND"}),style:{width:"100%"},required:!0,children:e.jsx(We,{listType:"picture-card",fileList:T,onPreview:F,onChange:p("front"),beforeUpload:()=>!1,children:T.length<1&&e.jsx(Et,{})})})}),e.jsx(U,{span:12,style:{display:"flex",justifyContent:"center"},children:e.jsx(C.Item,{label:e.jsx("strong",{children:"Mặt sau CCCD/CMND"}),required:!0,style:{width:"100%"},children:e.jsx(We,{listType:"picture-card",fileList:D,onPreview:F,onChange:p("back"),beforeUpload:()=>!1,children:D.length<1&&e.jsx(Et,{})})})})]}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:s,style:{width:"100%"},children:"Đăng ký nhà cung cấp"})})]})]})}),e.jsx(re,{visible:u,title:P,footer:null,onCancel:A,children:e.jsx("img",{alt:"Preview",style:{width:"100%"},src:o})})]})},xs=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(!1),[u,d]=r.useState(!1),[o,S]=r.useState(null),[P]=C.useForm(),I=async(A=1,F=10)=>{a(!0);try{const p=await ot(A,F);p&&p.isSuccess?t(p.result):h.error("Không thể tải danh mục.")}catch(p){h.error("Không thể tải danh mục."),console.error("Error fetching categories:",p)}finally{a(!1)}};r.useEffect(()=>{I()},[]);const T=async A=>{const F=await Pa(A);F&&F.isSuccess?(h.success("Xóa danh mục thành công!"),t(s.filter(p=>p.categoryID!==A))):h.error("Không thể xóa danh mục.")},N=async A=>{const F=await Da(A.categoryName,A.categoryDescription);if(F&&F.isSuccess)h.success("Tạo danh mục thành công!"),t([...s,F.result]),f(!1),P.resetFields();else{const p=F.messages?F.messages[0]:"Không thể tạo danh mục.";h.error(p)}},D=async A=>{const F=await wa(A.filter||"",1,10);F&&F.isSuccess?t(F.result):h.error("Không thể tìm kiếm danh mục.")},g=async A=>{if(!o||!o.categoryID){h.error("Danh mục được chọn không hợp lệ.");return}const F=await Ca(o.categoryID,A.categoryName,A.categoryDescription);if(F&&F.isSuccess)h.success("Cập nhật danh mục thành công!"),t(s.map(p=>p.categoryID===o.categoryID?{...p,...A}:p)),f(!1),S(null),P.resetFields();else{const p=F.messages?F.messages[0]:"Không thể cập nhật danh mục.";h.error(p)}},w=A=>{S(A),f(!0),d(!0),P.setFieldsValue({categoryName:A.categoryName,categoryDescription:A.categoryDescription})};return n?e.jsx(Ce,{}):e.jsxs("div",{children:[e.jsx("h2",{children:"Quản lý danh mục"}),e.jsxs(C,{layout:"inline",onFinish:D,style:{marginBottom:"20px"},children:[e.jsx(C.Item,{name:"filter",children:e.jsx(Y,{placeholder:"Tìm kiếm theo tên"})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",children:"Tìm kiếm"})})]}),e.jsx(H,{type:"primary",onClick:()=>{f(!0),d(!1),P.resetFields()},style:{marginBottom:"20px"},children:"Tạo danh mục"}),e.jsx(se,{dataSource:s,rowKey:"categoryID",columns:[{title:"Tên danh mục",dataIndex:"categoryName"},{title:"Mô tả",dataIndex:"categoryDescription"},{title:"Hành động",render:(A,F)=>e.jsxs(e.Fragment,{children:[e.jsx(H,{icon:e.jsx(Qe,{}),onClick:()=>w(F)}),e.jsx(H,{icon:e.jsx(qt,{}),onClick:()=>T(F.categoryID),danger:!0,style:{marginLeft:8}})]})}]}),e.jsx(re,{title:u?"Cập nhật danh mục":"Tạo danh mục",visible:c,onCancel:()=>{f(!1),S(null),P.resetFields()},footer:null,children:e.jsxs(C,{form:P,layout:"vertical",onFinish:u?g:N,children:[e.jsx(C.Item,{label:"Tên danh mục",name:"categoryName",rules:[{required:!0,message:"Vui lòng nhập tên danh mục!"}],children:e.jsx(Y,{placeholder:"Nhập tên danh mục"})}),e.jsx(C.Item,{label:"Mô tả danh mục",name:"categoryDescription",rules:[{required:!0,message:"Vui lòng nhập mô tả danh mục!"}],children:e.jsx(Y.TextArea,{placeholder:"Nhập mô tả danh mục",rows:4})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",block:!0,children:u?"Cập nhật danh mục":"Tạo danh mục"})})]})})]})},Ll=({product:s,loading:t,onClose:n})=>{const{id:a}=Le(),[c,f]=r.useState(s),[u,d]=r.useState(t),[o,S]=r.useState(null);if(r.useEffect(()=>{s||(async()=>{try{d(!0);const M=await ge(a);f(M)}catch(M){console.error("Failed to fetch product:",M),S("Failed to load product details. Please try again later."),h.error(M.message)}finally{d(!1)}})()},[a,s]),u)return e.jsx(te,{size:"large"});if(o)return e.jsx("div",{children:o});if(!c)return e.jsx("div",{children:"Đang tải thông tin sản phẩm..."});const{productID:P,serialNumber:I,supplierID:T,categoryID:N,productName:D,productDescription:g,depositProduct:w,priceBuy:A,pricePerHour:F,pricePerDay:p,pricePerWeek:l,pricePerMonth:v,brand:m,quality:j,status:b,rating:i,createdAt:L,updatedAt:k,listImage:B,listVoucher:q,listProductSpecification:V}=c,x=()=>B&&B.length>0?B.map((R,M)=>e.jsx($s,{src:R.image,alt:`${D} - ${M+1}`,width:100,style:{margin:"5px"}},M)):e.jsx("span",{children:"Không có hình ảnh"}),y=[{title:"Trường",dataIndex:"field",key:"field",render:R=>e.jsx("strong",{children:R})},{title:"Giá Trị",dataIndex:"value",key:"value"}],E=[{key:"1",field:"Mã Sản Phẩm",value:P},{key:"2",field:"Số Serial",value:I},{key:"3",field:"Mã Nhà Cung Cấp",value:T},{key:"4",field:"Tên Loại Hàng",value:N},{key:"5",field:"Tên Sản Phẩm",value:D},{key:"6",field:"Mô Tả",value:g},{key:"7",field:"Giá Đặt Cọc",value:w!==null?`${w} VND`:"Không có"},{key:"8",field:"Giá Bán",value:A!==null?`${A} VND`:"Không có"},{key:"9",field:"Giá Theo Giờ",value:F?`${F} VND`:"Không có"},{key:"10",field:"Giá Theo Ngày",value:p?`${p} VND`:"Không có"},{key:"11",field:"Giá Theo Tuần",value:l?`${l} VND`:"Không có"},{key:"12",field:"Giá Theo Tháng",value:v?`${v} VND`:"Không có"},{key:"13",field:"Thương Hiệu",value:ue(m)},{key:"14",field:"Chất Lượng",value:j},{key:"15",field:"Trạng Thái",value:Fe(b)},{key:"16",field:"Đánh Giá",value:i},{key:"17",field:"Ngày Tạo",value:new Date(L).toLocaleString()},{key:"18",field:"Ngày Cập Nhật",value:new Date(k).toLocaleString()},{key:"19",field:"Hình Ảnh",value:x()}],K=[{title:"Mã Voucher",dataIndex:"vourcherID",key:"vourcherID"},{title:"Ngày Tạo",dataIndex:"createdAt",key:"createdAt",render:R=>new Date(R).toLocaleString()},{title:"Ngày Cập Nhật",dataIndex:"updatedAt",key:"updatedAt",render:R=>new Date(R).toLocaleString()}],W=[{title:"Thông Số Kỹ Thuật",dataIndex:"specification",key:"specification"},{title:"Giá Trị",dataIndex:"value",key:"value"}];return e.jsxs("div",{className:"product-detail-container",children:[e.jsx(J,{justify:"space-between",align:"middle",children:e.jsx(U,{children:e.jsx("h1",{children:"Chi Tiết Sản Phẩm"})})}),e.jsx(se,{columns:y,dataSource:E,pagination:!1,showHeader:!1,bordered:!0}),e.jsx("h2",{children:"Vouchers"}),e.jsx(se,{columns:K,dataSource:q,pagination:!1,bordered:!0}),e.jsx("h2",{children:"Thông Số Kỹ Thuật"}),e.jsx(se,{columns:W,dataSource:V,pagination:!1,bordered:!0})]})},{Title:El}=ie,$l=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!1),[c,f]=r.useState(1),[u,d]=r.useState(10),[o,S]=r.useState(0);X(V=>V.user.user||{}),r.useState(null);const[P,I]=r.useState(""),[T,N]=r.useState(null);r.useState(!1);const[D,g]=r.useState({}),[w,A]=r.useState(!1),[F,p]=r.useState({});Le();const l=async()=>{a(!0);try{const V=await Ee(c,u);if(Array.isArray(V)){t(V),S(V.totalCount||0),V.totalCount===50&&alert("Hệ thống đã giúp bạn phân trang.");const x=V.map(async y=>{if(y.categoryID){const E=await Te(y.categoryID);E!=null&&E.isSuccess&&g(K=>({...K,[y.categoryID]:E.result.categoryName}))}});await Promise.all(x)}else h.error("Unable to fetch products."),t([])}catch(V){console.error("Error fetching products:",V),t([]),h.error("Error fetching products.")}finally{a(!1)}};r.useEffect(()=>{l()},[c,u]);const v=Array.isArray(s)?s.filter(V=>V.productName.toLowerCase().includes(P.toLowerCase())):[],m=V=>{switch(V){case 0:return"text-green-500 text-sm font-bold";case 1:return"text-blue-500 text-sm font-bold";case 2:return"text-orange-500 text-sm font-bold";case 3:return"text-red-500 text-sm font-bold";case 4:return"text-gray-500 text-sm font-bold";default:return"text-gray-400 text-sm font-bold"}},j=(V,x)=>{const y={hour:x.pricePerHour,day:x.pricePerDay,week:x.pricePerWeek,month:x.pricePerMonth};return e.jsxs("div",{children:[x.pricePerHour!==null&&x.pricePerHour!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Giờ:"})," ",x.pricePerHour," VND"]}),x.pricePerDay!==null&&x.pricePerDay!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Ngày:"})," ",x.pricePerDay," VND"]}),x.pricePerWeek!==null&&x.pricePerWeek!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Tuần:"})," ",x.pricePerWeek," VND"]}),x.pricePerMonth!==null&&x.pricePerMonth!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Tháng:"})," ",x.pricePerMonth," VND"]}),Object.values(y).every(E=>E===null||E===0)&&e.jsx("span",{children:"--"})]})},b=V=>e.jsx("span",{style:{fontWeight:"bold",color:V!==null&&V!==0?"#007bff":"#888"},children:V!==null&&V!==0?`${V} VND`:"--"}),i=async V=>{a(!0);try{const x=await ge(V);N(x),A(!0)}catch{h.error("Failed to fetch product details.")}finally{a(!1)}},L=V=>{const x=new Date(V),y=String(x.getDate()).padStart(2,"0"),E=String(x.getMonth()+1).padStart(2,"0"),K=x.getFullYear(),W=String(x.getHours()).padStart(2,"0"),R=String(x.getMinutes()).padStart(2,"0"),M=String(x.getSeconds()).padStart(2,"0");return`${y}/${E}/${K} ${W}:${R}:${M}`},k=V=>{p(x=>({...x,[V]:!x[V]}))},B=[{title:"Mã Sản Phẩm",dataIndex:"productID",sorter:(V,x)=>V.productID-x.productID},{title:"Số Serial",dataIndex:"serialNumber",sorter:(V,x)=>V.serialNumber.localeCompare(x.serialNumber)},{title:"Mã Nhà Cung Cấp",dataIndex:"supplierID",sorter:(V,x)=>V.supplierID-x.supplierID},{title:"Tên Loại Hàng",dataIndex:"categoryID",render:V=>D[V]||"Không xác định",sorter:(V,x)=>(D[V.categoryID]||"").localeCompare(D[x.categoryID]||"")},{title:"Tên Sản Phẩm",dataIndex:"productName",sorter:(V,x)=>V.productName.localeCompare(x.productName)},{title:"Mô Tả",dataIndex:"productDescription",render:(V,x)=>e.jsxs("div",{children:[e.jsx(ie.Paragraph,{ellipsis:{rows:2,expandable:!0},children:F[x.productID]?V:`${V?V.slice(0,100):""}...`}),V&&V.length>100&&e.jsx(H,{type:"link",onClick:()=>k(x.productID),style:{padding:0},children:F[x.productID]?"See Less":"See More"})]})},{title:"Giá(Cọc)",dataIndex:"depositProduct",sorter:(V,x)=>V.depositProduct-x.depositProduct},{title:"Giá (Thuê)",dataIndex:"priceRent",render:j,sorter:(V,x)=>V.priceRent-x.priceRent},{title:"Giá (Bán)",dataIndex:"priceBuy",render:b,sorter:(V,x)=>V.priceBuy-x.priceBuy},{title:"Thương Hiệu",dataIndex:"brand",render:V=>ue(V),sorter:(V,x)=>ue(V.brand).localeCompare(ue(x.brand))},{title:"Chất Lượng",dataIndex:"quality",sorter:(V,x)=>V.quality.localeCompare(x.quality)},{title:"Trạng Thái",dataIndex:"status",render:V=>e.jsx("span",{className:m(V),children:Fe(V)}),sorter:(V,x)=>V.status-x.status},{title:"Đánh Giá",dataIndex:"rating",sorter:(V,x)=>V.rating-x.rating},{title:"Ngày Tạo",dataIndex:"createdAt",render:V=>L(V),sorter:(V,x)=>new Date(V.createdAt)-new Date(x.createdAt)},{title:"Ngày Cập Nhật",dataIndex:"updatedAt",render:V=>L(V),sorter:(V,x)=>new Date(V.updatedAt)-new Date(x.updatedAt)},{title:"Danh Sách Ảnh",dataIndex:"listImage",render:(V,x)=>e.jsx("img",{src:V&&V.length>0?V[0].image:"https://via.placeholder.com/100?text=No+Image",alt:x.productName,width:"100"})},{title:"Hành Động",render:(V,x)=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(H,{type:"default",icon:e.jsx(zt,{}),onClick:()=>i(x.productID),style:{marginRight:"8px",backgroundColor:"#1890ff",color:"#fff",borderColor:"#1890ff"}})})}],q=()=>{A(!1),N(null)};return e.jsxs("div",{children:[e.jsx(El,{level:2,children:"DANH SÁCH SẢN PHẨM "}),e.jsx(Y,{placeholder:"Tìm kiếm theo tên sản phẩm",value:P,onChange:V=>I(V.target.value),style:{marginBottom:"20px",width:"300px"}}),n?e.jsx("p",{children:"Loading products..."}):e.jsx("div",{children:v.length>0?e.jsxs(e.Fragment,{children:[e.jsx(se,{dataSource:v,columns:B,rowKey:"productID",pagination:!1,bordered:!0}),e.jsx(Me,{total:v.length,showSizeChanger:!0,onShowSizeChange:(V,x)=>{d(x)},style:{marginTop:"20px",textAlign:"center"}})]}):e.jsx("p",{children:"No products available."})}),e.jsx(re,{title:"Chi Tiết Sản Phẩm",visible:w,onCancel:q,footer:null,children:e.jsx(Ll,{product:T,loading:n,onClose:q})})]})},fs=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!1),[c,f]=r.useState(1),[u,d]=r.useState(10),[o,S]=r.useState(0),[P,I]=r.useState(""),[T,N]=r.useState("");r.useEffect(()=>{D()},[c,u,P]),r.useEffect(()=>{N("")},[P]);const D=async()=>{a(!0);try{console.log("Fetching products with pageIndex:",c,"and pageSize:",u);const g=P?await Nt(P,c,u):await Ee(c,u);g?(t(g.items||[]),S(g.total||0)):h.error("Failed to fetch products")}catch{h.error("Error fetching products")}a(!1)};return e.jsx("div",{children:n?e.jsx(te,{}):e.jsx($l,{})})},{Title:Rl}=ie,Hl={0:{text:"Chờ xử lý",color:"blue",icon:"fa-hourglass-start"},1:{text:"Sản phẩm sẵn sàng được giao",color:"green",icon:"fa-check-circle"},2:{text:"Hoàn thành",color:"yellow",icon:"fa-clipboard-check"},3:{text:"Đã nhận sản phẩm",color:"purple",icon:"fa-shopping-cart"},4:{text:"Đã giao hàng",color:"cyan",icon:"fa-truck"},5:{text:"Thanh toán thất bại",color:"cyan",icon:"fa-money-bill-wave"},6:{text:"Đang hủy",color:"lime",icon:"fa-box-open"},7:{text:"Đã hủy thành công",color:"red",icon:"fa-times-circle"},8:{text:"Đã Thanh toán",color:"orange",icon:"fa-money-bill-wave"},9:{text:"Hoàn tiền đang chờ xử lý",color:"pink",icon:"fa-clock"},10:{text:"Hoàn tiền",color:"brown",icon:"fa-undo"},11:{text:"Hoàn trả tiền đặt cọc",color:"gold",icon:"fa-piggy-bank"}},Ol={0:{text:"Mua",color:"indigo",icon:"fa-shopping-bag"},1:{text:"Thuê",color:"green",icon:"fa-warehouse"}},Bl={0:{text:"Nhận tại cửa hàng",color:"blue",icon:"fa-store"},1:{text:"Giao hàng tận nơi",color:"green",icon:"fa-truck"},2:{text:"Trả lại",color:"red",icon:"fa-undo"}},Yl=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(1),[u,d]=r.useState(10),[o,S]=r.useState(0),[P,I]=r.useState({}),[T,N]=r.useState({}),[D,g]=r.useState(""),w=X(p=>p.user.user||{});r.useEffect(()=>{(async()=>{if(!w||!w.id){console.error("User ID is not available");return}try{const l=await xt(w.id);l&&l.isSuccess?(g(l.result),console.log("Fetched staffId:",l.result)):console.error("Failed to fetch staffId:",l.messages)}catch(l){console.error("Error fetching staffId:",l)}})()},[w]),r.useEffect(()=>{(async()=>{a(!0);const l=await Ws(c,u);if(l&&l.isSuccess){t(l.result),S(l.totalCount);const v={},m={};await Promise.all(l.result.map(async j=>{if(j.supplierID)try{const b=await be(j.supplierID);b&&b.isSuccess&&b.result.items.length>0?v[j.supplierID]=b.result.items[0].supplierName:console.error(`No data found for supplierID: ${j.supplierID}`)}catch(b){console.error(`Error fetching supplierID: ${j.supplierID}`,b)}if(j.accountID)try{const b=await Kt(j.accountID);b&&b.isSuccess?m[j.accountID]=`${b.result.lastName} ${b.result.firstName}`:console.error(`No data found for accountID: ${j.accountID}`)}catch(b){console.error(`Error fetching accountID: ${j.accountID}`,b)}})),I(v),N(m)}a(!1)})()},[c,u]);const A=async(p,l,v)=>{var m,j;if(!w||!w.id){console.error("User ID is not available");return}try{const b=await xt(w.id);if(!b||!b.isSuccess){console.error("Failed to fetch staffId:",b?b.messages:"No response");return}const i=b.result;console.log("Staff ID:",i);let L;l===7&&v===1||l===7&&v===0?L=await or(p,i):l===9&&v===1&&(L=await dr(p,i)),L&&L.isSuccess?re.success({title:"Thông tin hoàn tiền",content:e.jsxs("div",{children:[e.jsxs("p",{children:["Ngân hàng: ",L.result.bankName]}),e.jsxs("p",{children:["Số tài khoản: ",L.result.accountNumber]}),e.jsxs("p",{children:["Chủ tài khoản: ",L.result.accountHolder]}),e.jsxs("p",{children:["Mã đơn hàng: ",L.result.orderId]}),e.jsxs("p",{children:["Tổng số tiền:"," ",new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(L.result.totalAmount)]})]})}):h.error("Không thể khởi tạo thanh toán.")}catch(b){h.error("Không thể tạo đơn hàng. "+(((j=(m=b.response)==null?void 0:m.data)==null?void 0:j.title)||"")),console.error("Error creating refund:",b)}},F=[{title:"Mã nhà cung cấp",dataIndex:"supplierID",key:"supplierID",render:p=>P[p]},{title:"Mã đơn hàng",dataIndex:"orderID",key:"orderID"},{title:"Mã tài khoản",dataIndex:"accountID",key:"accountID",render:p=>T[p]},{title:"Ngày đặt hàng",dataIndex:"orderDate",key:"orderDate",render:p=>je(p).format("DD - MM - YYYY HH:mm")},{title:"Trạng thái đơn hàng",dataIndex:"orderStatus",key:"orderStatus",render:p=>{const l=Hl[p];return e.jsxs(me,{color:l.color,children:[e.jsx("i",{className:`fa ${l.icon}`})," ",l.text]})}},{title:"Tổng số tiền",dataIndex:"totalAmount",key:"totalAmount",render:p=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p)},{title:"Loại đơn hàng",dataIndex:"orderType",key:"orderType",render:p=>{const l=Ol[p];return e.jsxs(me,{color:l.color,children:[e.jsx("i",{className:`fa ${l.icon}`})," ",l.text]})}},{title:"Địa chỉ giao hàng",dataIndex:"shippingAddress",key:"shippingAddress"},{title:"Phương thức giao hàng",dataIndex:"deliveriesMethod",key:"deliveriesMethod",render:p=>{const l=Bl[p];return e.jsxs(me,{color:l.color,children:[e.jsx("i",{className:`fa ${l.icon}`})," ",l.text]})}},{title:"Tiền đặt cọc",dataIndex:"deposit",key:"deposit",render:p=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p)},{title:"Hành động",key:"action",render:(p,l)=>(l.orderStatus===7&&l.orderType===0||l.orderStatus===7&&l.orderType===1||l.orderStatus===9&&l.orderType===1)&&e.jsx(H,{type:"primary",onClick:()=>A(l.orderID,l.orderStatus,l.orderType),children:"Hoàn tiền"})}];return e.jsxs("div",{className:"p-4 max-w-4xl ",children:[e.jsx(Rl,{level:2,className:"text-center",children:"Danh Sách Đơn Hàng"}),e.jsx(se,{columns:F,dataSource:s,rowKey:"orderID",loading:n,pagination:{current:c,pageSize:u,total:o,onChange:(p,l)=>{f(p),d(l)}}})]})},{Title:Gl}=ie,ql={0:{text:"Chờ xử lý",color:"blue",icon:"fa-hourglass-start"},1:{text:"Sản phẩm sẵn sàng được giao",color:"green",icon:"fa-check-circle"},2:{text:"Hoàn thành",color:"yellow",icon:"fa-clipboard-check"},3:{text:"Đã nhận sản phẩm",color:"purple",icon:"fa-shopping-cart"},4:{text:"Đã giao hàng",color:"cyan",icon:"fa-truck"},5:{text:"Thanh toán thất bại",color:"cyan",icon:"fa-money-bill-wave"},6:{text:"Đang hủy",color:"lime",icon:"fa-box-open"},7:{text:"Đã hủy thành công",color:"red",icon:"fa-times-circle"},8:{text:"Đã Thanh toán",color:"orange",icon:"fa-money-bill-wave"},9:{text:"Hoàn tiền đang chờ xử lý",color:"pink",icon:"fa-clock"},10:{text:"Hoàn tiền",color:"brown",icon:"fa-undo"},11:{text:"Hoàn trả tiền đặt cọc",color:"gold",icon:"fa-piggy-bank"}},zl={0:{text:"Mua",color:"indigo",icon:"fa-shopping-bag"},1:{text:"Thuê",color:"green",icon:"fa-warehouse"}},Kl={0:{text:"Nhận tại cửa hàng",color:"blue",icon:"fa-store"},1:{text:"Giao hàng tận nơi",color:"green",icon:"fa-truck"},2:{text:"Trả lại",color:"red",icon:"fa-undo"}},Wl=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!0),[c,f]=r.useState(1),[u,d]=r.useState(10),[o,S]=r.useState(0),[P,I]=r.useState({}),[T,N]=r.useState({}),[D,g]=r.useState(""),w=X(p=>p.user.user||{});r.useEffect(()=>{(async()=>{if(!w||!w.id){console.error("User ID is not available");return}try{const l=await xt(w.id);l&&l.isSuccess?(g(l.result),console.log("Fetched staffId:",l.result)):console.error("Failed to fetch staffId:",l.messages)}catch(l){console.error("Error fetching staffId:",l)}})()},[w]),r.useEffect(()=>{(async()=>{a(!0);const l=await Ws(c,u);if(l&&l.isSuccess){t(l.result),S(l.totalCount);const v={},m={};await Promise.all(l.result.map(async j=>{if(j.supplierID)try{const b=await be(j.supplierID);b&&b.isSuccess&&b.result.items.length>0?v[j.supplierID]=b.result.items[0].supplierName:console.error(`No data found for supplierID: ${j.supplierID}`)}catch(b){console.error(`Error fetching supplierID: ${j.supplierID}`,b)}if(j.accountID)try{const b=await Kt(j.accountID);b&&b.isSuccess?m[j.accountID]=`${b.result.lastName} ${b.result.firstName}`:console.error(`No data found for accountID: ${j.accountID}`)}catch(b){console.error(`Error fetching accountID: ${j.accountID}`,b)}})),I(v),N(m)}a(!1)})()},[c,u]);const A=async(p,l,v)=>{var b,i;if(!w||!w.id){console.error("User ID is not available");return}const m=await xt(w.id);if(!m||!m.isSuccess){console.error("Failed to fetch staffId:",m?m.messages:"No response");return}const j=m.result;console.log("Staff ID:",j);try{let L;l===7&&v===1||l===7&&v===0?L=await or(p,j):l===2&&v===1&&(L=await dr(p,j)),L&&L.isSuccess?(h.success("Tạo đơn hàng thành công. Đang chuyển hướng đến thanh toán..."),window.location.href=L.result):h.error("Không thể khởi tạo thanh toán.")}catch(L){h.error("Không thể tạo đơn hàng. "+(((i=(b=L.response)==null?void 0:b.data)==null?void 0:i.title)||"")),console.error(L)}},F=[{title:"Mã nhà cung cấp",dataIndex:"supplierID",key:"supplierID",render:p=>P[p]},{title:"Mã đơn hàng",dataIndex:"orderID",key:"orderID"},{title:"Mã tài khoản",dataIndex:"accountID",key:"accountID",render:p=>T[p]},{title:"Ngày đặt hàng",dataIndex:"orderDate",key:"orderDate",render:p=>je(p).format("DD - MM - YYYY HH:mm")},{title:"Trạng thái đơn hàng",dataIndex:"orderStatus",key:"orderStatus",render:p=>{const l=ql[p];return e.jsxs(me,{color:l.color,children:[e.jsx("i",{className:`fa ${l.icon}`})," ",l.text]})}},{title:"Tổng số tiền",dataIndex:"totalAmount",key:"totalAmount",render:p=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p)},{title:"Loại đơn hàng",dataIndex:"orderType",key:"orderType",render:p=>{const l=zl[p];return e.jsxs(me,{color:l.color,children:[e.jsx("i",{className:`fa ${l.icon}`})," ",l.text]})}},{title:"Địa chỉ giao hàng",dataIndex:"shippingAddress",key:"shippingAddress"},{title:"Phương thức giao hàng",dataIndex:"deliveriesMethod",key:"deliveriesMethod",render:p=>{const l=Kl[p];return e.jsxs(me,{color:l.color,children:[e.jsx("i",{className:`fa ${l.icon}`})," ",l.text]})}},{title:"Tiền đặt cọc",dataIndex:"deposit",key:"deposit",render:p=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p)},{title:"Hành động",key:"action",render:(p,l)=>(l.orderStatus===7&&l.orderType===0||l.orderStatus===7&&l.orderType===1||l.orderStatus===2&&l.orderType===1)&&e.jsx(H,{type:"primary",onClick:()=>A(l.orderID,l.orderStatus,l.orderType),children:"Hoàn tiền"})}];return e.jsxs("div",{className:"p-4 max-w-4xl ",children:[e.jsx(Gl,{level:2,className:"text-center",children:"Danh Sách Đơn Hàng"}),e.jsx(se,{columns:F,dataSource:s,rowKey:"orderID",loading:n,pagination:{current:c,pageSize:u,total:o,onChange:(p,l)=>{f(p),d(l)}}})]})},Ul=async(s,t=1,n=1)=>{try{return(await G.get(`/staff/get-staff-by-id?StaffID=${s}&pageIndex=${t}&pageSize=${n}`)).data}catch(a){return console.error("Error fetching staff by ID:",a),null}},Ql=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(1),[c,f]=r.useState(10),[u,d]=r.useState(!1),[o,S]=r.useState({}),[P,I]=r.useState({});r.useEffect(()=>{(async()=>{d(!0);const w=await vl(n,c);if(w){t(w.result);const A={},F={};await Promise.all(w.result.map(async p=>{if(p.accountID){const l=await Kt(p.accountID);l&&l.result&&(A[p.accountID]=`${l.result.lastName} ${l.result.firstName}`)}if(p.staffID){const l=await Ul(p.staffID);l&&(F[p.staffID]=`${l.result.account.firstName} ${l.result.account.lastName} `)}})),S(A),I(F)}d(!1)})()},[n,c]);const T=()=>{a(g=>g+1)},N=()=>{a(g=>Math.max(g-1,1))},D=[{title:"Mã giao dịch lịch sử",dataIndex:"historyTransactionId",key:"historyTransactionId"},{title:"Tên tài khoản",dataIndex:"accountID",key:"accountID",render:g=>o[g]},{title:"Tên nhân viên",dataIndex:"staffID",key:"staffID",render:g=>P[g]},{title:"Số tiền",dataIndex:"price",key:"price",render:g=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(g)},{title:"Mô tả giao dịch",dataIndex:"transactionDescription",key:"transactionDescription"},{title:"Ngày tạo",dataIndex:"createdAt",key:"createdAt",render:g=>je(g).format("DD - MM - YYYY HH:mm")}];return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Danh sách lịch sử giao dịch"}),u?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(te,{size:"large"})}):e.jsxs("div",{children:[e.jsx(se,{dataSource:s,columns:D,rowKey:"historyTransactionId",pagination:!1}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx(H,{onClick:N,disabled:n===1,children:"Trước"}),e.jsxs("span",{children:["Trang ",n]}),e.jsx(H,{onClick:T,children:"Tiếp"})]})]})]})},ys={0:"Thanh toán",1:"Hoàn tiền"},js={0:"Đang chờ",1:"Hoàn thành",2:"Thất bại"},bs={0:"VNPAY",1:"Thẻ tín dụng",2:"Chuyển khoản ngân hàng"},Xl={0:"Thành công",1:"Thất bại",2:"Đang chờ"},_l=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(1),[c]=r.useState(10),[f,u]=r.useState(!1),[d,o]=r.useState(null),[S,P]=r.useState(!1);r.useEffect(()=>{(async()=>{u(!0);const A=await Nl(n,c);A&&t(A.result),u(!1)})()},[n,c]);const I=()=>{a(w=>w+1)},T=()=>{a(w=>Math.max(w-1,1))},N=async w=>{const A=await Sl(w.transactionID);A&&(o(A.result),P(!0))},D=()=>{P(!1),o(null)},g=[{title:"Mã giao dịch",dataIndex:"transactionID",key:"transactionID"},{title:"Mã đơn hàng",dataIndex:"orderID",key:"orderID"},{title:"Ngày giao dịch",dataIndex:"transactionDate",key:"transactionDate",render:w=>je(w).format("DD - MM - YYYY HH:mm")},{title:"Số tiền",dataIndex:"amount",key:"amount",render:w=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(w)},{title:"Loại giao dịch",dataIndex:"transactionType",key:"transactionType",render:w=>ys[w]},{title:"Trạng thái thanh toán",dataIndex:"paymentStatus",key:"paymentStatus",render:w=>js[w]},{title:"Phương thức thanh toán",dataIndex:"paymentMethod",key:"paymentMethod",render:w=>bs[w]}];return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Danh sách giao dịch"}),f?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(te,{size:"large"})}):e.jsxs("div",{children:[e.jsx(se,{dataSource:s,columns:g,rowKey:"transactionID",pagination:!1,onRow:w=>({onDoubleClick:()=>N(w)})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx(H,{onClick:T,disabled:n===1,children:"Trước"}),e.jsxs("span",{children:["Trang ",n]}),e.jsx(H,{onClick:I,children:"Tiếp"})]})]}),e.jsx(re,{title:"Chi tiết giao dịch",visible:S,onCancel:D,footer:[e.jsx(H,{onClick:D,children:"Đóng"},"close")],children:d&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mã giao dịch:"})," ",d.transactionID]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mã đơn hàng:"})," ",d.orderID]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ngày giao dịch:"})," ",d.transactionDate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Số tiền:"})," ",d.amount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Loại giao dịch:"})," ",ys[d.transactionType]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Trạng thái thanh toán:"})," ",js[d.paymentStatus]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phương thức thanh toán:"})," ",bs[d.paymentMethod]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mã giao dịch VNPAY:"})," ",d.vnpayTransactionID]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Trạng thái giao dịch VNPAY:"})," ",Xl[d.vnpayTransactionStatus]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Thời gian giao dịch VNPAY:"})," ",d.vnpayTransactionTime]})]})})]})},Jl=()=>{const[s,t]=r.useState(!1),n=[{key:"1",label:"Danh Sách Giao Dịch Đơn Hàng Hệ Thống",children:e.jsx(_l,{refresh:s})},{key:"2",label:"Danh Sách Giao Dịch Hoàn Trả",children:e.jsx(Ql,{refresh:s})},{key:"3",label:"Tạo Giao Dịch Hoàn Trả Cho Khách Hàng",children:e.jsx(Yl,{refresh:s})},{key:"4",label:"Tạo Giao Dịch Hoàn Trả Cho Nhà cung cấp",children:e.jsx(Wl,{refresh:s})}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Quản Lí Giao Dịch Sản Phẩm"})," ",e.jsx(He,{defaultActiveKey:"1",items:n})]})},Zl=()=>{const[s,t]=r.useState([]),[n,a]=r.useState([]),[c,f]=r.useState(!0),[u,d]=r.useState(0),[o,S]=r.useState(1),[P,I]=r.useState(10),[T,N]=r.useState(!1),[D,g]=r.useState(null),[w,A]=r.useState("");r.useEffect(()=>{(async()=>{f(!0);try{const m=await Zs(o,P);m&&m.isSuccess?(t(m.result),a(m.result),d(m.result.length)):console.error("Không thể tải danh sách voucher:",m.messages)}catch(m){console.error("Lỗi khi tải danh sách voucher:",m)}finally{f(!1)}})()},[o,P]);const F=v=>{g(v),N(!0)},p=v=>{if(A(v),v){const m=n.filter(j=>j.vourcherCode.toLowerCase().includes(v.toLowerCase())||j.description.toLowerCase().includes(v.toLowerCase()));t(m),d(m.length)}else t(n),d(n.length)},l=[{title:"Mã nhà cung cấp",dataIndex:"supplierID",key:"supplierID"},{title:"Mã voucher",dataIndex:"vourcherID",key:"vourcherID"},{title:"Mã voucher",dataIndex:"vourcherCode",key:"vourcherCode"},{title:"Mô tả",dataIndex:"description",key:"description"},{title:"Số tiền giảm giá",dataIndex:"discountAmount",key:"discountAmount",render:v=>`${v} VND`},{title:"Hiệu lực từ",dataIndex:"validFrom",key:"validFrom",render:v=>new Date(v).toLocaleDateString()},{title:"Ngày hết hạn",dataIndex:"expirationDate",key:"expirationDate",render:v=>new Date(v).toLocaleDateString()},{title:"Hoạt động",dataIndex:"isActive",key:"isActive",render:v=>v?e.jsx(ke,{style:{color:"green"}}):e.jsx(ut,{style:{color:"red"}})}];return e.jsxs("div",{children:[e.jsx(Y,{placeholder:"Tìm kiếm theo mã voucher hoặc mô tả",onChange:v=>p(v.target.value),style:{marginBottom:16}}),c?e.jsx(te,{}):e.jsxs(e.Fragment,{children:[e.jsx(se,{dataSource:s,columns:l,rowKey:"vourcherID",pagination:!1,onRow:v=>({onDoubleClick:()=>F(v)})}),e.jsx(Me,{current:o,total:u,pageSize:P,onChange:v=>S(v),showSizeChanger:!0,onShowSizeChange:(v,m)=>I(m),style:{marginTop:16,textAlign:"right"}}),e.jsx(re,{title:"Chi tiết voucher",visible:T,onCancel:()=>N(!1),footer:null,children:D&&e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Mã voucher:"})," ",D.vourcherCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mô tả:"})," ",D.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Số tiền giảm giá:"})," ",D.discountAmount," VND"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hiệu lực từ:"})," ",new Date(D.validFrom).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Ngày hết hạn:"})," ",new Date(D.expirationDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hoạt động:"})," ",D.isActive?"Có":"Không"]})]})})]})]})},{TabPane:ei}=He,ti=()=>{const[s,t]=r.useState(!1);return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Manage Vouchers"}),e.jsx(He,{defaultActiveKey:"1",children:e.jsx(ei,{tab:"Voucher List",children:e.jsx(Zl,{refresh:s})},"1")})]})},si=({visible:s,onClose:t,contractTemplateId:n,onUpdateSuccess:a})=>{const[c]=C.useForm(),[f,u]=r.useState(!1);r.useEffect(()=>{(async()=>{if(n)try{const S=await ll(n);c.setFieldsValue(S.result)}catch(S){console.error("Error fetching contract template data:",S)}})()},[n,c]);const d=async o=>{u(!0);try{await al(n,o),a(),t()}catch(S){console.error("Error updating contract template:",S)}finally{u(!1)}};return e.jsx(re,{visible:s,title:"Cập nhật mẫu hợp đồng",onCancel:t,footer:null,children:e.jsxs(C,{form:c,onFinish:d,layout:"vertical",children:[e.jsx(C.Item,{name:"templateName",label:"Tên mẫu hợp đồng",rules:[{required:!0,message:"Vui lòng nhập tên mẫu hợp đồng!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"contractTerms",label:"Điều khoản hợp đồng",rules:[{required:!0,message:"Vui lòng nhập điều khoản hợp đồng!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"templateDetails",label:"Chi tiết mẫu hợp đồng",rules:[{required:!0,message:"Vui lòng nhập chi tiết mẫu hợp đồng!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"penaltyPolicy",label:"Chính sách phạt",rules:[{required:!0,message:"Vui lòng nhập chính sách phạt!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"accountID",label:"ID tài khoản",rules:[{required:!0,message:"Vui lòng nhập ID tài khoản!"}],children:e.jsx(Y,{disabled:!0})}),e.jsx(C.Item,{name:"productID",label:"ID sản phẩm",rules:[{required:!0,message:"Vui lòng nhập ID sản phẩm!"}],children:e.jsx(Y,{disabled:!0})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:f,children:"Cập nhật"})})]})})},{Search:ri}=Y,ni=({refresh:s})=>{const[t,n]=r.useState([]),[a,c]=r.useState(!0),[f,u]=r.useState(null),[d,o]=r.useState(""),[S,P]=r.useState(!1),[I,T]=r.useState(null),[N,D]=r.useState([]),[g,w]=r.useState(1),[A,F]=r.useState(20),[p,l]=r.useState(0),v=X(k=>k.user.user||{});v.id,r.useEffect(()=>{const k=async()=>{c(!0),u(null);try{const q=await il(g,A,d);n(q.result.items),l(q.result.totalCount)}catch(q){u(q),h.error("Lỗi khi lấy danh sách mẫu hợp đồng.")}finally{c(!1)}},B=async()=>{try{const q=await Ee(1,100);D(q)}catch(q){console.error("Error fetching products:",q),h.error("Lỗi khi lấy danh sách sản phẩm.")}};k(),B()},[s,g,A,d]);const m=k=>{o(k.target.value),w(1)},j=k=>{T(k),P(!0)},b=async k=>{try{await cl(k),h.success("Xóa mẫu hợp đồng thành công."),n(B=>B.filter(q=>q.contractTemplateID!==k))}catch{h.error("Lỗi khi xóa mẫu hợp đồng.")}},i=()=>{h.success("Cập nhật mẫu hợp đồng thành công."),P(!1),w(1)},L=()=>[{title:"Tên mẫu hợp đồng",dataIndex:"templateName",key:"templateName",filterDropdown:({setSelectedKeys:k,selectedKeys:B,confirm:q,clearFilters:V})=>e.jsxs("div",{style:{padding:8},children:[e.jsx(Y,{placeholder:"Tìm kiếm tên mẫu hợp đồng",value:B[0],onChange:x=>k(x.target.value?[x.target.value]:[]),onPressEnter:()=>q(),style:{marginBottom:8,display:"block"}}),e.jsxs(tt,{children:[e.jsx(H,{type:"primary",onClick:()=>q(),size:"small",style:{width:90},children:"Tìm kiếm"}),e.jsx(H,{onClick:()=>V(),size:"small",style:{width:90},children:"Xóa"})]})]}),onFilter:(k,B)=>B.templateName.toLowerCase().includes(k.toLowerCase())},{title:"Điều khoản hợp đồng",dataIndex:"contractTerms",key:"contractTerms"},{title:"Chi tiết mẫu hợp đồng",dataIndex:"templateDetails",key:"templateDetails"},{title:"Chính sách phạt",dataIndex:"penaltyPolicy",key:"penaltyPolicy"},{title:"Tên tài khoản",dataIndex:"accountID",key:"accountID",render:()=>`${v.firstName} ${v.lastName}`},{title:"Tên sản phẩm",dataIndex:"productID",key:"productID",render:k=>{const B=N.find(q=>q.productID===k);return B?B.productName:"N/A"}},{title:"Hành động",key:"actions",render:(k,B)=>e.jsxs(tt,{size:"middle",children:[e.jsx(H,{type:"primary",onClick:()=>j(B.contractTemplateID),children:"Cập nhật"}),e.jsx(H,{type:"danger",onClick:()=>b(B.contractTemplateID),children:"Xóa"})]})}];return e.jsxs("div",{children:[e.jsx("h2",{children:"Danh sách mẫu hợp đồng"}),e.jsx(ri,{placeholder:"Tìm kiếm theo tên mẫu hợp đồng",onChange:m,enterButton:!0,style:{marginBottom:20}}),a?e.jsx(te,{tip:"Đang tải..."}):f?e.jsxs("div",{children:["Lỗi: ",f.message]}):e.jsx(se,{dataSource:t,columns:L(),rowKey:"contractTemplateID",pagination:{current:g,pageSize:A,total:p,onChange:(k,B)=>{w(k),F(B)}}}),e.jsx(si,{visible:S,onClose:()=>P(!1),contractTemplateId:I,onUpdateSuccess:i})]})},{Option:Ns}=Z,ai=()=>{const s=X(l=>l.user.user||{}),[t,n]=r.useState(null),[a,c]=r.useState([]),[f,u]=r.useState({templateName:"",contractTerms:"",templateDetails:"",penaltyPolicy:"",accountID:s.id,productID:""}),[d,o]=r.useState(!1),[S,P]=r.useState(null),[I,T]=r.useState(!1),[N,D]=r.useState(1),[g,w]=r.useState(10);r.useState(0),r.useEffect(()=>{(async()=>{if(s.id)try{const v=await Ve(s.id);v!=null&&v.isSuccess?n(v.result):h.error("Không thể lấy ID nhà cung cấp.")}catch{h.error("Lỗi khi lấy ID nhà cung cấp.")}})()},[s]);const A=async()=>{if(t){o(!0);try{const l=await bt(t,N,g);if(console.log("Fetched products:",l),l&&l.length>0){const v=l.filter(m=>m.status===1);c(v)}else c([])}catch(l){console.error("Lỗi khi lấy sản phẩm:",l),c([]),h.error("Lỗi khi lấy sản phẩm.")}finally{o(!1)}}};r.useEffect(()=>{t&&A()},[t,N,g]);const F=(l,v)=>{u({...f,[l]:v})},p=async()=>{o(!0),P(null),T(!1);try{await nl(f),T(!0)}catch(l){P(l)}finally{o(!1)}};return e.jsxs("div",{className:"p-8 bg-white rounded-lg shadow-lg max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Tạo Mẫu Hợp Đồng"}),e.jsxs(C,{layout:"vertical",onFinish:p,children:[e.jsx(C.Item,{label:"Tên Mẫu",name:"templateName",rules:[{required:!0,message:"Vui lòng nhập tên mẫu!"}],children:e.jsx(Y,{value:f.templateName,onChange:l=>F("templateName",l.target.value)})}),e.jsx(C.Item,{label:"Điều Khoản Hợp Đồng",name:"contractTerms",rules:[{required:!0,message:"Vui lòng nhập điều khoản hợp đồng!"}],children:e.jsx(Y,{value:f.contractTerms,onChange:l=>F("contractTerms",l.target.value)})}),e.jsx(C.Item,{label:"Chi Tiết Mẫu",name:"templateDetails",rules:[{required:!0,message:"Vui lòng nhập chi tiết mẫu!"}],children:e.jsx(Y,{value:f.templateDetails,onChange:l=>F("templateDetails",l.target.value)})}),e.jsx(C.Item,{label:"Chính Sách Phạt",name:"penaltyPolicy",rules:[{required:!0,message:"Vui lòng nhập chính sách phạt!"}],children:e.jsx(Y,{value:f.penaltyPolicy,onChange:l=>F("penaltyPolicy",l.target.value)})}),e.jsx(C.Item,{label:"Sản Phẩm",name:"productID",rules:[{required:!0,message:"Vui lòng chọn sản phẩm!"}],children:e.jsxs(Z,{value:f.productID,onChange:l=>F("productID",l),placeholder:"Chọn sản phẩm",children:[e.jsx(Ns,{value:"",children:"Chọn sản phẩm"}),a&&a.map(l=>e.jsx(Ns,{value:l.productID,children:l.productName},l.productID))]})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:d,className:"w-full",children:d?"Đang tạo...":"Tạo Mẫu"})})]}),S&&e.jsxs("div",{className:"text-red-500 mt-4",children:["Lỗi: ",S.message]}),I&&e.jsx("div",{className:"text-green-500 mt-4",children:"Tạo mẫu thành công!"})]})},ci=()=>{const[s,t]=r.useState(!1),n=[{key:"1",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Danh sách điều khoản hợp đồng"}),children:e.jsx(ni,{refresh:s})},{key:"2",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Tạo điều khoản hợp đồng sản phẩm"}),children:e.jsx(ai,{})}];return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-blue-50 to-white rounded-lg shadow-lg max-w-1xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"TRANG QUẢN LÍ MẪU HỢP ĐỒNG"}),e.jsx(He,{defaultActiveKey:"1",items:n,className:"custom-tabs",tabBarStyle:{padding:"1rem",backgroundColor:"#f1f5f9",borderRadius:"4px",fontSize:"1rem"},tabBarExtraContent:e.jsx("span",{className:"text-gray-500 italic"})}),e.jsx("style",{jsx:!0,children:`
        @media (forced-colors: active) {
          /* Styles for forced colors mode */
          body {
            background-color: Window;
            color: WindowText;
          }
          .custom-tabs {
            background-color: Window;
            border-color: WindowText;
          }
          .ant-tabs-card {
            background-color: Window;
          }
        }
      `})]})},{RangePicker:li}=we,ii=()=>{var F,p,l,v,m,j,b,i,L,k,B,q;const s=X(V=>V.user.user||{}),t=s.id,n=s.supplierID,[a,c]=r.useState([]),[f,u]=r.useState(!1),[d,o]=r.useState(1),[S,P]=r.useState(10),[I,T]=r.useState(0),[N,D]=r.useState([null,null]);r.useEffect(()=>{const V=async(x,y,E,K)=>{u(!0);try{const W=await Xt(n,x,y,E,K);W&&W.isSuccess?(c(Array.isArray(W.result)?W.result:[]),T(W.totalCount||0)):h.error("No vouchers available.")}catch{h.error("Failed to fetch vouchers.")}u(!1)};if(n){const[x,y]=N;V(d,S,x?x.format("YYYY-MM-DD"):null,y?y.format("YYYY-MM-DD"):null)}},[n,d,S,N]);const g=V=>{D(V),o(1)},w=[{title:"Voucher ID",dataIndex:"id",key:"id"},{title:"Voucher Name",dataIndex:"name",key:"name"},{title:"Voucher Value",dataIndex:"value",key:"value"}],A=V=>{o(V.current),P(V.pageSize)};return e.jsxs("div",{children:[e.jsx("h1",{children:"Dashboard Admin"}),e.jsx(li,{onChange:g,format:"YYYY-MM-DD",style:{marginBottom:16}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("div",{style:{flex:1,marginRight:"16px"},children:[e.jsx(sr,{startDate:(F=N[0])==null?void 0:F.format("YYYY-MM-DD"),endDate:(p=N[1])==null?void 0:p.format("YYYY-MM-DD")}),e.jsx(rr,{supplierId:n,startDate:(l=N[0])==null?void 0:l.format("YYYY-MM-DD"),endDate:(v=N[1])==null?void 0:v.format("YYYY-MM-DD")}),e.jsx(lr,{supplierId:n}),e.jsx(nr,{supplierId:n,startDate:(m=N[0])==null?void 0:m.format("YYYY-MM-DD"),endDate:(j=N[1])==null?void 0:j.format("YYYY-MM-DD")}),e.jsx(tr,{accountId:t,startDate:(b=N[0])==null?void 0:b.format("YYYY-MM-DD"),endDate:(i=N[1])==null?void 0:i.format("YYYY-MM-DD")}),e.jsx(cr,{supplierId:n,startDate:(L=N[0])==null?void 0:L.format("YYYY-MM-DD"),endDate:(k=N[1])==null?void 0:k.format("YYYY-MM-DD")}),e.jsx(ir,{supplierId:n}),e.jsx(ar,{supplierId:n,startDate:(B=N[0])==null?void 0:B.format("YYYY-MM-DD"),endDate:(q=N[1])==null?void 0:q.format("YYYY-MM-DD")})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{children:"Vouchers"}),f?e.jsx(te,{tip:"Loading vouchers..."}):e.jsx(se,{dataSource:a,columns:w,rowKey:"id",pagination:{current:d,pageSize:S,total:I,showSizeChanger:!0},onChange:A})]})]})]})},{Title:Ss,Text:pe,Paragraph:Is}=ie,{Option:Vt}=Z,oi=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!1),[c,f]=r.useState(1),[u,d]=r.useState(10),[o,S]=r.useState(0),P=X(y=>y.user.user||{}),[I,T]=r.useState(null),[N,D]=r.useState(""),[g,w]=r.useState(null),[A,F]=r.useState(!1),[p,l]=r.useState({}),[v,m]=r.useState(null);Le(),r.useEffect(()=>{(async()=>{if(P.id)try{const E=await Ve(P.id);E!=null&&E.isSuccess?T(E.result):h.error("Failed to fetch supplier ID.")}catch{h.error("Error fetching supplier ID.")}})()},[P]);const j=async()=>{if(I){a(!0);try{const y=await bt(I,c,u);if(Array.isArray(y)){t(y),S(y.totalCount||0);const E=y.map(async K=>{if(K.categoryID){const W=await Te(K.categoryID);W!=null&&W.isSuccess&&l(R=>({...R,[K.categoryID]:W.result.categoryName}))}});await Promise.all(E)}else h.error("Unable to fetch products."),t([])}catch(y){console.error("Error fetching products:",y),t([]),h.error("Error fetching products.")}finally{a(!1)}}};r.useEffect(()=>{I&&j()},[I,c,u]);const b=async y=>{a(!0);try{const E=await ge(y);w(E),F(!0)}catch{h.error("Failed to fetch product details.")}finally{a(!1)}},i=y=>{const E=new Date(y),K=String(E.getDate()).padStart(2,"0"),W=String(E.getMonth()+1).padStart(2,"0"),R=E.getFullYear(),M=String(E.getHours()).padStart(2,"0"),_=String(E.getMinutes()).padStart(2,"0"),O=String(E.getSeconds()).padStart(2,"0");return`${K}/${W}/${R} ${M}:${_}:${O}`},L=()=>{F(!1),w(null)},k=y=>{m(y),f(1)},B=s.filter(y=>y.productName.toLowerCase().includes(N.toLowerCase())).filter(y=>v?y.brand===v:!0),q=(c-1)*u,V=q+u,x=B.slice(q,V);return e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[e.jsx(Y,{placeholder:"Tìm kiếm theo tên sản phẩm",value:N,onChange:y=>D(y.target.value),style:{width:"100%",maxWidth:300},prefix:e.jsx($e,{}),className:"mb-2 md:mb-0"}),e.jsxs(Z,{placeholder:"Filter by Brand",onChange:k,allowClear:!0,style:{width:200},className:"mt-2 md:mt-0",children:[e.jsx(Vt,{value:"Canon",children:"Canon"}),e.jsx(Vt,{value:"Nikon",children:"Nikon"}),e.jsx(Vt,{value:"Sony",children:"Sony"})]})]}),n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(te,{size:"large"})}):e.jsx(e.Fragment,{children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{gutter:[16,16],children:x.map(y=>e.jsx(U,{xs:24,sm:12,md:8,lg:12,children:e.jsx(Q,{className:"w-full flex flex-col justify-between overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 rounded-lg",cover:e.jsx("div",{style:{height:"200px",overflow:"hidden"},children:e.jsx("img",{alt:y.productName,src:y.listImage&&y.listImage.length>0?y.listImage[0].image:"https://via.placeholder.com/150?text=No+Image",style:{width:"100%",height:"100%",objectFit:"cover"}})}),children:e.jsx(Q.Meta,{title:e.jsxs("div",{children:[e.jsx(rs,{className:"mr-2"}),e.jsx(Ss,{level:5,className:"mb-0 truncate",children:y.productName})]}),description:e.jsxs("div",{className:"flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs(Is,{ellipsis:{rows:1},className:"flex items-center",children:[e.jsx(ae,{className:"mr-2"}),y.productDescription]}),e.jsxs(pe,{className:"flex items-center truncate",children:[e.jsx(fe,{className:"mr-2"}),"Giá Bán:"," ",y.priceBuy&&y.priceBuy!==0?`${y.priceBuy} VND`:"--"]}),e.jsxs(pe,{className:"flex items-center truncate",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Giờ:"," ",y.pricePerHour&&y.pricePerHour!==0?`${y.pricePerHour} VND`:"--"]}),e.jsxs(pe,{className:"flex items-center truncate",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Ngày:"," ",y.pricePerDay&&y.pricePerDay!==0?`${y.pricePerDay} VND`:"--"]}),e.jsxs(pe,{className:"flex items-center truncate",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Tuần:"," ",y.pricePerWeek&&y.pricePerWeek!==0?`${y.pricePerWeek} VND`:"--"]}),e.jsxs(pe,{className:"flex items-center truncate",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Tháng:"," ",y.pricePerMonth&&y.pricePerMonth!==0?`${y.pricePerMonth} VND`:"--"]}),e.jsxs(pe,{className:"flex items-center truncate",children:["Thương Hiệu: ",ue(y.brand)]}),e.jsxs(pe,{className:"flex items-center truncate",children:["Trạng Thái:"," ",Fe(y.status)]}),e.jsxs(pe,{className:"flex items-center truncate",children:[e.jsx(ae,{className:"mr-2"}),"Ngày Tạo: ",i(y.createdAt)]})]}),e.jsx(H,{type:"primary",onClick:()=>b(y.productID),className:"mt-2 bg-blue-600 hover:bg-blue-700 transition-colors duration-300",icon:e.jsx(ae,{}),children:"Xem Chi Tiết"})]})})})},y.productID))}),e.jsx(Me,{current:c,pageSize:u,total:B.length,showSizeChanger:!0,onShowSizeChange:(y,E)=>{d(E)},onChange:y=>{f(y)},style:{marginTop:"20px",textAlign:"center"}})]}):e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Es,{description:"Không có sản phẩm nào"})})}),e.jsx(re,{title:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"mr-2"}),"Chi Tiết Sản Phẩm"]}),visible:A,onCancel:L,footer:[e.jsx(H,{onClick:L,children:"Close"},"close")],className:"rounded-lg",children:g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Ss,{level:3,className:"flex items-center",children:[e.jsx(rs,{className:"mr-2"}),g.productName]}),e.jsxs(Is,{className:"flex items-center",children:[e.jsx(ae,{className:"mr-2"}),g.productDescription]}),e.jsxs(pe,{className:"flex items-center",children:[e.jsx(fe,{className:"mr-2"}),"Giá Mua: ",g.priceBuy]}),g.pricePerHour&&e.jsxs(pe,{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Giờ: ",g.pricePerHour]}),g.pricePerDay&&e.jsxs(pe,{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Ngày: ",g.pricePerDay]}),g.pricePerWeek&&e.jsxs(pe,{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Tuần: ",g.pricePerWeek]}),g.pricePerMonth&&e.jsxs(pe,{className:"flex items-center",children:[e.jsx(Be,{className:"mr-2"}),"Giá Thuê Theo Tháng: ",g.pricePerMonth]}),e.jsxs(pe,{className:"flex items-center",children:[e.jsx(ae,{className:"mr-2"}),"Thương Hiệu: ",ue(g.brand)]}),e.jsxs(pe,{className:"flex items-center",children:[e.jsx(ae,{className:"mr-2"}),"Trạng Thái: ",Fe(g.status)]}),e.jsxs(pe,{className:"flex items-center",children:[e.jsx(ae,{className:"mr-2"}),"Ngày Tạo: ",i(g.createdAt)]})]})})]})},vs=()=>{const{id:s}=Le(),[t,n]=r.useState(null),[a,c]=r.useState(!0),[f,u]=r.useState(!1),[d]=C.useForm();X(N=>N.user.role||"");const o=X(N=>N.user.user||{}),[S,P]=r.useState(null),I=async()=>{if(o.id)try{const N=await Ve(o.id);N!=null&&N.isSuccess?P(N.result):h.error("Không lấy được ID nhà cung cấp.")}catch{h.error("Có lỗi xảy ra khi lấy ID nhà cung cấp.")}};r.useEffect(()=>{I()},[o]),r.useEffect(()=>{(async()=>{c(!0);const D=await be(s);if(D&&D.isSuccess){const g=D.result.items[0];n(g),d.setFieldsValue(g)}else h.error("Lấy thông tin nhà cung cấp thất bại.");c(!1)})()},[s,d]);const T=async N=>{var A;const D=new FormData;D.append("SupplierID",t.supplierID),D.append("SupplierName",N.supplierName),D.append("SupplierDescription",N.supplierDescription),D.append("SupplierAddress",N.supplierAddress),D.append("ContactNumber",N.contactNumber);const g=(A=N.supplierLogo)==null?void 0:A.file;g&&D.append("SupplierLogo",g);const w=await Xn(D);w&&w.isSuccess?(h.success("Cập nhật nhà cung cấp thành công!"),u(!1),n({...t,...N}),d.resetFields()):h.error("Cập nhật nhà cung cấp thất bại.")};return a?e.jsx("div",{className:"flex justify-center",children:e.jsx(te,{size:"large"})}):t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Thông Tin Nhà Cung Cấp"}),f?e.jsxs(C,{form:d,layout:"vertical",onFinish:T,children:[e.jsx(C.Item,{label:"Tên Nhà Cung Cấp",name:"supplierName",rules:[{required:!0,message:"Vui lòng nhập tên nhà cung cấp!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{label:"Mô Tả",name:"supplierDescription",rules:[{required:!0,message:"Vui lòng nhập mô tả!"}],children:e.jsx(Y.TextArea,{})}),e.jsx(C.Item,{label:"Địa Chỉ",name:"supplierAddress",rules:[{required:!0,message:"Vui lòng nhập địa chỉ!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{label:"Số Điện Thoại",name:"contactNumber",rules:[{required:!0,message:"Vui lòng nhập số điện thoại!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{label:"Logo Nhà Cung Cấp",name:"supplierLogo",children:e.jsx(Y,{type:"file",accept:"image/*"})}),e.jsxs(C.Item,{children:[e.jsx(H,{type:"primary",htmlType:"submit",children:"Cập Nhật Nhà Cung Cấp"}),e.jsx(H,{className:"ml-2",onClick:()=>u(!1),children:"Hủy"})]})]}):e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tên:"})," ",t.supplierName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Mô Tả:"})," ",t.supplierDescription]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Địa Chỉ:"})," ",t.supplierAddress]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Liên Hệ:"})," ",t.contactNumber]}),S===t.supplierID&&e.jsx(H,{type:"primary",onClick:()=>u(!0),children:"Chỉnh Sửa Thông tin trang cá nhân"})]})]}),e.jsx(oi,{})]}):e.jsx("div",{children:"Không tìm thấy dữ liệu nhà cung cấp."})},di=()=>{const s=X(I=>I.user.user||{}),[t,n]=r.useState(null),[a,c]=r.useState([]),[f,u]=r.useState(!1),[d,o]=r.useState(1),[S,P]=r.useState(10);return r.useEffect(()=>{(async()=>{if(s.id)try{const T=await Ve(s.id);T!=null&&T.isSuccess?n(T.result):h.error("Lấy ID Nhà cung cấp không thành công.")}catch{h.error("Lỗi khi lấy ID Nhà cung cấp.")}})()},[s.id]),r.useEffect(()=>{(async()=>{if(t){u(!0);try{const T=await Us(t,d,S);T?c(T.result):h.error("Lấy đơn hàng không thành công.")}catch{h.error("Lỗi khi lấy đơn hàng.")}finally{u(!1)}}})()},[t,d,S]),e.jsxs("div",{children:[e.jsx("h2",{children:"Orders by Supplier"}),f?e.jsx("p",{children:"Loading orders..."}):e.jsx("ul",{children:a.map(I=>e.jsx("li",{children:I.name},I.id))})]})},hi=async(s,t,n)=>{try{return(await G.get("/contract/get-all-contracts-by-order-id",{params:{orderID:s,pageIndex:t,pageSize:n}})).data}catch(a){throw console.error("Error fetching contracts by order ID:",a),a}},ui=({orderID:s})=>{const[t,n]=r.useState([]),[a,c]=r.useState(!0),[f,u]=r.useState(1),[d,o]=r.useState(10),[S,P]=r.useState(""),I=async()=>{c(!0);try{const N=await hi(s,f,d,S);N.isSuccess?n(N.result.items):h.error("Không thể lấy hợp đồng.")}catch{h.error("Lỗi khi lấy hợp đồng theo ID đơn hàng.")}finally{c(!1)}};r.useEffect(()=>{I()},[s,f,d,S]);const T=[{title:"Mã hợp đồng",dataIndex:"contractID",key:"contractID",sorter:!0},{title:"Mã đơn hàng",dataIndex:"orderID",key:"orderID"},{title:"Chi tiết mẫu",dataIndex:"templateDetails",key:"templateDetails"},{title:"Điều khoản hợp đồng",dataIndex:"contractTerms",key:"contractTerms"},{title:"Chính sách phạt",dataIndex:"penaltyPolicy",key:"penaltyPolicy",sorter:!0}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Điều khoản hợp đồng"}),e.jsx(se,{dataSource:t,columns:T,rowKey:"contractID",loading:a,pagination:{current:f,pageSize:d,onChange:(N,D)=>{u(N),o(D)}},onChange:(N,D,g)=>{},className:"w-full"})]})},pi=async(s,t=1,n=10)=>{try{const a=await G.get(`/orderDetail/get-order-details/${s}`,{params:{pageIndex:t,pageSize:n}});if(a.status===200)return a.data;throw new Error("Failed to fetch order details.")}catch(a){throw console.error("Error fetching order details:",a),a}},{Step:mi}=st,gi=({order:s,onUpdate:t})=>{const[n,a]=r.useState([]),[c,f]=r.useState(!0);r.useState(!1),r.useState(null);const[u,d]=r.useState(!1),[o,S]=r.useState(null),[P,I]=r.useState(null);r.useEffect(()=>{s&&(async()=>{try{const i=await pi(s.orderID);a(i.result||[])}catch{h.error("Lỗi khi lấy chi tiết đơn hàng.")}finally{f(!1)}})()},[s]);const T=async b=>{try{const i=await xa(b);i!=null&&i.isSuccess?(h.success("Đơn hàng đã được hoàn thành!"),t(b,2)):h.error("Không thể hoàn thành đơn hàng.")}catch{h.error("Lỗi khi hoàn thành đơn hàng.")}},N=async b=>{try{const i=await Xs(b);i!=null&&i.isSuccess?(h.success("Đơn hàng đã được hủy!"),t(b,6)):h.error("Không thể hủy đơn hàng.")}catch{h.error("Lỗi khi hủy đơn hàng.")}},D=async b=>{try{const i=await ha(b);i!=null&&i.isSuccess?(h.success("Đơn hàng đã được giao!"),t(b,4)):h.error("Không thể giao đơn hàng.")}catch{h.error("Lỗi khi giao đơn hàng.")}},g=async b=>{try{const i=await ga(b);i!=null&&i.isSuccess?(h.success("Đơn hàng đã được phê duyệt!"),t(b,1)):h.error("Không thể phê duyệt đơn hàng.")}catch{h.error("Lỗi khi phê duyệt đơn hàng.")}},w=async b=>{try{const i=await ua(b);i!=null&&i.isSuccess?(h.success("Đơn hàng đã được chấp nhận hủy!"),t(b,7)):h.error("Không thể chấp nhận hủy đơn hàng.")}catch{h.error("Lỗi khi chấp nhận hủy đơn hàng.")}},A=async b=>{try{const i=await ya(s.orderID,b);i!=null&&i.isSuccess?(h.success("Ảnh đã được thêm trước khi giao hàng!"),S(URL.createObjectURL(b))):h.error("Không thể thêm ảnh trước khi giao hàng.")}catch{h.error("Lỗi khi thêm ảnh trước khi giao hàng.")}},F=async b=>{try{const i=await fa(s.orderID,b);i!=null&&i.isSuccess?(h.success("Ảnh đã được thêm sau khi giao hàng!"),I(URL.createObjectURL(b))):h.error("Không thể thêm ảnh sau khi giao hàng.")}catch{h.error("Lỗi khi thêm ảnh sau khi giao hàng.")}},p=async b=>{try{const i=await ma(b);i!=null&&i.isSuccess?(h.success("Đơn hàng đã được cập nhật trạng thái chờ hoàn tiền!"),t(b,9)):h.error("Không thể cập nhật trạng thái chờ hoàn tiền.")}catch{h.error("Lỗi khi cập nhật trạng thái chờ hoàn tiền.")}},l=(b,i)=>{re.confirm({title:"Bạn có chắc chắn?",content:`Bạn có muốn ${b} đơn hàng này không?`,onOk(){switch(b){case"complete":T(i);break;case"cancel":N(i);break;case"ship":D(i);break;case"approve":g(i);break;case"accept-cancel":w(i);break;case"upload-before":document.getElementById("uploadBeforeInput").click();break;case"upload-after":document.getElementById("uploadAfterInput").click();break;case"pending-refund":p(i);break}}})},v=[{title:"Phê duyệt",status:0,icon:e.jsx(ns,{}),action:"approve"},{title:"Yêu cầu hủy",status:0,icon:e.jsx(as,{}),action:"cancel"},{title:"Chấp nhận hủy",status:6,icon:e.jsx(ke,{}),action:"accept-cancel"},{title:"Đợi khách hàng đến nhận",status:1,icon:e.jsx(sn,{}),action:"ship"},{title:"Đang vận chuyện sản phẩm",status:1,icon:e.jsx(cs,{}),action:"ship"},{title:"Hoàn thành",status:[3,4],icon:e.jsx(ke,{}),action:"complete"},{title:"Chờ hoàn tiền",status:[2,7],icon:e.jsx(ke,{}),action:"pending-refund"}],m=v.findIndex(b=>b.status===s.orderStatus||Array.isArray(b.status)&&b.status.includes(s.orderStatus)),j=[{title:"Mã chi tiết đơn hàng",dataIndex:"orderDetailsID",key:"orderDetailsID"},{title:"Mã đơn hàng",dataIndex:"orderID",key:"orderID"},{title:"Tên sản phẩm",dataIndex:"productName",key:"productName"},{title:"Số lượng sản phẩm",dataIndex:"productQuality",key:"productQuality"},{title:"Tổng giá sản phẩm",dataIndex:"productPrice",key:"price",render:b=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(b)},{title:"Tổng giá sản phẩm",dataIndex:"productPriceTotal",key:"productPriceTotal",render:b=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(b)},{title:"Thời gian trả",dataIndex:"periodRental",key:"periodRental",render:b=>je(b).format("DD - MM - YYYY HH:mm")}];return e.jsxs("div",{children:[e.jsx(st,{current:m,children:v.map((b,i)=>e.jsx(mi,{title:b.title,icon:b.icon},i))}),e.jsxs("div",{className:"steps-action",style:{marginTop:16},children:[(s.orderStatus===0||s.orderStatus===8)&&e.jsx(H,{type:"primary",onClick:()=>l("approve",s.orderID),className:"ml-2",icon:e.jsx(ns,{}),style:{marginRight:8,marginBottom:8},children:"Phê duyệt"}),(s.orderStatus===0||s.orderStatus===5)&&e.jsx(H,{type:"danger",onClick:()=>l("cancel",s.orderID),className:"ml-2",icon:e.jsx(as,{}),style:{marginRight:8,marginBottom:8},children:"Hủy"}),s.orderStatus===6&&e.jsx(H,{type:"primary",onClick:()=>l("accept-cancel",s.orderID),className:"ml-2",icon:e.jsx(ke,{}),style:{marginRight:8,marginBottom:8},children:"Chấp nhận hủy"}),s.orderStatus===1&&s.deliveriesMethod===1&&e.jsx(H,{type:"default",onClick:()=>l("ship",s.orderID),className:"ml-2",icon:e.jsx(cs,{}),style:{marginRight:8,marginBottom:8},children:"Giao hàng"}),(s.orderStatus===4||u)&&e.jsx(H,{type:"primary",onClick:()=>l("complete",s.orderID),className:"ml-2",icon:e.jsx(ke,{}),style:{marginRight:8,marginBottom:8},children:"Kết thúc đơn thuê"}),(s.orderStatus===4||u)&&e.jsx(H,{type:"primary",onClick:()=>l("pending-refund",s.orderID),className:"ml-2",icon:e.jsx(ke,{}),style:{marginRight:8,marginBottom:8},children:"Gửi yêu cầu hoàn tiền cho hệ thống"}),s.orderStatus===7&&e.jsx(H,{type:"primary",onClick:()=>l("pending-refund",s.orderID),className:"ml-2",icon:e.jsx(ke,{}),style:{marginRight:8,marginBottom:8},children:"Gửi yêu cầu hoàn tiền cho hệ thống"}),s.orderStatus===1&&e.jsx(We,{customRequest:({file:b})=>A(b),showUploadList:!1,children:e.jsx(H,{icon:e.jsx(ct,{}),style:{marginRight:8,marginBottom:8},children:"Thêm ảnh trước khi giao hàng"})}),s.orderStatus===4&&s.orderType===1&&e.jsx(We,{customRequest:({file:b})=>F(b),showUploadList:!1,children:e.jsx(H,{icon:e.jsx(ct,{}),style:{marginRight:8,marginBottom:8},children:"Thêm ảnh sau khi giao hàng"})})]}),o&&e.jsxs("div",{children:[e.jsx("h3",{children:"Ảnh trước khi giao hàng:"}),e.jsx("img",{src:o,alt:"Before Delivery",style:{maxWidth:"100%"}})]}),P&&e.jsxs("div",{children:[e.jsx("h3",{children:"Ảnh sau khi giao hàng:"}),e.jsx("img",{src:P,alt:"After Delivery",style:{maxWidth:"100%"}})]}),e.jsx(se,{dataSource:n,columns:j,rowKey:"id",loading:c,pagination:!1,style:{marginTop:16}}),e.jsx("input",{type:"file",id:"uploadBeforeInput",style:{display:"none"},onChange:b=>A(b.target.files[0])}),e.jsx("input",{type:"file",id:"uploadAfterInput",style:{display:"none"},onChange:b=>F(b.target.files[0])})]})},xi=({refresh:s})=>{const t=X(R=>R.user.user||{}),[n,a]=r.useState([]),[c,f]=r.useState(!0),[u,d]=r.useState(null),[o,S]=r.useState(1),[P,I]=r.useState(10),[T,N]=r.useState(null),[D,g]=r.useState(!1),[w,A]=r.useState(null),[F,p]=r.useState(""),[l,v]=r.useState("");r.useState(!1);const[m,j]=r.useState(!1),b={0:{text:"Chờ xử lý",color:"blue",icon:"fa-hourglass-start"},1:{text:"Sản phẩm sẵn sàng được giao",color:"green",icon:"fa-check-circle"},2:{text:"Hoàn thành",color:"yellow",icon:"fa-clipboard-check"},3:{text:"Đã nhận sản phẩm",color:"purple",icon:"fa-shopping-cart"},4:{text:"Đã giao hàng",color:"cyan",icon:"fa-truck"},5:{text:"Thanh toán thất bại",color:"cyan",icon:"fa-money-bill-wave"},6:{text:"Đang hủy",color:"lime",icon:"fa-box-open"},7:{text:"Đã hủy thành công",color:"red",icon:"fa-times-circle"},8:{text:"Đã Thanh toán",color:"orange",icon:"fa-money-bill-wave"},9:{text:"Hoàn tiền đang chờ xử lý",color:"pink",icon:"fa-clock"},10:{text:"Hoàn tiền",color:"brown",icon:"fa-undo"},11:{text:"Hoàn trả tiền đặt cọc",color:"gold",icon:"fa-piggy-bank"}},i={0:{text:"Mua",color:"blue"},1:{text:"Thuê",color:"green"}},L={0:{text:"Đến cửa hàng lấy hàng",color:"blue"},1:{text:"Cửa hàng giao hàng",color:"green"},2:{text:"Đã trả lại",color:"red"}};r.useEffect(()=>{(async()=>{if(t.id)try{const M=await Ve(t.id);M!=null&&M.isSuccess?N(M.result):h.error("Lấy ID Nhà cung cấp không thành công.")}catch{h.error("Lỗi khi lấy ID Nhà cung cấp.")}})()},[t.id]),r.useEffect(()=>{(async()=>{if(T){f(!0);try{const M=await Us(T,o,P);M!=null&&M.isSuccess?a(M.result||[]):h.error("Lấy đơn hàng không thành công.")}catch{d("Lỗi khi lấy đơn hàng.")}finally{f(!1)}}})()},[s,T,o,P]);const k=(R,M)=>{a(_=>_.map(O=>O.orderID===R?{...O,orderStatus:M}:O))},B=R=>{A(R),g(!0)},q=()=>{g(!1),A(null)},V=R=>({filterDropdown:({setSelectedKeys:M,selectedKeys:_,confirm:O,clearFilters:z})=>e.jsxs("div",{style:{padding:8},children:[e.jsx(Y,{placeholder:`Search ${R}`,value:_[0],onChange:ce=>M(ce.target.value?[ce.target.value]:[]),onPressEnter:()=>x(_,O,R),style:{marginBottom:8,display:"block"}}),e.jsx(H,{type:"primary",onClick:()=>x(_,O,R),icon:e.jsx($e,{}),size:"small",style:{width:90,marginRight:8},children:"Search"}),e.jsx(H,{onClick:()=>y(z),size:"small",style:{width:90},children:"Reset"})]}),filterIcon:M=>e.jsx($e,{style:{color:M?"#1890ff":void 0}}),onFilter:(M,_)=>_[R]?_[R].toString().toLowerCase().includes(M.toLowerCase()):"",onFilterDropdownOpenChange:M=>{M&&setTimeout(()=>document.getElementById("search-input").select(),100)},render:M=>l===R?e.jsx(rn,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[F],autoEscape:!0,textToHighlight:M?M.toString():""}):M}),x=(R,M,_)=>{M(),p(R[0]),v(_)},y=R=>{R(),p("")},E=R=>{A(R),j(!0)},K=()=>{j(!1),A(null)},W=[{title:"Mã đơn hàng",dataIndex:"orderID",key:"orderID",sorter:(R,M)=>R.orderID.localeCompare(M.orderID),...V("orderID")},{title:"Mã tài khoản",dataIndex:"accountID",key:"accountID",sorter:(R,M)=>R.accountID.localeCompare(M.accountID),...V("accountID")},{title:"Ngày đặt hàng",dataIndex:"orderDate",key:"orderDate",sorter:(R,M)=>new Date(R.orderDate)-new Date(M.orderDate),render:R=>je(R).format("DD/MM/YYYY HH:mm:ss")},{title:"Trạng thái đơn hàng",dataIndex:"orderStatus",key:"orderStatus",render:R=>{const M=b[R];return M?e.jsx(me,{color:M.color,children:M.text}):null},sorter:(R,M)=>R.orderStatus-M.orderStatus},{title:"Tổng số tiền",dataIndex:"totalAmount",key:"totalAmount",sorter:(R,M)=>R.totalAmount-M.totalAmount,render:R=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(R)},{title:"Loại đơn hàng",dataIndex:"orderType",key:"orderType",render:R=>{const M=i[R];return M?e.jsx(me,{color:M.color,children:M.text}):null},sorter:(R,M)=>R.orderType-M.orderType},{title:"Địa chỉ giao hàng",dataIndex:"shippingAddress",key:"shippingAddress",sorter:(R,M)=>R.shippingAddress.localeCompare(M.shippingAddress)},{title:"Phương thức giao hàng",dataIndex:"deliveriesMethod",key:"deliveriesMethod",render:R=>{const M=L[R];return M?e.jsx(me,{color:M.color,children:M.text}):null},sorter:(R,M)=>R.deliveriesMethod-M.deliveriesMethod},{title:"Hành động",key:"actions",render:(R,M)=>e.jsxs(e.Fragment,{children:[e.jsx(H,{type:"primary",onClick:()=>B(M),children:"Theo dõi đơn hàng"}),M.orderType===1&&e.jsx(H,{type:"default",onClick:()=>E(M),style:{marginLeft:8},children:"Hợp đồng"})]})}];return c?e.jsx(te,{}):u?e.jsx("div",{children:u}):e.jsxs(e.Fragment,{children:[e.jsx(se,{dataSource:n,columns:W,rowKey:"orderID",pagination:{current:o,pageSize:P,total:n.length,onChange:(R,M)=>{S(R),I(M)}}}),e.jsx(re,{title:"Theo dõi đơn hàng",open:D,onCancel:q,footer:null,width:"80%",style:{top:20},styles:{body:{maxHeight:"80vh",overflowY:"auto"}},children:w&&e.jsx(gi,{order:w,onUpdate:k})}),e.jsx(re,{title:"Hợp đồng",visible:m,onCancel:K,footer:null,width:800,children:w&&e.jsx(ui,{orderID:w.orderID})})]})},fi=()=>{const[s,t]=r.useState(!1),n=[{key:"1",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Danh sách đơn hàng"}),children:e.jsx(xi,{refresh:s})},{key:"2",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Lọc đơn hàng"}),children:e.jsx(di,{})}];return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-blue-50 to-white rounded-lg shadow-lg max-w-1xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:"TRANG QUẢN LÍ ĐƠN HÀNG"}),e.jsx(He,{defaultActiveKey:"1",items:n,className:"custom-tabs",tabBarStyle:{padding:"1rem",backgroundColor:"#f1f5f9",borderRadius:"4px",fontSize:"1rem"},tabBarExtraContent:e.jsx("span",{className:"text-gray-500 italic"})}),e.jsx("style",{jsx:!0,children:`
        @media (forced-colors: active) {
          /* Styles for forced colors mode */
          body {
            background-color: Window;
            color: WindowText;
          }
          .custom-tabs {
            background-color: Window;
            border-color: WindowText;
          }
          .ant-tabs-card {
            background-color: Window;
          }
        }
      `})]})},hr=({product:s,loading:t,onClose:n})=>{const{id:a}=Le(),[c,f]=r.useState(s),[u,d]=r.useState(t),[o,S]=r.useState(null);if(r.useEffect(()=>{s||(async()=>{try{d(!0);const M=await ge(a);f(M)}catch(M){console.error("Failed to fetch product:",M),S("Failed to load product details. Please try again later."),h.error(M.message)}finally{d(!1)}})()},[a,s]),u)return e.jsx(te,{size:"large"});if(o)return e.jsx("div",{children:o});if(!c)return e.jsx("div",{children:"Đang tải thông tin sản phẩm..."});const{productID:P,serialNumber:I,supplierID:T,categoryID:N,productName:D,productDescription:g,depositProduct:w,priceBuy:A,pricePerHour:F,pricePerDay:p,pricePerWeek:l,pricePerMonth:v,brand:m,quality:j,status:b,rating:i,createdAt:L,updatedAt:k,listImage:B,listVoucher:q,listProductSpecification:V}=c,x=()=>B&&B.length>0?B.map((R,M)=>e.jsx($s,{src:R.image,alt:`${D} - ${M+1}`,width:100,style:{margin:"5px"}},M)):e.jsx("span",{children:"Không có hình ảnh"}),y=[{title:"Trường",dataIndex:"field",key:"field",render:R=>e.jsx("strong",{children:R})},{title:"Giá Trị",dataIndex:"value",key:"value"}],E=[{key:"1",field:"Mã Sản Phẩm",value:P},{key:"2",field:"Số Serial",value:I},{key:"3",field:"Mã Nhà Cung Cấp",value:T},{key:"4",field:"Tên Loại Hàng",value:N},{key:"5",field:"Tên Sản Phẩm",value:D},{key:"6",field:"Mô Tả",value:g},{key:"7",field:"Giá Đặt Cọc",value:w!==null?`${w} VND`:"Không có"},{key:"8",field:"Giá Bán",value:A!==null?`${A} VND`:"Không có"},{key:"9",field:"Giá Theo Giờ",value:F?`${F} VND`:"Không có"},{key:"10",field:"Giá Theo Ngày",value:p?`${p} VND`:"Không có"},{key:"11",field:"Giá Theo Tuần",value:l?`${l} VND`:"Không có"},{key:"12",field:"Giá Theo Tháng",value:v?`${v} VND`:"Không có"},{key:"13",field:"Thương Hiệu",value:ue(m)},{key:"14",field:"Chất Lượng",value:j},{key:"15",field:"Trạng Thái",value:Fe(b)},{key:"16",field:"Đánh Giá",value:i},{key:"17",field:"Ngày Tạo",value:new Date(L).toLocaleString()},{key:"18",field:"Ngày Cập Nhật",value:new Date(k).toLocaleString()},{key:"19",field:"Hình Ảnh",value:x()}],K=[{title:"Mã Voucher",dataIndex:"vourcherID",key:"vourcherID"},{title:"Ngày Tạo",dataIndex:"createdAt",key:"createdAt",render:R=>new Date(R).toLocaleString()},{title:"Ngày Cập Nhật",dataIndex:"updatedAt",key:"updatedAt",render:R=>new Date(R).toLocaleString()}],W=[{title:"Thông Số Kỹ Thuật",dataIndex:"specification",key:"specification"},{title:"Giá Trị",dataIndex:"value",key:"value"}];return e.jsxs("div",{className:"product-detail-container",children:[e.jsx(J,{justify:"space-between",align:"middle",children:e.jsx(U,{children:e.jsx("h1",{children:"Chi Tiết Sản Phẩm"})})}),e.jsx(se,{columns:y,dataSource:E,pagination:!1,showHeader:!1,bordered:!0}),e.jsx("h2",{children:"Vouchers"}),e.jsx(se,{columns:K,dataSource:q,pagination:!1,bordered:!0}),e.jsx("h2",{children:"Thông Số Kỹ Thuật"}),e.jsx(se,{columns:W,dataSource:V,pagination:!1,bordered:!0})]})},{Option:xe}=Z,yi=()=>{const[s]=C.useForm(),[t,n]=r.useState(!1),[a,c]=r.useState([]),[f,u]=r.useState(null),[d,o]=r.useState(null),[S,P]=r.useState([{feature:"",description:""}]),I=X(l=>l.user.user||{}),[T,N]=r.useState(null);r.useEffect(()=>{const l=async()=>{if(I.id)try{const m=await Ve(I.id);m!=null&&m.isSuccess?N(m.result):h.error("Lấy ID Nhà cung cấp không thành công.")}catch{h.error("Lỗi khi lấy ID Nhà cung cấp.")}},v=async()=>{n(!0);try{const m=await ot(1,100);m!=null&&m.result?c(m.result):h.error("Tải danh mục không thành công.")}catch(m){console.error("Lỗi tải:",m),h.error("Đã xảy ra lỗi khi tải danh mục.")}finally{n(!1)}};l(),v()},[I]);const D=l=>{if(l.file.status==="done"||l.file.status==="uploading"){u(l.file.originFileObj);const v=new FileReader;v.onload=m=>{o(m.target.result)},v.readAsDataURL(l.file.originFileObj)}},g=()=>{u(null),o(null)},w=async l=>{const v=S.filter(y=>y.feature&&y.description),{SerialNumber:m,CategoryID:j,ProductName:b,ProductDescription:i,Quality:L,PriceRent:k=0,PriceBuy:B,Brand:q,Status:V=0}=l;if(!T||!j||!b||!m){h.error("Vui lòng điền tất cả các trường bắt buộc.");return}const x={SerialNumber:m,SupplierID:T,CategoryID:j,ProductName:b,ProductDescription:i,Quality:L,PriceRent:k,PriceBuy:B,Brand:q,Status:V,File:f,listProductSpecification:v};console.log("Product Data:",x);try{n(!0),await ka(x)?(h.success("Sản phẩm đã được tạo thành công!"),s.resetFields(),u(null),o(null),P(["Cảm ứng"])):h.error("Tạo sản phẩm không thành công.")}catch(y){console.error("Lỗi khi tạo sản phẩm:",y),h.error("Đã xảy ra lỗi khi tạo sản phẩm.")}finally{n(!1)}},A=()=>{P([...S,{feature:"",description:""}])},F=(l,v)=>{const m=[...S];m[v]=l,P(m)},p=l=>{const v=S.filter((m,j)=>j!==l);P(v)};return e.jsxs(C,{form:s,onFinish:w,initialValues:{Status:0},children:[e.jsx(C.Item,{name:"SerialNumber",label:"Số Serial",rules:[{required:!0,message:"Vui lòng nhập số serial!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"CategoryID",label:"Danh mục",rules:[{required:!0,message:"Vui lòng chọn một danh mục!"}],children:e.jsx(Z,{placeholder:"Chọn một danh mục",children:a.map(l=>e.jsx(xe,{value:l.categoryID,children:l.categoryName},l.categoryID))})}),e.jsx(C.Item,{name:"ProductName",label:"Tên sản phẩm",rules:[{required:!0,message:"Vui lòng nhập tên sản phẩm!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"ProductDescription",label:"Mô tả",rules:[{required:!0,message:"Vui lòng nhập mô tả sản phẩm!"}],children:e.jsx(Y.TextArea,{})}),e.jsx(C.Item,{name:"Quality",label:"Chất lượng",rules:[{required:!0,message:"Vui lòng nhập chất lượng sản phẩm!"}],children:e.jsxs(Z,{placeholder:"Đánh giá  chất lượng sản phẩm",children:[e.jsx(xe,{value:0,children:"Mới"}),e.jsx(xe,{value:1,children:"Đã qua sử dụng"})]})}),e.jsx(C.Item,{name:"PriceBuy",label:"Giá (Mua)",children:e.jsx(Y,{type:"number"})}),e.jsx(C.Item,{name:"Brand",label:"Thương hiệu",rules:[{required:!0,message:"Vui lòng chọn một thương hiệu"}],children:e.jsxs(Z,{placeholder:"Chọn một thương hiệu",children:[e.jsx(xe,{value:0,children:"Canon"}),e.jsx(xe,{value:1,children:"Nikon"}),e.jsx(xe,{value:2,children:"Sony"}),e.jsx(xe,{value:3,children:"Fujifilm"}),e.jsx(xe,{value:4,children:"Olympus"}),e.jsx(xe,{value:5,children:"Panasonic"}),e.jsx(xe,{value:6,children:"Leica"}),e.jsx(xe,{value:7,children:"Pentax"}),e.jsx(xe,{value:8,children:"Hasselblad"}),e.jsx(xe,{value:9,children:"Sigma"}),e.jsx(xe,{value:10,children:"Khác"})]})}),e.jsxs(C.Item,{label:"Tải lên Tài liệu",children:[e.jsx(We,{name:"file",accept:".png,.jpg,.jpeg,.pdf",showUploadList:!1,onChange:D,children:e.jsx(H,{icon:e.jsx(ct,{}),children:"Nhấn để Tải lên"})}),d&&e.jsxs("div",{style:{marginTop:10},children:[e.jsx("p",{children:"Xem trước tài liệu:"}),e.jsx("img",{src:d,alt:"Preview",style:{maxWidth:"100%",maxHeight:200,objectFit:"cover"}}),e.jsx(H,{type:"danger",onClick:g,style:{marginTop:10},children:"Xóa Tài liệu"})]})]}),e.jsx(C.Item,{name:"Status",label:"Trạng thái",rules:[{required:!0,message:"Trạng thái là bắt buộc!"}],children:e.jsx(Z,{placeholder:"Chọn trạng thái",children:e.jsx(xe,{value:0,children:"Sản phẩm để bán"})})}),e.jsxs(C.Item,{label:"Đặc điểm sản phẩm",children:[S.map((l,v)=>e.jsxs(tt,{style:{display:"flex",marginBottom:8},children:[e.jsx(Y,{value:l.feature,onChange:m=>F(m.target.value,v),placeholder:`Đặc điểm ${v+1}`,style:{width:"100%"}}),e.jsx(Y,{value:l.description,onChange:m=>F(m.target.value,v),placeholder:`Mô tả ${v+1}`,style:{width:"40%"}}),e.jsx(H,{type:"danger",onClick:()=>p(v),children:"Xóa"})]},v)),e.jsx(H,{type:"dashed",onClick:A,children:"Thêm đặc điểm"})]}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:t,children:"Tạo sản phẩm"})})]})},{Option:Se}=Z,ji=()=>{const[s]=C.useForm(),[t,n]=r.useState(!1),[a,c]=r.useState([]),[f,u]=r.useState(null),d=X(j=>j.user.user||{}),[o,S]=r.useState(null),[P,I]=r.useState(null),[T,N]=r.useState([{feature:"",description:""}]),[D,g]=r.useState([]);r.useEffect(()=>{const j=async()=>{if(d.id)try{const i=await Ve(d.id);i!=null&&i.isSuccess?S(i.result):h.error("Lấy ID Nhà cung cấp không thành công.")}catch{h.error("Lỗi khi lấy ID Nhà cung cấp.")}},b=async()=>{n(!0);try{const i=await ot(1,100);i!=null&&i.result?c(i.result):h.error("Tải danh mục không thành công.")}catch(i){console.error("Lỗi tải:",i),h.error("Đã xảy ra lỗi khi tải danh mục.")}finally{n(!1)}};j(),b()},[d]);const w=j=>{if(j.file.status==="done"||j.file.status==="uploading"){u(j.file.originFileObj);const b=new FileReader;b.onload=i=>{I(i.target.result)},b.readAsDataURL(j.file.originFileObj)}},A=()=>{u(null),I(null)},F=async j=>{const b=T.filter(M=>M.feature&&M.description),{SerialNumber:i,CategoryID:L,ProductName:k,ProductDescription:B,Quality:q,DepositProduct:V,PricePerHour:x=0,PricePerDay:y=0,PricePerWeek:E=0,PricePerMonth:K=0,Brand:W}=j;if(!o){h.error("Supplier ID is missing or invalid.");return}const R={SerialNumber:i,SupplierID:o,CategoryID:L,ProductName:k,ProductDescription:B,Quality:q,DepositProduct:V,PricePerHour:x,PricePerDay:y,PricePerWeek:E,PricePerMonth:K,Brand:W,File:f,listProductSpecification:b};try{n(!0),await Ta(R)?(h.success("Product created successfully!"),s.resetFields(),u(null)):h.error("Failed to create product.")}catch(M){console.error("Error when creating product:",M),h.error("An error occurred while creating the product.")}finally{n(!1)}},p=j=>{g(j),j==="PricePerHour"?s.setFieldsValue({PricePerDay:0,PricePerWeek:0,PricePerMonth:0}):j==="PricePerDay"?s.setFieldsValue({PricePerHour:0,PricePerWeek:0,PricePerMonth:0}):j==="PricePerWeek"?s.setFieldsValue({PricePerHour:0,PricePerDay:0,PricePerMonth:0}):j==="PricePerMonth"&&s.setFieldsValue({PricePerHour:0,PricePerDay:0,PricePerWeek:0})},l=()=>{N([...T,{feature:"",description:""}])},v=(j,b)=>{const i=[...T];i[b]=j,N(i)},m=j=>{const b=T.filter((i,L)=>L!==j);N(b)};return e.jsxs(C,{form:s,onFinish:F,initialValues:{Quality:0,DepositProduct:"",PricePerHour:0,PricePerDay:0,PricePerWeek:0,PricePerMonth:0},children:[e.jsx(C.Item,{name:"SerialNumber",label:"Số Serial",rules:[{required:!0,message:"Vui lòng nhập số serial!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"CategoryID",label:"Danh mục",rules:[{required:!0,message:"Vui lòng chọn một danh mục!"}],children:e.jsx(Z,{placeholder:"Chọn một danh mục",children:a.map(j=>e.jsx(Se,{value:j.categoryID,children:j.categoryName},j.categoryID))})}),e.jsx(C.Item,{name:"ProductName",label:"Tên sản phẩm",rules:[{required:!0,message:"Vui lòng nhập tên sản phẩm!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"ProductDescription",label:"Mô tả",rules:[{required:!0,message:"Vui lòng nhập mô tả sản phẩm!"}],children:e.jsx(Y.TextArea,{})}),e.jsx(C.Item,{name:"Quality",label:"Chất lượng",rules:[{required:!0,message:"Vui lòng nhập chất lượng sản phẩm!"}],children:e.jsxs(Z,{placeholder:"Đánh giá chất lượng sản phẩm",children:[e.jsx(Se,{value:0,children:"Mới"}),e.jsx(Se,{value:1,children:"Đã qua sử dụng"})]})}),e.jsx(C.Item,{name:"DepositProduct",label:"Cọc",rules:[{required:!0,message:"Vui lòng nhập tiền cọc cho sản phẩm!"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{label:"Chọn loại giá",children:e.jsxs(Je.Group,{onChange:p,value:D,children:[e.jsx(Je,{value:"PricePerHour",children:"Giá theo giờ"}),e.jsx(Je,{value:"PricePerDay",children:"Giá theo ngày"}),e.jsx(Je,{value:"PricePerWeek",children:"Giá theo tuần"}),e.jsx(Je,{value:"PricePerMonth",children:"Giá theo tháng"})]})}),D.includes("PricePerHour")&&e.jsx(C.Item,{name:"PricePerHour",label:"Giá theo giờ",rules:[{required:!0,message:"Vui lòng nhập giá theo giờ!"},{type:"number",transform:j=>Number(j)}],children:e.jsx(Y,{type:"number",placeholder:"Nhập giá theo giờ"})}),D.includes("PricePerDay")&&e.jsx(C.Item,{name:"PricePerDay",label:"Giá theo ngày",rules:[{required:!0,message:"Vui lòng nhập giá theo ngày!"},{type:"number",transform:j=>Number(j)}],children:e.jsx(Y,{type:"number",placeholder:"Nhập giá theo ngày"})}),D.includes("PricePerWeek")&&e.jsx(C.Item,{name:"PricePerWeek",label:"Giá theo tuần",rules:[{required:!0,message:"Vui lòng nhập giá theo tuần!"},{type:"number",transform:j=>Number(j)}],children:e.jsx(Y,{type:"number",placeholder:"Nhập giá theo tuần"})}),D.includes("PricePerMonth")&&e.jsx(C.Item,{name:"PricePerMonth",label:"Giá theo tháng",rules:[{required:!0,message:"Vui lòng nhập giá theo tháng!"},{type:"number",transform:j=>Number(j)}],children:e.jsx(Y,{type:"number",placeholder:"Nhập giá theo tháng"})}),e.jsx(C.Item,{name:"Brand",label:"Thương hiệu",rules:[{required:!0,message:"Vui lòng chọn một thương hiệu"}],children:e.jsxs(Z,{placeholder:"Chọn một thương hiệu",children:[e.jsx(Se,{value:0,children:"Canon"}),e.jsx(Se,{value:1,children:"Nikon"}),e.jsx(Se,{value:2,children:"Sony"}),e.jsx(Se,{value:3,children:"Fujifilm"}),e.jsx(Se,{value:4,children:"Olympus"}),e.jsx(Se,{value:5,children:"Panasonic"}),e.jsx(Se,{value:6,children:"Leica"}),e.jsx(Se,{value:7,children:"Pentax"}),e.jsx(Se,{value:8,children:"Hasselblad"})]})}),e.jsxs(C.Item,{label:"Đặc điểm sản phẩm",children:[T.map((j,b)=>e.jsxs(tt,{style:{display:"flex",marginBottom:8},children:[e.jsx(Y,{value:j.feature,onChange:i=>v(i.target.value,b),placeholder:`Đặc điểm ${b+1}`,style:{width:"100%"}}),e.jsx(Y,{value:j.description,onChange:i=>v(i.target.value,b),placeholder:`Mô tả ${b+1}`,style:{width:"40%"}}),e.jsx(H,{type:"danger",onClick:()=>m(b),children:"Xóa"})]},b)),e.jsx(H,{type:"dashed",onClick:l,children:"Thêm đặc điểm"})]}),e.jsxs(C.Item,{label:"Hình ảnh",children:[e.jsx(We,{name:"file",listType:"picture",beforeUpload:j=>{const b=j.type.startsWith("image/");b||h.error("Chỉ có thể tải lên hình ảnh!");const i=j.size/1024/1024<2;return i||h.error("Hình ảnh phải nhỏ hơn 2MB!"),b&&i},onChange:w,onRemove:A,showUploadList:!1,children:e.jsx(H,{icon:e.jsx(ct,{}),children:"Tải lên hình ảnh"})}),P&&e.jsx("img",{src:P,alt:"Preview",style:{maxWidth:"100%",marginTop:8}})]}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:t,children:"Tạo sản phẩm"})})]})},{Option:oe}=Z,bi=({visible:s,onClose:t,product:n,onUpdateSuccess:a})=>{const[c]=C.useForm(),[f,u]=r.useState(null),[d,o]=r.useState(!1),[S,P]=r.useState([]),[I,T]=r.useState((n==null?void 0:n.categoryID)||null),[N,D]=r.useState(!1),[g,w]=r.useState((n==null?void 0:n.status)||0);r.useEffect(()=>{s&&A()},[s]);const A=async()=>{D(!0);try{const m=await ot(1,100);m&&m.result?P(m.result):h.error("Không thể tải danh mục. Vui lòng thử lại sau.")}catch(m){console.error("Lỗi khi tải danh mục:",m),h.error("Đã xảy ra lỗi khi tải danh mục.")}finally{D(!1)}};r.useEffect(()=>{n&&(c.setFieldsValue({productName:n.productName,productDescription:n.productDescription,priceRent:n.priceRent,priceBuy:n.priceBuy,brand:n.brand,quality:n.quality,status:n.status,serialNumber:n.serialNumber,CategoryID:n.categoryID,pricePerHour:n.pricePerHour,pricePerDay:n.pricePerDay,pricePerWeek:n.pricePerWeek,pricePerMonth:n.pricePerMonth}),T(n.categoryID),w(n.status))},[n,c]);const F=m=>{u(m.target.files[0])},p=async m=>{o(!0);try{const j=new FormData;j.append("ProductID",n.productID),j.append("SerialNumber",m.serialNumber),j.append("CategoryID",I),j.append("ProductName",m.productName),j.append("ProductDescription",m.productDescription),j.append("PriceRent",m.priceRent=0),j.append("PriceBuy",m.priceBuy),j.append("Brand",m.brand),j.append("Quality",m.quality),j.append("Status",m.status),f&&j.append("File",f);let b;m.status===0?b=await Va(j):m.status===1&&(b=await Fa({productID:n.productID,serialNumber:m.serialNumber,categoryID:I,productName:m.productName,productDescription:m.productDescription,pricePerHour:m.pricePerHour,pricePerDay:m.pricePerDay,pricePerWeek:m.pricePerWeek,pricePerMonth:m.pricePerMonth,brand:m.brand,quality:m.quality,status:m.status})),b?(a(b),h.success("Cập nhật sản phẩm thành công!"),c.resetFields(),t()):h.error("Cập nhật sản phẩm thất bại.")}catch(j){console.error("Cập nhật thất bại:",j),h.error("Cập nhật thất bại: "+j.message)}finally{o(!1)}},l=(m,j)=>j.children.toLowerCase().indexOf(m.toLowerCase())>=0,v=()=>{c.resetFields(),t()};return e.jsx(re,{title:"Chỉnh Sửa Sản Phẩm",visible:s,onCancel:v,footer:null,children:e.jsxs(C,{form:c,onFinish:p,children:[e.jsx(C.Item,{name:"productName",label:"Tên Sản Phẩm",rules:[{required:!0,message:"Vui lòng nhập tên sản phẩm"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"productDescription",label:"Mô Tả",children:e.jsx(Y.TextArea,{})}),g===0&&e.jsxs(e.Fragment,{children:[e.jsx(C.Item,{name:"priceBuy",label:"Giá Bán",rules:[{required:!0,message:"Vui lòng nhập giá bán"}],children:e.jsx(Y,{type:"number"})})," "]}),e.jsx(C.Item,{name:"brand",label:"Thương Hiệu",rules:[{required:!0,message:"Vui lòng chọn thương hiệu"}],children:e.jsxs(Z,{placeholder:"Chọn thương hiệu",children:[e.jsx(oe,{value:0,children:"Canon"}),e.jsx(oe,{value:1,children:"Nikon"}),e.jsx(oe,{value:2,children:"Sony"}),e.jsx(oe,{value:3,children:"Fujifilm"}),e.jsx(oe,{value:4,children:"Olympus"}),e.jsx(oe,{value:5,children:"Panasonic"}),e.jsx(oe,{value:6,children:"Leica"}),e.jsx(oe,{value:7,children:"Pentax"}),e.jsx(oe,{value:8,children:"Hasselblad"}),e.jsx(oe,{value:9,children:"Sigma"}),e.jsx(oe,{value:10,children:"Khác"})]})}),e.jsx(C.Item,{name:"quality",label:"Chất Lượng",rules:[{required:!0,message:"Vui lòng chọn chất lượng"}],children:e.jsxs(Z,{placeholder:"Chọn chất lượng",children:[e.jsx(oe,{value:"High",children:"Cao"}),e.jsx(oe,{value:"Medium",children:"Trung Bình"}),e.jsx(oe,{value:"Low",children:"Thấp"})]})}),e.jsx(C.Item,{name:"status",label:"Trạng Thái",rules:[{required:!0,message:"Vui lòng chọn trạng thái sản phẩm"}],children:e.jsxs(Z,{placeholder:"Chọn trạng thái",onChange:m=>w(m),children:[e.jsx(oe,{value:0,children:"Sẵn Bán"}),e.jsx(oe,{value:1,children:"Có Sẵn Để Thuê"}),e.jsx(oe,{value:4,children:"Ngừng Kinh Doanh"})]})}),g===1&&e.jsxs(e.Fragment,{children:[e.jsx(C.Item,{name:"depositProduct",label:"Giá Cọc",children:e.jsx(Y,{type:"number"})}),e.jsx(C.Item,{name:"pricePerHour",label:"Giá Theo Giờ",children:e.jsx(Y,{type:"number"})}),e.jsx(C.Item,{name:"pricePerDay",label:"Giá Theo Ngày",children:e.jsx(Y,{type:"number"})}),e.jsx(C.Item,{name:"pricePerWeek",label:"Giá Theo Tuần",children:e.jsx(Y,{type:"number"})}),e.jsx(C.Item,{name:"pricePerMonth",label:"Giá Theo Tháng",children:e.jsx(Y,{type:"number"})})]}),e.jsx(C.Item,{name:"serialNumber",label:"Số Serial",rules:[{required:!0,message:"Vui lòng nhập số serial"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"CategoryID",label:"Danh Mục",rules:[{required:!0,message:"Vui lòng chọn danh mục!"}],children:e.jsx(Z,{showSearch:!0,placeholder:"Chọn danh mục",filterOption:l,loading:N,onChange:m=>T(m),value:I,children:S.map(m=>e.jsx(oe,{value:m.categoryID,children:m.categoryName},m.categoryID))})}),e.jsx(C.Item,{label:"Tải Lên Hình Ảnh",children:e.jsx(Y,{type:"file",accept:"image/*",onChange:F})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:d,children:"Cập Nhật Sản Phẩm"})})]})})},{Title:Ni}=ie,Si=()=>{const[s,t]=r.useState([]),[n,a]=r.useState(!1),[c,f]=r.useState(1),[u,d]=r.useState(10),[o,S]=r.useState(0),P=X(O=>O.user.user||{}),[I,T]=r.useState(null),[N,D]=r.useState(""),[g,w]=r.useState(null),[A,F]=r.useState(!1),[p,l]=r.useState({}),[v,m]=r.useState(!1),[j,b]=r.useState({});Le(),r.useEffect(()=>{(async()=>{if(P.id)try{const z=await Ve(P.id);z!=null&&z.isSuccess?T(z.result):h.error("Failed to fetch supplier ID.")}catch{h.error("Error fetching supplier ID.")}})()},[P]);const i=async()=>{if(I){a(!0);try{const O=await bt(I,c,u);if(Array.isArray(O)){t(O),S(O.totalCount||0),O.totalCount===50&&alert("Hệ thống đã giúp bạn phân trang.");const z=O.map(async ce=>{if(ce.categoryID){const Ne=await Te(ce.categoryID);Ne!=null&&Ne.isSuccess&&l(rt=>({...rt,[ce.categoryID]:Ne.result.categoryName}))}});await Promise.all(z)}else h.error("Unable to fetch products."),t([])}catch(O){console.error("Error fetching products:",O),t([]),h.error("Error fetching products.")}finally{a(!1)}}};r.useEffect(()=>{I&&i()},[I,c,u]);const L=async O=>{if(window.confirm("Are you sure you want to delete this product?"))try{await Aa(O),t(ce=>ce.filter(Ne=>Ne.productID!==O)),h.success("Product deleted successfully.")}catch{h.error("Failed to delete product.")}},k=O=>{w(O),F(!0)},B=O=>{t(z=>z.map(ce=>ce.productID===O.productID?O:ce))},q=()=>{F(!1),w(null)},V=Array.isArray(s)?s.filter(O=>O.productName.toLowerCase().includes(N.toLowerCase())):[],x=O=>{switch(O){case 0:return"text-green-500 text-sm font-bold";case 1:return"text-blue-500 text-sm font-bold";case 2:return"text-orange-500 text-sm font-bold";case 3:return"text-red-500 text-sm font-bold";case 4:return"text-gray-500 text-sm font-bold";default:return"text-gray-400 text-sm font-bold"}},y=(O,z)=>{const ce={hour:z.pricePerHour,day:z.pricePerDay,week:z.pricePerWeek,month:z.pricePerMonth};return e.jsxs("div",{children:[z.pricePerHour!==null&&z.pricePerHour!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Giờ:"})," ",z.pricePerHour," VND"]}),z.pricePerDay!==null&&z.pricePerDay!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Ngày:"})," ",z.pricePerDay," VND"]}),z.pricePerWeek!==null&&z.pricePerWeek!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Tuần:"})," ",z.pricePerWeek," VND"]}),z.pricePerMonth!==null&&z.pricePerMonth!==0&&e.jsxs("span",{style:{marginRight:"10px"},children:[e.jsx("strong",{children:"Theo Tháng:"})," ",z.pricePerMonth," VND"]}),Object.values(ce).every(Ne=>Ne===null||Ne===0)&&e.jsx("span",{children:"--"})]})},E=O=>e.jsx("span",{style:{fontWeight:"bold",color:O!==null&&O!==0?"#007bff":"#888"},children:O!==null&&O!==0?`${O} VND`:"--"}),K=async O=>{a(!0);try{const z=await ge(O);w(z),m(!0)}catch{h.error("Failed to fetch product details.")}finally{a(!1)}},W=O=>{const z=new Date(O),ce=String(z.getDate()).padStart(2,"0"),Ne=String(z.getMonth()+1).padStart(2,"0"),rt=z.getFullYear(),St=String(z.getHours()).padStart(2,"0"),It=String(z.getMinutes()).padStart(2,"0"),vt=String(z.getSeconds()).padStart(2,"0");return`${ce}/${Ne}/${rt} ${St}:${It}:${vt}`},R=O=>{b(z=>({...z,[O]:!z[O]}))},M=[{title:"Mã Sản Phẩm",dataIndex:"productID",sorter:(O,z)=>O.productID-z.productID},{title:"Số Serial",dataIndex:"serialNumber",sorter:(O,z)=>O.serialNumber.localeCompare(z.serialNumber)},{title:"Mã Nhà Cung Cấp",dataIndex:"supplierID",sorter:(O,z)=>O.supplierID-z.supplierID},{title:"Tên Loại Hàng",dataIndex:"categoryID",render:O=>p[O]||"Không xác định",sorter:(O,z)=>(p[O.categoryID]||"").localeCompare(p[z.categoryID]||"")},{title:"Tên Sản Phẩm",dataIndex:"productName",sorter:(O,z)=>O.productName.localeCompare(z.productName)},{title:"Mô Tả",dataIndex:"productDescription",render:(O,z)=>e.jsxs("div",{children:[e.jsx(ie.Paragraph,{ellipsis:{rows:2,expandable:!0},children:j[z.productID]?O:`${O?O.slice(0,100):""}...`}),O&&O.length>100&&e.jsx(H,{type:"link",onClick:()=>R(z.productID),style:{padding:0},children:j[z.productID]?"See Less":"See More"})]})},{title:"Giá(Cọc)",dataIndex:"depositProduct",sorter:(O,z)=>O.depositProduct-z.depositProduct},{title:"Giá (Thuê)",dataIndex:"priceRent",render:y,sorter:(O,z)=>O.priceRent-z.priceRent},{title:"Giá (Bán)",dataIndex:"priceBuy",render:E,sorter:(O,z)=>O.priceBuy-z.priceBuy},{title:"Thương Hiệu",dataIndex:"brand",render:O=>ue(O),sorter:(O,z)=>ue(O.brand).localeCompare(ue(z.brand))},{title:"Chất Lượng",dataIndex:"quality",sorter:(O,z)=>O.quality.localeCompare(z.quality)},{title:"Trạng Thái",dataIndex:"status",render:O=>e.jsx("span",{className:x(O),children:Fe(O)}),sorter:(O,z)=>O.status-z.status},{title:"Đánh Giá",dataIndex:"rating",sorter:(O,z)=>O.rating-z.rating},{title:"Ngày Tạo",dataIndex:"createdAt",render:O=>W(O),sorter:(O,z)=>new Date(O.createdAt)-new Date(z.createdAt)},{title:"Ngày Cập Nhật",dataIndex:"updatedAt",render:O=>W(O),sorter:(O,z)=>new Date(O.updatedAt)-new Date(z.updatedAt)},{title:"Danh Sách Ảnh",dataIndex:"listImage",render:(O,z)=>e.jsx("img",{src:O&&O.length>0?O[0].image:"https://via.placeholder.com/100?text=No+Image",alt:z.productName,width:"100"})},{title:"Hành Động",render:(O,z)=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(H,{type:"default",icon:e.jsx(zt,{}),onClick:()=>K(z.productID),style:{marginRight:"8px",backgroundColor:"#1890ff",color:"#fff",borderColor:"#1890ff"}}),e.jsx(H,{type:"primary",icon:e.jsx(Qe,{}),onClick:()=>k(z),style:{marginRight:"8px",backgroundColor:"#52c41a",color:"#fff",borderColor:"#52c41a"}}),e.jsx(H,{type:"danger",icon:e.jsx(qt,{}),onClick:()=>L(z.productID),style:{backgroundColor:"#f5222d",color:"#fff",borderColor:"#f5222d"}})]})}],_=()=>{m(!1),w(null)};return e.jsxs("div",{children:[e.jsx(Ni,{level:2,children:"DANH SÁCH SẢN PHẨM "}),e.jsx(Y,{placeholder:"Tìm kiếm theo tên sản phẩm",value:N,onChange:O=>D(O.target.value),style:{marginBottom:"20px",width:"300px"}}),n?e.jsx("p",{children:"Loading products..."}):e.jsx("div",{children:V.length>0?e.jsxs(e.Fragment,{children:[e.jsx(se,{dataSource:V,columns:M,rowKey:"productID",pagination:!1,bordered:!0}),e.jsx(Me,{total:V.length,showSizeChanger:!0,onShowSizeChange:(O,z)=>{d(z)},style:{marginTop:"20px",textAlign:"center"}})]}):e.jsx("p",{children:"No products available."})}),A&&e.jsx(bi,{visible:A,onClose:q,product:g,onUpdateSuccess:B}),e.jsx(re,{title:"Chi Tiết Sản Phẩm",visible:v,onCancel:_,footer:null,children:e.jsx(hr,{product:g,loading:n,onClose:_})})]})},Ii=()=>{const[s,t]=r.useState(!1),n=[{key:"1",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Sản phẩm của bạn"}),children:e.jsx(Si,{})},{key:"2",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Tạo sản phẩm để bán"}),children:e.jsx(yi,{refresh:s})},{key:"3",label:e.jsx("span",{className:"font-medium text-lg text-gray-700",children:"Tạo sản phẩm để cho thuê"}),children:e.jsx(ji,{})}];return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-blue-50 to-white rounded-lg shadow-lg max-w-1xl mx-auto",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-6 text-center",children:["TRANG QUẢN LÍ SẢN PHẨM"," "]}),e.jsx(He,{defaultActiveKey:"1",items:n,className:"custom-tabs",tabBarStyle:{padding:"1rem",backgroundColor:"#f1f5f9",borderRadius:"4px",fontSize:"1rem"},tabBarExtraContent:e.jsx("span",{className:"text-gray-500 italic"})}),e.jsx("style",{jsx:!0,children:`
        @media (forced-colors: active) {
          /* Styles for forced colors mode */
          body {
            background-color: Window;
            color: WindowText;
          }
          .custom-tabs {
            background-color: Window;
            border-color: WindowText;
          }
          .ant-tabs-card {
            background-color: Window;
          }
        }
      `})]})},vi=async(s=1,t=10)=>{try{return(await G.get("/productVoucher/get-all-product-voucher",{params:{pageIndex:s,pageSize:t}})).data}catch(n){return console.error("Error fetching all product vouchers:",n),null}},wi=async(s,t)=>{try{return(await G.post("/productVoucher/create-product-voucher",{productID:s,vourcherID:t})).data}catch(n){return console.error("Error creating product voucher:",n),null}},Di=async(s,t,n)=>{try{return(await G.put("/productVoucher/update-product-voucher",{productVoucherID:s,productID:t,voucherID:n})).data}catch(a){return console.error("Error updating product voucher:",a),null}},Ci=async s=>{try{return(await G.delete("/productVoucher/delete-product-voucher",{params:{voucherId:s}})).data}catch(t){return console.error("Error deleting product voucher:",t),null}};ee.extend(nn);const{Option:Pi}=Z,{Title:At}=ie,ki=()=>{const[s,t]=r.useState([]),[n,a]=r.useState([]),[c,f]=r.useState([]),[u,d]=r.useState(!1),[o,S]=r.useState(!1),[P,I]=r.useState(!1),[T,N]=r.useState(null),[D,g]=r.useState(null),[w,A]=r.useState(null),[F]=C.useForm(),p=X(M=>M.user.user||{}),[l,v]=r.useState(null),[m,j]=r.useState(1),[b,i]=r.useState(100),[L,k]=r.useState(1),B=async()=>{d(!0);try{const M=await vi();if(M&&M.isSuccess){const _=await Promise.all(M.result.map(async O=>{const z=await ge(O.productID),ce=await lt(O.vourcherID);return{...O,productName:z?z.productName:"Không xác định",productDescription:z?z.description:"Không xác định",vourcherCode:ce?ce.vourcherCode:"Không xác định"}}));t(_)}else h.error("Lấy dữ liệu voucher sản phẩm thất bại.")}catch{h.error("Đã xảy ra lỗi khi lấy dữ liệu voucher sản phẩm.")}finally{d(!1)}};r.useEffect(()=>{(async()=>{if(p.id)try{const _=await Ve(p.id);_!=null&&_.isSuccess?v(_.result):h.error("Failed to fetch supplier ID.")}catch{h.error("Error fetching supplier ID.")}})()},[p]);const q=async()=>{if(l){d(!0);try{const M=await bt(l,m,b);Array.isArray(M)?(a(M),k(M.totalCount||0)):(h.error("Unable to fetch products."),a([]))}catch(M){console.error("Error fetching products:",M),a([]),h.error("Error fetching products.")}finally{d(!1)}}};r.useEffect(()=>{l&&q()},[l,m,b]);const V=async()=>{d(!0);try{const M=await Zs(1,100);if(M&&M.result){const _=M.result.filter(O=>ee(O.expirationDate).isAfter(ee()));f(_)}else h.error("Lấy dữ liệu voucher thất bại.")}catch{h.error("Lấy dữ liệu voucher thất bại.")}finally{d(!1)}};r.useEffect(()=>{B(),q(),V()},[]);const x=async M=>{if(window.confirm("Bạn có chắc muốn xóa voucher sản phẩm này không?"))try{await Ci(M)?(h.success("Xóa voucher sản phẩm thành công!"),B()):h.error("Xóa voucher sản phẩm thất bại.")}catch{h.error("Đã xảy ra lỗi khi xóa voucher sản phẩm.")}},y=M=>{S(!0),N(M),F.setFieldsValue({productID:M.productID,vourcherID:M.vourcherID})},E=()=>{S(!1),N(null),F.resetFields(),B()},K=async()=>{try{const M=await F.validateFields(),_=await Di(T.productVoucherID,M);_&&_.isSuccess?(h.success("Cập nhật voucher sản phẩm thành công!"),E()):h.error(_.messages[0]||"Cập nhật voucher sản phẩm thất bại.")}catch(M){console.error("Cập nhật voucher sản phẩm thất bại:",M),h.error("Cập nhật voucher sản phẩm thất bại.")}},W=async()=>{if(!D||!w){h.error("Vui lòng chọn sản phẩm và voucher.");return}try{const M=await wi(D.productID,w.vourcherID);M&&M.isSuccess?(h.success("Tạo voucher sản phẩm thành công!"),B(),I(!1)):h.error(M.messages[0]||"Tạo voucher sản phẩm thất bại.")}catch(M){console.error("Tạo voucher sản phẩm thất bại:",M),h.error("Tạo voucher sản phẩm thất bại.")}},R=[{title:"Mã Voucher Sản Phẩm",dataIndex:"productVoucherID",key:"productVoucherID",align:"center"},{title:"Mã Voucher",dataIndex:"vourcherCode",key:"vourcherCode",align:"center"},{title:"Tên Sản Phẩm",dataIndex:"productName",key:"productName",align:"center",width:200,ellipsis:!0},{title:"Ngày tạo",dataIndex:"createdAt",key:"createdAt",render:M=>ee(M).format("DD/MM/YYYY HH:mm:ss A"),align:"center"},{title:"Ngày cập nhật",dataIndex:"updatedAt",key:"updatedAt",render:M=>ee(M).format("DD/MM/YYYY HH:mm:ss A"),align:"center"},{title:"Hành Động",key:"actions",align:"center",render:(M,_)=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{onClick:()=>y(_),type:"primary",icon:e.jsx(Qe,{}),children:"Sửa"}),e.jsx(H,{onClick:()=>x(_.productVoucherID),danger:!0,icon:e.jsx(qt,{}),children:"Xóa"})]})}];return e.jsxs("div",{className:"p-6 bg-gray-100 rounded-lg shadow-md",children:[e.jsx(At,{level:2,className:"text-center mb-4 text-blue-500",children:"Voucher Sản Phẩm"}),e.jsx(H,{type:"primary",icon:e.jsx(Et,{}),onClick:()=>{I(!0),S(!1)},className:"mb-4 bg-blue-500 border-blue-500 hover:bg-blue-600",children:"Thêm Voucher"}),u?e.jsx(Ce,{}):e.jsx(se,{dataSource:s,columns:R,rowKey:"productVoucherID",className:"mb-4 rounded-lg",pagination:{position:["bottomCenter"]}}),e.jsx(re,{title:"Tạo Voucher Sản Phẩm",open:P,onCancel:()=>I(!1),footer:null,children:e.jsxs("div",{className:"p-4",children:[e.jsxs(J,{gutter:16,children:[e.jsxs(U,{span:12,children:[e.jsx(At,{level:5,className:"mb-4",children:"Chọn Sản Phẩm"}),e.jsx(J,{gutter:[16,16],children:n.map(M=>e.jsx(U,{span:24,children:e.jsx(Q,{hoverable:!0,onClick:()=>g(M),className:`p-4 border ${(D==null?void 0:D.productID)===M.productID?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:e.jsx(Q.Meta,{title:e.jsx("div",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:M.productName}),description:M.description})})},M.productID))})]}),e.jsxs(U,{span:12,children:[e.jsx(At,{level:5,className:"mb-4",children:"Chọn Voucher"}),e.jsx(J,{gutter:[16,16],children:c.map(M=>e.jsx(U,{span:24,children:e.jsx(Q,{hoverable:!0,onClick:()=>A(M),className:`p-4 border ${(w==null?void 0:w.vourcherID)===M.vourcherID?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:e.jsx(Q.Meta,{title:e.jsx("div",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:M.vourcherCode}),description:M.description})})},M.vourcherID))})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(H,{type:"primary",onClick:W,block:!0,className:"bg-blue-500 border-blue-500 hover:bg-blue-600",children:"Xác nhận"})})]})}),e.jsx(re,{title:"Sửa Voucher Sản Phẩm",open:o,onCancel:E,onOk:K,footer:[e.jsx(H,{onClick:E,children:"Hủy"},"back"),e.jsx(H,{type:"primary",onClick:K,loading:u,className:"bg-blue-500 border-blue-500 hover:bg-blue-600",children:"Cập nhật"},"submit")],children:e.jsxs(C,{form:F,layout:"vertical",children:[e.jsx(C.Item,{name:"productID",label:"Mã Sản Phẩm",rules:[{required:!0,message:"Vui lòng nhập mã sản phẩm"}],children:e.jsx(Y,{disabled:!0})}),e.jsx(C.Item,{name:"vourcherID",label:"Mã Voucher",rules:[{required:!0,message:"Vui lòng nhập mã voucher"}],children:e.jsx(Z,{children:c.map(M=>e.jsx(Pi,{value:M.vourcherID,children:M.vourcherCode},M.vourcherID))})})]})})]})},Ti=()=>{const[s,t]=r.useState(!1),n=X(u=>u.user.user||{}),[a,c]=r.useState(null);r.useEffect(()=>{(async()=>{if(n.id)try{const d=await Ve(n.id);d!=null&&d.isSuccess?c(d.result):h.error("Lấy mã nhà cung cấp không thành công.")}catch{h.error("Lỗi khi lấy mã nhà cung cấp.")}})()},[n.id]);const f=async u=>{t(!0);try{const d=await gc({supplierID:a,vourcherCode:u.vourcherCode,discountAmount:u.discountAmount,description:u.description,validFrom:u.validFrom,expirationDate:u.expirationDate});d.isSuccess?h.success("Tạo voucher thành công!"):h.error(d.messages.join(", "))}catch{h.error("Lỗi khi tạo voucher.")}finally{t(!1)}};return e.jsx(J,{justify:"center",children:e.jsx(U,{span:12,children:e.jsx(Q,{title:"Tạo Voucher",bordered:!1,className:"bg-gray-100 p-4 rounded-lg",children:e.jsxs(C,{onFinish:f,layout:"vertical",children:[e.jsx(C.Item,{name:"vourcherCode",label:"Mã Voucher",rules:[{required:!0,message:"Vui lòng nhập mã voucher!"}],children:e.jsx(Y,{placeholder:"Nhập mã voucher"})}),e.jsx(C.Item,{name:"discountAmount",label:"Số Tiền Giảm",rules:[{required:!0,message:"Vui lòng nhập số tiền giảm!"}],children:e.jsx(Ls,{min:0,className:"w-full",placeholder:"Nhập số tiền giảm"})}),e.jsx(C.Item,{name:"description",label:"Mô Tả",rules:[{required:!0,message:"Vui lòng nhập mô tả!"}],children:e.jsx(Y.TextArea,{rows:4,placeholder:"Nhập mô tả voucher"})}),e.jsx(C.Item,{name:"validFrom",label:"Ngày Bắt Đầu",rules:[{required:!0,message:"Vui lòng chọn ngày bắt đầu hợp lệ!"}],children:e.jsx(we,{showTime:!0,className:"w-full",placeholder:"Chọn ngày bắt đầu"})}),e.jsx(C.Item,{name:"expirationDate",label:"Ngày Hết Hạn",rules:[{required:!0,message:"Vui lòng chọn ngày hết hạn!"}],children:e.jsx(we,{showTime:!0,className:"w-full",placeholder:"Chọn ngày hết hạn"})}),e.jsx(C.Item,{children:e.jsx(H,{type:"primary",htmlType:"submit",loading:s,block:!0,className:"bg-blue-500 border-blue-500 hover:bg-blue-600",children:"Tạo Voucher"})})]})})})})},Mi=()=>{const s=X(x=>x.user.user||{}),[t,n]=r.useState(null),[a,c]=r.useState([]),[f,u]=r.useState(!1),[d,o]=r.useState(0),[S,P]=r.useState(1),[I,T]=r.useState(10),[N,D]=r.useState(null),[g,w]=r.useState(!1),[A,F]=r.useState(!1),[p,l]=r.useState(""),[v]=C.useForm();r.useState(!1),r.useState(null),r.useState(null);const m=async()=>{if(s.id)try{const x=await Ve(s.id);console.log("Supplier ID Response:",x),x!=null&&x.isSuccess?n(x.result):h.error("Failed to get Supplier ID.")}catch{h.error("Error fetching Supplier ID.")}},j=async(x,y,E)=>{if(E){u(!0);try{const K=await Xt(E,x,y);console.log("Vouchers Response:",K),K&&Array.isArray(K.result)?(c(K.result),o(K.totalCount||K.result.length),console.log("Vouchers State:",K.result)):(c([]),o(0))}catch{h.error("Failed to fetch vouchers."),c([]),o(0)}finally{u(!1)}}},b=(x,y)=>{P(x),T(y),j(x,y,t)};r.useEffect(()=>{m()},[s]),r.useEffect(()=>{t&&j(S,I,t)},[t,S,I]);const i=x=>{D(x),w(!0)},L=async()=>{try{const x=await v.validateFields(),y=await xc({...x,expirationDate:x.expirationDate?x.expirationDate.toISOString():null});c(E=>E.map(K=>K.vourcherID===y.vourcherID?y:K)),h.success("Voucher updated successfully."),F(!1)}catch(x){console.error("Error updating voucher:",x),h.error("Failed to update voucher. Please try again.")}},k=x=>{D(x),v.setFieldsValue({vourcherID:x.vourcherID,description:x.description,expirationDate:x.expirationDate?ee(x.expirationDate):null,isActive:x.isActive}),F(!0)},B=x=>{l(x.target.value)},q=a.filter(x=>x.vourcherCode.toLowerCase().includes(p.toLowerCase())).sort((x,y)=>{const E=ee(x.expirationDate).isBefore(ee()),K=ee(y.expirationDate).isBefore(ee());return E&&!K?1:!E&&K?-1:0}),V=[{title:"Mã Voucher",dataIndex:"vourcherID",key:"vourcherID",sorter:(x,y)=>x.vourcherID.localeCompare(y.vourcherID)},{title:"Mã Giảm Giá",dataIndex:"vourcherCode",key:"vourcherCode",sorter:(x,y)=>x.vourcherCode.localeCompare(y.vourcherCode)},{title:"Mô Tả",dataIndex:"description",key:"description",sorter:(x,y)=>x.description.localeCompare(y.description)},{title:"Giá Trị Giảm Giá",dataIndex:"discountAmount",key:"discountAmount",sorter:(x,y)=>x.discountAmount-y.discountAmount},{title:"Ngày Bắt Đầu",dataIndex:"validFrom",key:"validFrom",sorter:(x,y)=>ee(x.validFrom).unix()-ee(y.validFrom).unix(),render:x=>ee(x).format("DD/MM/YYYY HH:mm:ss")},{title:"Ngày Hết Hạn",dataIndex:"expirationDate",key:"expirationDate",sorter:(x,y)=>ee(x.expirationDate).unix()-ee(y.expirationDate).unix(),render:x=>ee(x).format("DD/MM/YYYY HH:mm:ss"),defaultSortOrder:"descend"},{title:"Trạng Thái",dataIndex:"isActive",key:"isActive",render:x=>x?e.jsx(ke,{style:{color:"green"}}):e.jsx(ut,{style:{color:"red"}}),sorter:(x,y)=>x.isActive-y.isActive},{title:"Ngày Tạo",dataIndex:"createdAt",key:"createdAt",sorter:(x,y)=>ee(x.createdAt).unix()-ee(y.createdAt).unix(),render:x=>ee(x).format("DD/MM/YYYY HH:mm:ss")},{title:"Ngày Cập Nhật",dataIndex:"updatedAt",key:"updatedAt",sorter:(x,y)=>ee(y.updatedAt).unix()-ee(y.updatedAt).unix(),render:x=>ee(x).format("DD/MM/YYYY HH:mm:ss")},{title:"Hành Động",render:(x,y)=>{const E=ee(y.expirationDate).isBefore(ee());return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(H,{onClick:()=>i(y),icon:e.jsx(zt,{}),type:"primary",disabled:E,children:"Xem Chi Tiết"}),e.jsx(H,{onClick:()=>k(y),icon:e.jsx(Qe,{}),type:"default",disabled:E,children:"Cập Nhật"})]})}}];return e.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx("h1",{className:"text-blue-500 mb-4 text-2xl font-semibold",children:"DANH SÁCH VOUCHER"}),e.jsx(Y,{placeholder:"Search by Voucher Code",prefix:e.jsx($e,{}),value:p,onChange:B,className:"mb-4 rounded border border-gray-300 p-2"}),f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(te,{})}):e.jsx(e.Fragment,{children:q.length>0?e.jsxs(e.Fragment,{children:[e.jsx(se,{dataSource:q,columns:V,rowKey:"vourcherID",pagination:!1,className:"rounded-lg"}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(Me,{current:S,total:d,pageSize:I,showSizeChanger:!0,onChange:b})})]}):e.jsx("div",{className:"text-center text-gray-500",children:"Không có dữ liệu!"})}),N&&e.jsx(re,{title:"Chi Tiết Voucher",open:g,onCancel:()=>w(!1),footer:[e.jsx(H,{onClick:()=>w(!1),children:"Đóng"},"close")],children:e.jsxs($,{bordered:!0,column:1,className:"bg-gray-100 p-4 rounded-lg",children:[e.jsx($.Item,{label:"Mã Giảm Giá",children:N.vourcherCode}),e.jsx($.Item,{label:"Mô Tả",children:N.description}),e.jsx($.Item,{label:"Giá Trị Giảm Giá",children:N.discountAmount}),e.jsx($.Item,{label:"Ngày Bắt Đầu",children:ee(N.validFrom).format("DD/MM/YYYY HH:mm")}),e.jsx($.Item,{label:"Ngày Hết Hạn",children:ee(N.expirationDate).format("DD/MM/YYYY HH:mm")}),e.jsx($.Item,{label:"Trạng Thái",children:N.isActive?e.jsx(ke,{className:"text-green-500"}):e.jsx(ut,{className:"text-red-500"})}),e.jsx($.Item,{label:"Ngày Tạo",children:ee(N.createdAt).format("DD/MM/YYYY HH:mm")}),e.jsx($.Item,{label:"Ngày Cập Nhật",children:ee(N.updatedAt).format("DD/MM/YYYY HH:mm")})]})}),N&&e.jsx(re,{title:"Cập Nhật Voucher",open:A,onOk:L,onCancel:()=>F(!1),children:e.jsxs(C,{form:v,layout:"vertical",className:"mb-4 font-bold",children:[e.jsx(C.Item,{name:"vourcherID",label:"Mã Voucher",children:e.jsx(Y,{disabled:!0})}),e.jsx(C.Item,{name:"description",label:"Mô Tả",rules:[{required:!0,message:"Vui lòng nhập mô tả"}],children:e.jsx(Y,{})}),e.jsx(C.Item,{name:"expirationDate",label:"Ngày Hết Hạn",rules:[{required:!0,message:"Vui lòng chọn ngày hết hạn"}],children:e.jsx(we,{showTime:!0,disabled:ee(N.expirationDate).isBefore(ee()),className:"w-full"})}),e.jsx(C.Item,{name:"isActive",label:"Trạng Thái Kích Hoạt",valuePropName:"checked",children:e.jsx(an,{})})]})})]})},Vi=()=>{const[s,t]=r.useState(!1),n=()=>{h.success("Tạo voucher thành công!"),t(!s)},a=[{key:"1",label:"Danh Sách Voucher",children:e.jsx(Mi,{refresh:s})},{key:"2",label:"Tạo Voucher",children:e.jsx(Ti,{onVoucherCreated:n})},{key:"3",label:"Quản lí sản phẩm áp mã ưu đãi",children:e.jsx(ki,{})}];return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Quản Lý Voucher"})," ",e.jsx(He,{defaultActiveKey:"1",items:a})]})},Ai=({children:s})=>{try{const t=localStorage.getItem("accessToken");if(!t)return ve.error("Bạn cần đăng nhập"),e.jsx(et,{to:"/login",replace:!0});const{mainRole:n}=Rt(t);return n!=="ADMIN"?(ve.error("Bạn không có quyền truy cập"),e.jsx(et,{to:"/",replace:!0})):s}catch(t){return console.error("Error decoding token or checking role",t),ve.error("Đã xảy ra lỗi khi kiểm tra quyền truy cập"),e.jsx(et,{to:"/",replace:!0})}},Fi=it({ratingValue:at().min(1,"Rating must be at least 1").max(5,"Rating cannot be more than 5").required("Rating is required"),reviewComment:ne().required("Review comment is required")}),Li=({productID:s,onClose:t})=>{const a=X(u=>u.user.user||{}).id,c={ratingValue:0,reviewComment:""},f=async(u,{setSubmitting:d})=>{const o=await sc(s,a,u.ratingValue,u.reviewComment);o&&o.isSuccess?(h.success("Rating created successfully"),t()):(h.error("Failed to create rating"),console.error("Failed to create rating:",o?o.messages:"Unknown error")),d(!1)};return e.jsx(pt,{initialValues:c,validationSchema:Fi,onSubmit:f,children:({isSubmitting:u,setFieldValue:d})=>e.jsxs(mt,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rating Value:"}),e.jsx(he,{name:"ratingValue",children:({field:o})=>e.jsx(Ot,{...o,onChange:S=>d("ratingValue",S),className:"mt-1"})}),e.jsx(Ie,{name:"ratingValue",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Review Comment:"}),e.jsx(he,{name:"reviewComment",children:({field:o})=>e.jsx(Y.TextArea,{...o,rows:4,className:"mt-1",required:!0})}),e.jsx(Ie,{name:"reviewComment",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsx(H,{type:"primary",htmlType:"submit",className:"w-full",disabled:u,children:"Submit Rating"})]})})},Ei={0:{text:"Chờ xử lý",color:"blue",icon:"fa-hourglass-start"},1:{text:"Sản phẩm sẵn sàng được giao",color:"green",icon:"fa-check-circle"},2:{text:"Hoàn thành",color:"yellow",icon:"fa-clipboard-check"},3:{text:"Đã nhận sản phẩm",color:"purple",icon:"fa-shopping-cart"},4:{text:"Đã giao hàng",color:"cyan",icon:"fa-truck"},5:{text:"Thanh toán thất bại",color:"cyan",icon:"fa-money-bill-wave"},6:{text:"Đang hủy",color:"lime",icon:"fa-box-open"},7:{text:"Đã hủy thành công",color:"red",icon:"fa-times-circle"},8:{text:"Đã Thanh toán",color:"orange",icon:"fa-money-bill-wave"},9:{text:"Hoàn tiền đang chờ xử lý",color:"pink",icon:"fa-clock"},10:{text:"Hoàn tiền",color:"brown",icon:"fa-undo"},11:{text:"Hoàn trả tiền đặt cọc",color:"gold",icon:"fa-piggy-bank"}},$i={0:{text:"Mua",color:"indigo",icon:"fa-shopping-bag"},1:{text:"Thuê",color:"green",icon:"fa-warehouse"}},Ri={0:{text:"Nhận tại cửa hàng",color:"blue",icon:"fa-store"},1:{text:"Giao hàng tận nơi",color:"green",icon:"fa-truck"},2:{text:"Trả lại",color:"red",icon:"fa-undo"}},Hi=()=>{const{user:s}=X(j=>j.user||{}),[t,n]=r.useState([]),[a,c]=r.useState(!1),[f,u]=r.useState([]),[d,o]=r.useState(!1),[S,P]=r.useState({}),[I,T]=r.useState({}),[N,D]=r.useState(!1),[g,w]=r.useState(null),A=async()=>{try{o(!0),console.log("Fetching orders for user ID:",s.id);const j=await jt(s.id,1,100);console.log("API response:",j),j.isSuccess?n(j.result||[]):h.error("Failed to fetch orders.")}catch(j){console.error("Error fetching orders:",j),h.error("An error occurred, please try again later.")}finally{o(!1)}};r.useEffect(()=>{s!=null&&s.id&&A()},[s]);const F=async j=>{try{o(!0);const b=await Wt(j,1,100);b.isSuccess?u(b.result||[]):h.error("Failed to fetch order details.")}catch(b){console.error("Error fetching order details:",b),h.error("An error occurred, please try again later.")}finally{o(!1)}};r.useEffect(()=>{f.length>0&&p()},[f]);const p=async()=>{const j=[...new Set(f.map(i=>i.product.categoryID))].filter(i=>i),b=[...new Set(f.map(i=>i.product.supplierID))].filter(i=>i);try{const i=j.map(x=>Te(x)),L=b.map(x=>be(x,1,1)),k=await Promise.all(i),B=await Promise.all(L),q={};k.forEach((x,y)=>{var K;const E=j[y];q[E]=x.isSuccess&&((K=x.result)==null?void 0:K.categoryName)||"Không xác định"});const V={};B.forEach((x,y)=>{const E=b[y];V[E]=x&&x.result&&x.result.items.length>0?{supplierName:x.result.items[0].supplierName,supplierAddress:x.result.items[0].supplierAddress||"Không xác định",supplierDescription:x.result.items[0].supplierDescription||"Không xác định",contactNumber:x.result.items[0].contactNumber||"Không xác định"}:{supplierName:"Không xác định",supplierAddress:"Không xác định",supplierDescription:"Không xác định",contactNumber:"Không xác định"}}),P(q),T(V)}catch(i){console.error("Error fetching category or supplier names:",i),h.error("Error fetching category or supplier names.")}},l=j=>{c(!0),F(j.orderID)},v=({status:j,map:b})=>{const i=b[j]||{text:"Thanh toán thất bại",color:"gray",icon:"fa-question-circle"};return e.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 text-xs font-semibold rounded-full bg-opacity-20",children:[e.jsx("i",{className:`fa-solid ${i.icon} text-${i.color}-500`}),e.jsx("span",{className:`text-${i.color}-700`,children:i.text})]})},m=j=>{var b;return e.jsxs("tr",{onClick:()=>l(j),children:[e.jsx("td",{className:"py-3 px-4 border-b",children:j.orderID}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(v,{status:j.orderStatus,map:Ei})}),e.jsx("td",{className:"py-3 px-4 border-b hidden md:table-cell",children:j.shippingAddress}),e.jsx("td",{className:"py-3 px-4 border-b hidden lg:table-cell",children:e.jsx(v,{status:j.deliveriesMethod,map:Ri})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(v,{status:j.orderType,map:$i})}),e.jsx("td",{className:"py-3 px-4 border-b hidden sm:table-cell",children:Ke(j.orderDate)}),e.jsx("td",{className:"py-3 px-4 border-b",children:ze(j.totalAmount)}),e.jsx("td",{children:(j.orderStatus===2||j.orderStatus===9||j.orderStatus===10||j.orderStatus===11)&&((b=j.orderDetails)==null?void 0:b.map(i=>e.jsxs(Fragment,{children:[e.jsx("button",{className:"bg-blue-500 text-white rounded-md py-2 px-4 my-2",onClick:L=>{L.stopPropagation(),console.log("Product ID:",i.productID),w(i.productID),D(!0)},children:"Đánh giá sản phẩm"}),e.jsx(re,{title:"Submit a Rating",open:N&&g===i.productID,onCancel:()=>D(!1),footer:null,children:e.jsx(Li,{productID:i.productID,onClose:()=>D(!1)})})]},i.orderDetailsID)))})]},j.orderID)};return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsx(Ce,{isLoading:d,title:"Loading data..."}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:a?null:e.jsxs("div",{className:"lg:col-span-3 bg-white shadow-lg rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-teal-600 mb-6 text-center",children:"Đơn hàng của bạn"}),t.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No orders found."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 border-b",children:"Mã đơn hàng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Trạng thái"}),e.jsx("th",{className:"py-3 px-4 border-b hidden md:table-cell",children:"Địa chỉ giao hàng"}),e.jsx("th",{className:"py-3 px-4 border-b hidden lg:table-cell",children:"Phương thức giao hàng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Loại"}),e.jsx("th",{className:"py-3 px-4 border-b hidden sm:table-cell",children:"Ngày đặt hàng"}),e.jsx("th",{className:"py-3 px-4 border-b",children:"Tổng số tiền"}),e.jsx("th",{className:"py-3 px-6 border-b",children:" "}),e.jsx("th",{className:"py-3 px-6 border-b",children:" "}),e.jsx("th",{className:"py-3 px-6 border-b",children:" "})]})}),e.jsx("tbody",{children:t.map(m)})]})})]})})]})};function Oi(){return cn([{path:"*",element:e.jsx(Ra,{})},{path:"/",element:e.jsx(Cn,{}),children:[{index:!0,element:e.jsx(Js,{})},{path:"login",element:e.jsx(mc,{})},{path:"verify-payment/*",element:e.jsx(Cl,{})},{path:"about",element:e.jsx(da,{})},{path:"contact",element:e.jsx($a,{})},{path:"policy",element:e.jsx(Vc,{})},{path:"cart",element:e.jsx(va,{})},{path:"personal-information",element:e.jsx(Mc,{})},{path:"register-supplier",element:e.jsx(Fl,{})},{path:"product",element:e.jsx(Rc,{})},{path:"product-for-rent",element:e.jsx(Kc,{})},{path:"product-for-buy",element:e.jsx(Yc,{})},{path:"create-order-buy",element:e.jsx(Ic,{})},{path:"create-order-rent",element:e.jsx(gl,{})},{path:"personal-review",element:e.jsx(Hi,{})},{path:"/product/:id",element:e.jsx(Fc,{})},{path:"order-detail",element:e.jsx(Ml,{})},{path:"category",element:e.jsx(La,{})},{path:"information-supplier",element:e.jsx(cc,{})},{path:"supplier-information-detail/:id",element:e.jsx(vs,{})},{path:"wishlist",element:e.jsx(kl,{})},{path:"create-report-form",element:e.jsx(jl,{})}]},{path:"admin",element:e.jsx(Ai,{children:e.jsx(kt,{})}),children:[{index:!0,element:e.jsx(et,{to:"dashboard",replace:!0})},{path:"dashboard",element:e.jsx(sl,{})},{path:"manage-user",element:e.jsx(oa,{})},{path:"settings",element:e.jsx("div",{children:"Settings"})},{path:"manage-policy",element:e.jsx(Hn,{})},{path:"manage-category",element:e.jsx(xs,{})},{path:"manage-product",element:e.jsx(fs,{})},{path:"create-staff",element:e.jsx(qs,{})}]},{path:"supllier",element:e.jsx(kt,{}),children:[{index:!0,element:e.jsx(et,{to:"dashboard",replace:!0})},{path:"dashboard",element:e.jsx(ii,{})},{path:"manage-voucher-of-supplier",element:e.jsx(Vi,{})},{path:"manage-product-of-supplier",element:e.jsx(Ii,{})},{path:"supplier-information-detail/:id",element:e.jsx(vs,{})},{path:"product/details/:productID",element:e.jsx(hr,{})},{path:"manage-order",element:e.jsx(fi,{})},{path:"manage-contract-template",element:e.jsx(ci,{})}]},{path:"staff",element:e.jsx(kt,{}),children:[{index:!0,element:e.jsx(et,{to:"dashboard",replace:!0})},{path:"dashboard",element:e.jsx("div",{children:"Dashboard"})},{path:"manage-category",element:e.jsx(xs,{})},{path:"manage-product",element:e.jsx(fs,{})},{path:"manage-voucher",element:e.jsx(ti,{})},{path:"manage-transaction-system",element:e.jsx(Jl,{})}]}])}const Bi=r.createContext(),Yi=({children:s})=>{const[t,n]=r.useState(!1),[a,c]=r.useState(""),f=()=>{const o=localStorage.getItem("user");if(o){n(!0);const S=JSON.parse(o).user;c(S)}};r.useEffect(()=>{f()},[]);const u=o=>{n(!0),c(o),localStorage.setItem("user",JSON.stringify({user:o}))},d=()=>{n(!1),c(""),localStorage.removeItem("user")};return e.jsx(Bi.Provider,{value:{isLoggedIn:t,username:a,login:u,logout:d},children:s})};ln.init({duration:1e3});on.register(...dn);function Gi(){return e.jsx(e.Fragment,{children:e.jsx(hn,{store:Hs,children:e.jsx(un,{loading:null,persistor:Nn,children:e.jsx(In,{children:e.jsx(pn,{children:e.jsxs(Yi,{children:[e.jsx(Oi,{}),e.jsx(ls,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsx(ls,{})]})})})})})})}mn.createRoot(document.getElementById("root")).render(e.jsx(ks.StrictMode,{children:e.jsx(Gi,{})}));
